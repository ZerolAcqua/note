
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://note.zerolacqua.top/programming/cpp/modern-cpp-features/">
      
      
        <link rel="prev" href="../../../course/others/%E9%9F%B3%E4%B9%90%E6%AC%A3%E8%B5%8F/">
      
      
        <link rel="next" href="../Effective_Modern_C%2B%2B/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.2.3">
    
    
      
        <title>现代 C++ 特性 - 丘卡的笔记本</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0e669242.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#c" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="丘卡的笔记本" class="md-header__button md-logo" aria-label="丘卡的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            丘卡的笔记本
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              现代 C++ 特性
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ZerolAcqua/note/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ZerolAcqua/note
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../paper/RS/UAV/%E5%9F%BA%E4%BA%8E%E7%89%A9%E6%8E%A2%E9%A3%9E%E8%A1%8C%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%AD%A3%E5%B0%84%E5%BD%B1%E5%83%8F%E5%BF%AB%E9%80%9F%E5%88%B6%E4%BD%9C/" class="md-tabs__link">
          
  
    
  
  论文

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../course/Photogrammetry/%E8%BF%91%E6%99%AF%E6%91%84%E5%BD%B1%E6%B5%8B%E9%87%8F/" class="md-tabs__link">
          
  
    
  
  课程

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  编程

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../cs/computer_system/Putting_the_You_in_CPU/" class="md-tabs__link">
          
  
    
  
  计算机

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../misc/photogrammetry/%E4%BA%91%E5%8F%B0%E6%97%8B%E8%BD%AC%E8%A7%92%E6%8D%A2%E7%AE%97/" class="md-tabs__link">
          
  
    
  
  杂项

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="丘卡的笔记本" class="md-nav__button md-logo" aria-label="丘卡的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    丘卡的笔记本
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ZerolAcqua/note/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ZerolAcqua/note
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    论文
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            论文
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    RS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            RS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
        
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UAV
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            UAV
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/RS/UAV/%E5%9F%BA%E4%BA%8E%E7%89%A9%E6%8E%A2%E9%A3%9E%E8%A1%8C%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%AD%A3%E5%B0%84%E5%BD%B1%E5%83%8F%E5%BF%AB%E9%80%9F%E5%88%B6%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    基于物探飞行模式的正射影像快速制作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/RS/UAV/%E4%B8%AD%E5%9B%BD%E5%85%89%E5%AD%A6%E5%8D%AB%E6%98%9F%E5%BD%B1%E5%83%8F%E5%8C%B9%E9%85%8D%E8%9E%8D%E5%90%88%E6%96%B9%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A combined image matching method for Chinese optical satellite imagery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/RS/UAV/%E5%8D%97%E6%9E%81%E6%97%A0%E4%BA%BA%E6%9C%BA%E6%91%84%E5%BD%B1%E6%B5%8B%E9%87%8F%E8%AE%BA%E6%96%87%E6%A6%82%E8%A7%88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    南极无人机摄影测量论文概览
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CV
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            CV
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    图像匹配
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            图像匹配
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/image_matching/LBD%E7%BA%BF%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LBD 线特征描述算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/image_matching/Sample4Geo_Hard_Negative_Sampling_for_Cross-View_Geo-Localisation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sample4Geo: Hard Negative Sampling for Cross-View Geo-Localisation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/image_matching/Image_Matching_from_Handcrafted_to_Deep_Features_A_Survey/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    从人工特征到深度特征的图像匹配调查
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
          <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SfM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            SfM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Structure-from-Motion_Revisited/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SfM 回顾（Colmap）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Skeletal_graphs_for_efficient_structure_from_motion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    用于高效 SfM 的骨架图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Structure-and-motion_pipeline_on_a_hierarchical_cluster_tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    基于分层聚类树的 SfM 
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Improving_the_efficiency_of_hierarchical_structure-and-motion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    提高分层 SfM 效率
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Towards_Linear-Time_Incremental_Structure-from-Motion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    线性时间的增量式 SfM（VisualSFM）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Modeling_the_World_from_Internet_Photo_Collections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通过互联网影像重建世界（Bundler）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Photo_Tourism_Exploring_Photo_Collections_in_3D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    相片旅行：在三维世界中浏览相片
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Building_Rome_in_a_Day/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    一天建成罗马
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Efficient_structure_from_motion_for_large-scale_UAV_images_A_review_and_a_comparison_of_SfM_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    大规模无人机影像的高效 SfM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Multicore_Bundle_Adjustment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多核光束法平差
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Efficient_tree-structured_SfM_by_RANSAC_generalized_Procrustes_analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    基于 RANSAC 通用 Procrustes 分析的高效树状 SfM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/Divide_and_Conquer_Efficient_Large_Scale_Structure_from_Motion_Using_Graph_Partitioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用图分割的分治高效大规模 SfM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/CV/SfM/SfM_on-the-fly%3A_A_robust_near_real-time_SfM_for_spatiotemporally_disordered_high-resolution_imagery_from_multiple_agents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实时 SfM：一种面向多智能体时空无序高分辨率影像的鲁棒近实时 SfM 方法
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    课程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    专业相关
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            专业相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" >
        
          <label class="md-nav__link" for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    摄影测量
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            摄影测量
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/Photogrammetry/%E8%BF%91%E6%99%AF%E6%91%84%E5%BD%B1%E6%B5%8B%E9%87%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    近景摄影测量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/Photogrammetry/%E5%8D%AB%E6%98%9F%E6%91%84%E5%BD%B1%E6%B5%8B%E9%87%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    卫星摄影测量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/Photogrammetry/%E6%95%B0%E5%AD%97%E6%91%84%E5%BD%B1%E6%B5%8B%E9%87%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数字摄影测量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/Photogrammetry/%E8%A7%A3%E6%9E%90%E6%91%84%E5%BD%B1%E6%B5%8B%E9%87%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解析摄影测量
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
        
          <label class="md-nav__link" for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    RS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            RS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/RS/%E9%81%A5%E6%84%9F%E5%9B%BE%E5%83%8F%E8%A7%A3%E8%AF%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    遥感图像解译
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" >
        
          <label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    测绘
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_3">
            <span class="md-nav__icon md-icon"></span>
            测绘
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/geomatics/%E5%A4%A7%E5%9C%B0%E6%B5%8B%E9%87%8F%E5%AD%A6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    大地测量学
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_4" >
        
          <label class="md-nav__link" for="__nav_3_1_4" id="__nav_3_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CV
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            CV
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/CV/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数字图像处理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    专业之外
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            专业之外
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1" >
        
          <label class="md-nav__link" for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            CS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/CS/%E5%A4%9A%E5%AA%92%E4%BD%93%E6%8A%80%E6%9C%AF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多媒体技术
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/CS/%E5%8D%97%E5%A4%A7%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9FPA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    南大计算机系统 PA
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
        
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    others
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/others/%E9%80%BB%E8%BE%91%E5%AD%A6%E5%AF%BC%E8%AE%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    逻辑学导论
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../course/others/%E9%9F%B3%E4%B9%90%E6%AC%A3%E8%B5%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    音乐欣赏
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    编程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            编程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" checked>
        
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    现代 C++ 特性
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    现代 C++ 特性
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#c11" class="md-nav__link">
    C++11
  </a>
  
    <nav class="md-nav" aria-label="C++11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c11_1" class="md-nav__link">
    C++11 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++11 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#move-semantics" class="md-nav__link">
    移动语义（Move semantics）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rvalue-references" class="md-nav__link">
    右值引用（Rvalue references）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forwarding-references" class="md-nav__link">
    转发引用（Forwarding references）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variadic-templates" class="md-nav__link">
    可变参数模板（Variadic templates）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initializer-lists" class="md-nav__link">
    初始化列表（Initializer lists）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-assertions" class="md-nav__link">
    静态断言（Static assertions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto" class="md-nav__link">
    auto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-lambda-expressions" class="md-nav__link">
    Lambda 表达式（Lambda expressions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decltype" class="md-nav__link">
    decltype
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    类型别名（Type aliases）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nullptr" class="md-nav__link">
    nullptr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strongly-typed-enums" class="md-nav__link">
    强类型枚举（Strongly-typed enums）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    属性（Attributes）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr" class="md-nav__link">
    constexpr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegating-constructors" class="md-nav__link">
    委托构造函数（Delegating constructors）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-defined-literals" class="md-nav__link">
    用户定义的字面量（User-defined literals）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicit-virtual-overrides" class="md-nav__link">
    显式虚函数覆盖（Explicit virtual overrides）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-final-specifier" class="md-nav__link">
    final 说明符（Final specifier）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-functions" class="md-nav__link">
    默认函数（Default functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleted-functions" class="md-nav__link">
    已删除函数（Deleted functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-range-based-for-loops" class="md-nav__link">
    基于范围的 for 循环（Range-based for loops）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-member-functions-for-move-semantics" class="md-nav__link">
    移动语义的特殊成员函数（Special member functions for move semantics）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-constructors" class="md-nav__link">
    转换构造函数（Converting constructors）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicit-conversion-functions" class="md-nav__link">
    显式转换函数（Explicit conversion functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline-namespaces" class="md-nav__link">
    内联命名空间（Inline namespaces）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-static-data-member-initializers" class="md-nav__link">
    非静态数据成员初始化器（Non-static data member initializers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#right-angle-brackets" class="md-nav__link">
    右尖括号（Right angle brackets）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ref-qualified-member-functions" class="md-nav__link">
    引用限定成员函数（Ref-qualified member functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trailing-return-types" class="md-nav__link">
    尾置返回类型（Trailing return types）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noexcept-noexcept-specifier" class="md-nav__link">
    noexcept 说明符（noexcept specifier）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#char32_t-char16_t" class="md-nav__link">
    char32_t 和 char16_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#raw-string-literals" class="md-nav__link">
    原始字符串字面量（Raw string literals）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c11_2" class="md-nav__link">
    C++11 标准库特性
  </a>
  
    <nav class="md-nav" aria-label="C++11 标准库特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdmove" class="md-nav__link">
    std::move
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdforward" class="md-nav__link">
    std::forward
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdthread" class="md-nav__link">
    std::thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdto_string" class="md-nav__link">
    std::to_string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-traits" class="md-nav__link">
    类型特性（Type traits）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smart-pointers" class="md-nav__link">
    智能指针（Smart pointers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdchrono" class="md-nav__link">
    std::chrono
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuples" class="md-nav__link">
    元组（Tuples）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdtie" class="md-nav__link">
    std::tie
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdarray" class="md-nav__link">
    std::array
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unordered-containers" class="md-nav__link">
    无序容器（Unordered containers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmake_shared" class="md-nav__link">
    std::make_shared
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdref" class="md-nav__link">
    std::ref
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-model" class="md-nav__link">
    内存模型（Memory model）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdasync" class="md-nav__link">
    std::async
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdbeginend" class="md-nav__link">
    std::begin/end
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c14" class="md-nav__link">
    C++14
  </a>
  
    <nav class="md-nav" aria-label="C++14">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c14_1" class="md-nav__link">
    C++14 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++14 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-literals" class="md-nav__link">
    二进制字面量（Binary literals）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-generic-lambda-expressions" class="md-nav__link">
    泛型 lambda 表达式（Generic lambda expressions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-lambda-capture-initializers" class="md-nav__link">
    Lambda 捕获初始化器（Lambda capture initializers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-type-deduction" class="md-nav__link">
    返回类型推导（Return type deduction）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decltypeauto" class="md-nav__link">
    decltype(auto)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-relaxing-constraints-on-constexpr-functions" class="md-nav__link">
    放宽对 constexpr 函数的限制（Relaxing constraints on constexpr functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-templates" class="md-nav__link">
    变量模板（Variable templates）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deprecated-attribute" class="md-nav__link">
    [[deprecated]] attribute
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c14_2" class="md-nav__link">
    C++14 库特性
  </a>
  
    <nav class="md-nav" aria-label="C++14 库特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-defined-literals-for-standard-library-types" class="md-nav__link">
    标准库类型的用户定义字面量（User-defined literals for standard library types）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compile-time-integer-sequences" class="md-nav__link">
    编译时整数序列（Compile-time integer sequences）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmake_unique" class="md-nav__link">
    std::make_unique
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c17" class="md-nav__link">
    C++17
  </a>
  
    <nav class="md-nav" aria-label="C++17">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c17_1" class="md-nav__link">
    C++17 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++17 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-argument-deduction-for-class-templates" class="md-nav__link">
    类模板的模板参数推导（Template argument deduction for class templates）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-declaring-non-type-template-parameters-with-auto" class="md-nav__link">
    使用 auto 声明非类型模板参数（Declaring non-type template parameters with auto）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folding-expressions" class="md-nav__link">
    折叠表达式（Folding expressions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-new-rules-for-auto-deduction-from-braced-init-list" class="md-nav__link">
    使用大括号初始化列表时 auto 的新规则（New rules for auto deduction from braced-init-list）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-lambda-constexpr-lambda" class="md-nav__link">
    constexpr lambda 表达式（constexpr lambda）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-this-lambda-capture-this-by-value" class="md-nav__link">
    Lambda 捕获 this 的值（Lambda capture this by value）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline-variables" class="md-nav__link">
    内联变量（Inline variables）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-namespaces" class="md-nav__link">
    嵌套命名空间（Nested namespaces）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selection-statements-with-initializer" class="md-nav__link">
    带初始化器的选择语句（Selection statements with initializer）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-if" class="md-nav__link">
    constexpr if
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utf-8-utf-8-character-literals" class="md-nav__link">
    UTF-8 字符字面量（UTF-8 character literals）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-list-initialization-of-enums" class="md-nav__link">
    枚举的直接列表初始化（Direct list initialization of enums）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fallthrough-nodiscard-maybe_unused-attributes" class="md-nav__link">
    [[fallthrough]], [[nodiscard]], [[maybe_unused]] attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__has_include" class="md-nav__link">
    __has_include
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-template-argument-deduction" class="md-nav__link">
    类模板参数推导（Class template argument deduction）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c17_2" class="md-nav__link">
    C++17 库功能
  </a>
  
    <nav class="md-nav" aria-label="C++17 库功能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdvariant" class="md-nav__link">
    std::variant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdoptional" class="md-nav__link">
    std::optional
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdany" class="md-nav__link">
    std::any
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdstring_view" class="md-nav__link">
    std::string_view
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdinvoke" class="md-nav__link">
    std::invoke
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdapply" class="md-nav__link">
    std::apply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdfilesystem" class="md-nav__link">
    std::filesystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdbyte" class="md-nav__link">
    std::byte
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splicing-for-maps-and-sets" class="md-nav__link">
    映射和集合的拼接（Splicing for maps and sets）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-algorithms" class="md-nav__link">
    并行算法（Parallel algorithms）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdsample" class="md-nav__link">
    std::sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdclamp" class="md-nav__link">
    std::clamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdreduce" class="md-nav__link">
    std::reduce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefix-sum-algorithms" class="md-nav__link">
    前缀和算法（Prefix sum algorithms）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcd-and-lcm" class="md-nav__link">
    最大公约数和最小公倍数（GCD and LCM）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdnot_fnstdnot_fn" class="md-nav__link">
    std::not_fn（std::not_fn）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-conversion-tofrom-numbers" class="md-nav__link">
    字符串与数字的相互转换（String conversion to/from numbers）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c20" class="md-nav__link">
    C++20
  </a>
  
    <nav class="md-nav" aria-label="C++20">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c20_1" class="md-nav__link">
    C++20 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++20 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#coroutines" class="md-nav__link">
    协程（Coroutines）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    概念（Concepts）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#designated-initializers" class="md-nav__link">
    指定初始化器（Designated initializers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-template-syntax-for-lambdas" class="md-nav__link">
    模板语法用于 Lambda 表达式（Template syntax for lambdas）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-range-based-for-loop-with-initializer" class="md-nav__link">
    带初始化器的基于范围的 for 循环（Range-based for loop with initializer）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#likely-and-unlikely-attributes" class="md-nav__link">
    [[likely]] and [[unlikely]] attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thisdeprecate-implicit-capture-of-this" class="md-nav__link">
    弃用隐式捕获 this（Deprecate implicit capture of this）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-types-in-non-type-template-parameters" class="md-nav__link">
    非类型模板参数中的类类型（Class types in non-type template parameters）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-constexpr-virtual-functions" class="md-nav__link">
    constexpr 虚函数（constexpr virtual functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicitbool" class="md-nav__link">
    explicit(bool)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immediate-functions" class="md-nav__link">
    立即函数（Immediate functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-enum" class="md-nav__link">
    using enum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-lambda-capture-of-parameter-pack" class="md-nav__link">
    Lambda 捕获参数包（Lambda capture of parameter pack）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#char8_t" class="md-nav__link">
    char8_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constinit" class="md-nav__link">
    constinit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c20_2" class="md-nav__link">
    C++20 库特性
  </a>
  
    <nav class="md-nav" aria-label="C++20 库特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#concepts-library" class="md-nav__link">
    Concepts library
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronized-buffered-outputstream" class="md-nav__link">
    同步缓冲输出流（Synchronized buffered outputstream）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdspan" class="md-nav__link">
    std::span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-operations" class="md-nav__link">
    位操作（Bit operations）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#math-constants" class="md-nav__link">
    数学常数（Math constants）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdis_constant_evaluated" class="md-nav__link">
    std::is_constant_evaluated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmake_shared-stdmake_shared-supports-arrays" class="md-nav__link">
    std::make_shared 支持数组（std::make_shared supports arrays）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starts_with-ends_with-starts_with-and-ends_with-on-strings" class="md-nav__link">
    starts_with 和 ends_with 用于字符串（starts_with and ends_with on strings）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-if-associative-container-has-element" class="md-nav__link">
    检查关联容器是否包含元素（Check if associative container has element）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdbit_cast" class="md-nav__link">
    std::bit_cast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmidpoint" class="md-nav__link">
    std::midpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdto_array" class="md-nav__link">
    std::to_array
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    致谢
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    作者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    内容贡献者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    许可证
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Effective_Modern_C%2B%2B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Effective Modern C++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../head-first-design-pattern/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 实现 Headfirst 设计模式
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Rust
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Rust
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    准备工作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/Rust%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rust 程序设计语言
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Julia
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Julia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../julia/%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    准备工作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../julia/Julia_Data_Science/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Julia Data Science
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Git
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Git
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../git/progit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Progit
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python/bibliometrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文献计量学作业
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    计算机
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            计算机
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    计算机系统
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            计算机系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../cs/computer_system/Putting_the_You_in_CPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Putting the “You” in CPU
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    杂项
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            杂项
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    摄影测量
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            摄影测量
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../misc/photogrammetry/%E4%BA%91%E5%8F%B0%E6%97%8B%E8%BD%AC%E8%A7%92%E6%8D%A2%E7%AE%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    云台旋转角换算
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#c11" class="md-nav__link">
    C++11
  </a>
  
    <nav class="md-nav" aria-label="C++11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c11_1" class="md-nav__link">
    C++11 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++11 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#move-semantics" class="md-nav__link">
    移动语义（Move semantics）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rvalue-references" class="md-nav__link">
    右值引用（Rvalue references）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forwarding-references" class="md-nav__link">
    转发引用（Forwarding references）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variadic-templates" class="md-nav__link">
    可变参数模板（Variadic templates）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initializer-lists" class="md-nav__link">
    初始化列表（Initializer lists）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-assertions" class="md-nav__link">
    静态断言（Static assertions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto" class="md-nav__link">
    auto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-lambda-expressions" class="md-nav__link">
    Lambda 表达式（Lambda expressions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decltype" class="md-nav__link">
    decltype
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    类型别名（Type aliases）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nullptr" class="md-nav__link">
    nullptr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strongly-typed-enums" class="md-nav__link">
    强类型枚举（Strongly-typed enums）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    属性（Attributes）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr" class="md-nav__link">
    constexpr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegating-constructors" class="md-nav__link">
    委托构造函数（Delegating constructors）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-defined-literals" class="md-nav__link">
    用户定义的字面量（User-defined literals）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicit-virtual-overrides" class="md-nav__link">
    显式虚函数覆盖（Explicit virtual overrides）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-final-specifier" class="md-nav__link">
    final 说明符（Final specifier）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-functions" class="md-nav__link">
    默认函数（Default functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleted-functions" class="md-nav__link">
    已删除函数（Deleted functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-range-based-for-loops" class="md-nav__link">
    基于范围的 for 循环（Range-based for loops）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-member-functions-for-move-semantics" class="md-nav__link">
    移动语义的特殊成员函数（Special member functions for move semantics）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-constructors" class="md-nav__link">
    转换构造函数（Converting constructors）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicit-conversion-functions" class="md-nav__link">
    显式转换函数（Explicit conversion functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline-namespaces" class="md-nav__link">
    内联命名空间（Inline namespaces）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-static-data-member-initializers" class="md-nav__link">
    非静态数据成员初始化器（Non-static data member initializers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#right-angle-brackets" class="md-nav__link">
    右尖括号（Right angle brackets）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ref-qualified-member-functions" class="md-nav__link">
    引用限定成员函数（Ref-qualified member functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trailing-return-types" class="md-nav__link">
    尾置返回类型（Trailing return types）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noexcept-noexcept-specifier" class="md-nav__link">
    noexcept 说明符（noexcept specifier）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#char32_t-char16_t" class="md-nav__link">
    char32_t 和 char16_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#raw-string-literals" class="md-nav__link">
    原始字符串字面量（Raw string literals）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c11_2" class="md-nav__link">
    C++11 标准库特性
  </a>
  
    <nav class="md-nav" aria-label="C++11 标准库特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdmove" class="md-nav__link">
    std::move
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdforward" class="md-nav__link">
    std::forward
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdthread" class="md-nav__link">
    std::thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdto_string" class="md-nav__link">
    std::to_string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-traits" class="md-nav__link">
    类型特性（Type traits）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smart-pointers" class="md-nav__link">
    智能指针（Smart pointers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdchrono" class="md-nav__link">
    std::chrono
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuples" class="md-nav__link">
    元组（Tuples）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdtie" class="md-nav__link">
    std::tie
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdarray" class="md-nav__link">
    std::array
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unordered-containers" class="md-nav__link">
    无序容器（Unordered containers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmake_shared" class="md-nav__link">
    std::make_shared
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdref" class="md-nav__link">
    std::ref
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-model" class="md-nav__link">
    内存模型（Memory model）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdasync" class="md-nav__link">
    std::async
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdbeginend" class="md-nav__link">
    std::begin/end
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c14" class="md-nav__link">
    C++14
  </a>
  
    <nav class="md-nav" aria-label="C++14">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c14_1" class="md-nav__link">
    C++14 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++14 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-literals" class="md-nav__link">
    二进制字面量（Binary literals）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-generic-lambda-expressions" class="md-nav__link">
    泛型 lambda 表达式（Generic lambda expressions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-lambda-capture-initializers" class="md-nav__link">
    Lambda 捕获初始化器（Lambda capture initializers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-type-deduction" class="md-nav__link">
    返回类型推导（Return type deduction）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decltypeauto" class="md-nav__link">
    decltype(auto)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-relaxing-constraints-on-constexpr-functions" class="md-nav__link">
    放宽对 constexpr 函数的限制（Relaxing constraints on constexpr functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-templates" class="md-nav__link">
    变量模板（Variable templates）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deprecated-attribute" class="md-nav__link">
    [[deprecated]] attribute
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c14_2" class="md-nav__link">
    C++14 库特性
  </a>
  
    <nav class="md-nav" aria-label="C++14 库特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-defined-literals-for-standard-library-types" class="md-nav__link">
    标准库类型的用户定义字面量（User-defined literals for standard library types）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compile-time-integer-sequences" class="md-nav__link">
    编译时整数序列（Compile-time integer sequences）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmake_unique" class="md-nav__link">
    std::make_unique
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c17" class="md-nav__link">
    C++17
  </a>
  
    <nav class="md-nav" aria-label="C++17">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c17_1" class="md-nav__link">
    C++17 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++17 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-argument-deduction-for-class-templates" class="md-nav__link">
    类模板的模板参数推导（Template argument deduction for class templates）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-declaring-non-type-template-parameters-with-auto" class="md-nav__link">
    使用 auto 声明非类型模板参数（Declaring non-type template parameters with auto）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folding-expressions" class="md-nav__link">
    折叠表达式（Folding expressions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-new-rules-for-auto-deduction-from-braced-init-list" class="md-nav__link">
    使用大括号初始化列表时 auto 的新规则（New rules for auto deduction from braced-init-list）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-lambda-constexpr-lambda" class="md-nav__link">
    constexpr lambda 表达式（constexpr lambda）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-this-lambda-capture-this-by-value" class="md-nav__link">
    Lambda 捕获 this 的值（Lambda capture this by value）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline-variables" class="md-nav__link">
    内联变量（Inline variables）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-namespaces" class="md-nav__link">
    嵌套命名空间（Nested namespaces）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selection-statements-with-initializer" class="md-nav__link">
    带初始化器的选择语句（Selection statements with initializer）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-if" class="md-nav__link">
    constexpr if
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utf-8-utf-8-character-literals" class="md-nav__link">
    UTF-8 字符字面量（UTF-8 character literals）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-list-initialization-of-enums" class="md-nav__link">
    枚举的直接列表初始化（Direct list initialization of enums）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fallthrough-nodiscard-maybe_unused-attributes" class="md-nav__link">
    [[fallthrough]], [[nodiscard]], [[maybe_unused]] attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__has_include" class="md-nav__link">
    __has_include
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-template-argument-deduction" class="md-nav__link">
    类模板参数推导（Class template argument deduction）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c17_2" class="md-nav__link">
    C++17 库功能
  </a>
  
    <nav class="md-nav" aria-label="C++17 库功能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdvariant" class="md-nav__link">
    std::variant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdoptional" class="md-nav__link">
    std::optional
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdany" class="md-nav__link">
    std::any
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdstring_view" class="md-nav__link">
    std::string_view
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdinvoke" class="md-nav__link">
    std::invoke
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdapply" class="md-nav__link">
    std::apply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdfilesystem" class="md-nav__link">
    std::filesystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdbyte" class="md-nav__link">
    std::byte
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splicing-for-maps-and-sets" class="md-nav__link">
    映射和集合的拼接（Splicing for maps and sets）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-algorithms" class="md-nav__link">
    并行算法（Parallel algorithms）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdsample" class="md-nav__link">
    std::sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdclamp" class="md-nav__link">
    std::clamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdreduce" class="md-nav__link">
    std::reduce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefix-sum-algorithms" class="md-nav__link">
    前缀和算法（Prefix sum algorithms）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcd-and-lcm" class="md-nav__link">
    最大公约数和最小公倍数（GCD and LCM）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdnot_fnstdnot_fn" class="md-nav__link">
    std::not_fn（std::not_fn）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-conversion-tofrom-numbers" class="md-nav__link">
    字符串与数字的相互转换（String conversion to/from numbers）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c20" class="md-nav__link">
    C++20
  </a>
  
    <nav class="md-nav" aria-label="C++20">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c20_1" class="md-nav__link">
    C++20 语言特性
  </a>
  
    <nav class="md-nav" aria-label="C++20 语言特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#coroutines" class="md-nav__link">
    协程（Coroutines）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    概念（Concepts）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#designated-initializers" class="md-nav__link">
    指定初始化器（Designated initializers）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-template-syntax-for-lambdas" class="md-nav__link">
    模板语法用于 Lambda 表达式（Template syntax for lambdas）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-range-based-for-loop-with-initializer" class="md-nav__link">
    带初始化器的基于范围的 for 循环（Range-based for loop with initializer）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#likely-and-unlikely-attributes" class="md-nav__link">
    [[likely]] and [[unlikely]] attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thisdeprecate-implicit-capture-of-this" class="md-nav__link">
    弃用隐式捕获 this（Deprecate implicit capture of this）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-types-in-non-type-template-parameters" class="md-nav__link">
    非类型模板参数中的类类型（Class types in non-type template parameters）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constexpr-constexpr-virtual-functions" class="md-nav__link">
    constexpr 虚函数（constexpr virtual functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicitbool" class="md-nav__link">
    explicit(bool)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immediate-functions" class="md-nav__link">
    立即函数（Immediate functions）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-enum" class="md-nav__link">
    using enum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-lambda-capture-of-parameter-pack" class="md-nav__link">
    Lambda 捕获参数包（Lambda capture of parameter pack）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#char8_t" class="md-nav__link">
    char8_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constinit" class="md-nav__link">
    constinit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c20_2" class="md-nav__link">
    C++20 库特性
  </a>
  
    <nav class="md-nav" aria-label="C++20 库特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#concepts-library" class="md-nav__link">
    Concepts library
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronized-buffered-outputstream" class="md-nav__link">
    同步缓冲输出流（Synchronized buffered outputstream）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdspan" class="md-nav__link">
    std::span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-operations" class="md-nav__link">
    位操作（Bit operations）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#math-constants" class="md-nav__link">
    数学常数（Math constants）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdis_constant_evaluated" class="md-nav__link">
    std::is_constant_evaluated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmake_shared-stdmake_shared-supports-arrays" class="md-nav__link">
    std::make_shared 支持数组（std::make_shared supports arrays）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starts_with-ends_with-starts_with-and-ends_with-on-strings" class="md-nav__link">
    starts_with 和 ends_with 用于字符串（starts_with and ends_with on strings）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-if-associative-container-has-element" class="md-nav__link">
    检查关联容器是否包含元素（Check if associative container has element）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdbit_cast" class="md-nav__link">
    std::bit_cast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmidpoint" class="md-nav__link">
    std::midpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdto_array" class="md-nav__link">
    std::to_array
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    致谢
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    作者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    内容贡献者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    许可证
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<hr/>
<h1 id="c">现代 C++ 特性<a class="headerlink" href="#c" title="Permanent link">¶</a></h1>
<div class="admonition info">
<p class="admonition-title">原文链接</p>
<p><a href="https://github.com/AnthonyCalandra/modern-cpp-features">A cheatsheet of modern C++ language and library features.</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>本文由 chatgpt 辅助翻译后，人工核对整理，已尽可能保证内容的准确性，如发现内容性错误也烦请您联系指正。</p>
</div>
<h2 id="c11">C++11<a class="headerlink" href="#c11" title="Permanent link">¶</a></h2>
<h3 id="c11_1">C++11 语言特性<a class="headerlink" href="#c11_1" title="Permanent link">¶</a></h3>
<h4 id="move-semantics">移动语义（Move semantics）<a class="headerlink" href="#move-semantics" title="Permanent link">¶</a></h4>
<p>移动一个对象意味着将其管理的某些资源的所有权转移给另一个对象。</p>
<p>移动语义的第一个好处是性能优化。当一个对象即将结束其生命周期时，无论是因为它是一个临时对象还是通过显式调用 <code>std::move</code>，移动通常是更廉价的资源转移方式。例如，移动一个 <code>std::vector</code> 只需将一些指针和内部状态复制到新向量中，而复制则需要复制向量中的每个元素，这既昂贵又不必要，尤其是在旧向量即将被销毁的情况下。</p>
<p>移动还使得像 <code>std::unique_ptr</code>（<a href="#smart-pointers">智能指针</a>）这样不可复制的类型可以在语言层面上保证资源在任何时候只有一个实例在被管理，同时还能在不同作用域之间转移实例。</p>
<p>参见以下章节：<a href="#rvalue-references">右值引用</a>、<a href="#special-member-functions-for-move-semantics">用于移动语义的特殊成员函数</a>、<a href="#stdmove"><code>std::move</code></a>、<a href="#stdforward"><code>std::forward</code></a>、<a href="#forwarding-references">转发引用</a>。</p>
<h4 id="rvalue-references">右值引用（Rvalue references）<a class="headerlink" href="#rvalue-references" title="Permanent link">¶</a></h4>
<p>C++11 引入了一种新的引用类型，称为<em>右值引用</em>。对 <code>T</code> 的右值引用（<code>T</code> 是一个非模板类型参数，如 <code>int</code> 或用户定义类型）使用 <code>T&amp;&amp;</code> 语法创建。右值引用只绑定到右值。</p>
<p>左值和右值的类型推导：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// `x` 是类型为 `int` 的左值</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">xl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// `xl` 是类型为 `int&amp;` 的左值</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">xr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// 编译错误 -- `x` 是一个左值</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">xr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// `xr2` 是类型为 `int&amp;&amp;` 的左值 -- 绑定到右值临时对象 `0`</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w">  </span><span class="c1">// 调用 f(int&amp;)</span>
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="n">f</span><span class="p">(</span><span class="n">xl</span><span class="p">);</span><span class="w"> </span><span class="c1">// 调用 f(int&amp;)</span>
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w">  </span><span class="c1">// 调用 f(int&amp;&amp;)</span>
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="n">f</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">x</span><span class="p">));</span><span class="w"> </span><span class="c1">// 调用 f(int&amp;&amp;)</span>
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="n">f</span><span class="p">(</span><span class="n">xr2</span><span class="p">);</span><span class="w">           </span><span class="c1">// 调用 f(int&amp;)</span>
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="n">f</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">xr2</span><span class="p">));</span><span class="w"> </span><span class="c1">// 调用 f(int&amp;&amp; x)</span>
</code></pre></div>
<p>另见：<a href="#stdmove"><code>std::move</code></a>、<a href="#stdforward"><code>std::forward</code></a>、<a href="#forwarding-references">转发引用</a>。</p>
<h4 id="forwarding-references">转发引用（Forwarding references）<a class="headerlink" href="#forwarding-references" title="Permanent link">¶</a></h4>
<p>非正式名称也叫<em>通用引用</em>。转发引用使用 <code>T&amp;&amp;</code> 语法创建，其中 <code>T</code> 是一个模板类型参数，或者使用 <code>auto&amp;&amp;</code>。这实现了<em>完美转发</em>：能够在保持其值类别（例如左值保持为左值，临时对象作为右值转发）的同时传递参数。</p>
<p>转发引用允许引用根据类型绑定到左值或右值。转发引用遵循<em>引用折叠</em>规则：</p>
<ul>
<li><code>T&amp; &amp;</code> 变为 <code>T&amp;</code></li>
<li><code>T&amp; &amp;&amp;</code> 变为 <code>T&amp;</code></li>
<li><code>T&amp;&amp; &amp;</code> 变为 <code>T&amp;</code></li>
<li><code>T&amp;&amp; &amp;&amp;</code> 变为 <code>T&amp;&amp;</code></li>
</ul>
<p>使用左值和右值的 <code>auto</code> 类型推导：
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// `x` 是类型为 `int` 的左值</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">auto</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">al</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// `al` 是类型为 `int&amp;` 的左值 -- 绑定到左值 `x`</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="k">auto</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">ar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// `ar` 是类型为 `int&amp;&amp;` 的左值 -- 绑定到右值临时对象 `0`</span>
</code></pre></div></p>
<p>模板类型参数与左值和右值的推导：
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1">// C++14 及更高版本：</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="p">}</span>
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="c1">// C++11 及更高版本：</span>
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="p">}</span>
<a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a>
<a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// T 是 int，推导为 f(int &amp;&amp;) =&gt; f(int&amp;&amp;)</span>
<a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="c1">// T 是 int&amp;，推导为 f(int&amp; &amp;&amp;) =&gt; f(int&amp;)</span>
<a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>
<a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a href="#__codelineno-2-17" id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="n">f</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"> </span><span class="c1">// T 是 int&amp;，推导为 f(int&amp; &amp;&amp;) =&gt; f(int&amp;)</span>
<a href="#__codelineno-2-18" id="__codelineno-2-18" name="__codelineno-2-18"></a>
<a href="#__codelineno-2-19" id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 注意：`z` 是一个类型为 `int&amp;&amp;` 的左值。</span>
<a href="#__codelineno-2-20" id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="n">f</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="c1">// T 是 int&amp;，推导为 f(int&amp; &amp;&amp;) =&gt; f(int&amp;)</span>
<a href="#__codelineno-2-21" id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="n">f</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">z</span><span class="p">));</span><span class="w"> </span><span class="c1">// T 是 int，推导为 f(int &amp;&amp;) =&gt; f(int&amp;&amp;)</span>
</code></pre></div></p>
<p>另见：<a href="#stdmove"><code>std::move</code></a>、<a href="#stdforward"><code>std::forward</code></a>、<a href="#rvalue-references">右值引用</a>。</p>
<h4 id="variadic-templates">可变参数模板（Variadic templates）<a class="headerlink" href="#variadic-templates" title="Permanent link">¶</a></h4>
<p><code>...</code> 语法创建一个<em>参数包</em>或展开一个参数包。模板<em>参数包</em>是接受零个或多个模板参数（非类型、类型或模板）的模板参数。至少有一个参数包的模板称为<em>可变参数模板</em>。
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">arity</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">  </span><span class="k">constexpr</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">...(</span><span class="n">T</span><span class="p">);</span>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="p">};</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">arity</span><span class="o">&lt;&gt;::</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">arity</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">short</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
</code></pre></div></p>
<p>一个有趣的用法是从<em>参数包</em>创建一个<em>初始化列表</em>，以便遍历可变参数函数的参数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">First</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">First</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">first</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">...};</span>
<a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">values</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">values</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">First</span><span class="p">{</span><span class="mi">0</span><span class="p">});</span>
<a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="p">}</span>
<a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>
<a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// 15</span>
<a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w">       </span><span class="c1">// 6</span>
<a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="n">sum</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.7</span><span class="p">);</span><span class="w"> </span><span class="c1">// 7.2</span>
</code></pre></div>
<h4 id="initializer-lists">初始化列表（Initializer lists）<a class="headerlink" href="#initializer-lists" title="Permanent link">¶</a></h4>
<p>使用大括号语法创建的轻量级类数组容器。例如，<code>{ 1, 2, 3 }</code> 创建一个整数序列，其类型为 <code>std::initializer_list&lt;int&gt;</code>。用于替代将对象向量传递给函数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">list</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">list</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="n">total</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">total</span><span class="p">;</span>
<a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="p">}</span>
<a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>
<a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="k">auto</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">};</span>
<a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="n">sum</span><span class="p">(</span><span class="n">list</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 6</span>
<a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="n">sum</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">});</span><span class="w"> </span><span class="c1">// == 6</span>
<a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="n">sum</span><span class="p">({});</span><span class="w"> </span><span class="c1">// == 0</span>
</code></pre></div>
<h4 id="static-assertions">静态断言（Static assertions）<a class="headerlink" href="#static-assertions" title="Permanent link">¶</a></h4>
<p>在编译时评估的断言。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="s">"x != y"</span><span class="p">);</span>
</code></pre></div>
<h4 id="auto">auto<a class="headerlink" href="#auto" title="Permanent link">¶</a></h4>
<p><code>auto</code> 类型的变量根据其初始化器的类型由编译器推导。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">;</span><span class="w"> </span><span class="c1">// double</span>
<a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// int</span>
<a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// int&amp;</span>
<a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="k">auto</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// std::initializer_list&lt;int&gt;</span>
<a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="k">auto</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// int&amp;&amp;</span>
<a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="k">auto</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// int&amp;</span>
<a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="k">auto</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">auto</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span><span class="w"> </span><span class="c1">// int*</span>
<a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// const int</span>
<a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="c1">// int, int, int</span>
<a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="k">auto</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.61</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- `l` 被推导为 int，`m` 是 bool</span>
<a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="k">auto</span><span class="w"> </span><span class="n">o</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- `o` 需要初始化器</span>
</code></pre></div>
<p>对复杂类型的可读性特别有用：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">cit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">cbegin</span><span class="p">();</span>
<a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="c1">// vs.</span>
<a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="k">auto</span><span class="w"> </span><span class="n">cit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">cbegin</span><span class="p">();</span>
</code></pre></div>
<p>函数也可以使用 <code>auto</code> 推导返回类型。在 C++11 中，返回类型必须显式指定，或者使用 <code>decltype</code>，如下所示：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">X</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Y</span><span class="o">&gt;</span>
<a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">X</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="p">}</span>
<a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 3</span>
<a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 3.0</span>
<a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="n">add</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.5</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 3.0</span>
</code></pre></div>
<p>上例中的尾置返回类型是表达式 <code>x + y</code> 的<em>声明类型</em>（参见 <a href="#decltype"><code>decltype</code></a> 部分）。例如，如果 <code>x</code> 是整数而 <code>y</code> 是双精度类型，则 <code>decltype(x + y)</code> 是双精度类型。因此，上述函数将根据表达式 <code>x + y</code> 所产生的类型来推导返回类型。注意，尾置返回类型可以访问其参数和 <code>this</code>（如果适用）。</p>
<h4 id="lambda-lambda-expressions">Lambda 表达式（Lambda expressions）<a class="headerlink" href="#lambda-lambda-expressions" title="Permanent link">¶</a></h4>
<p><code>lambda</code> 是一个未命名的函数对象，能够捕获当前作用域中的变量。它具有：一个<em>捕获列表</em>；一个可选的参数集（带有可选的尾置返回类型）；以及一个函数体。捕获列表的示例：</p>
<ul>
<li><code>[]</code>：不捕获任何变量。</li>
<li><code>[=]</code>：通过值捕获当前作用域中的局部对象（局部变量，参数）。</li>
<li><code>[&amp;]</code>：通过引用捕获当前作用域中的局部对象（局部变量，参数）。</li>
<li><code>[this]</code>：通过引用捕获 <code>this</code>。</li>
<li><code>[a, &amp;b]</code>：通过值捕获对象 <code>a</code>，通过引用捕获对象 <code>b</code>。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">getX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="n">getX</span><span class="p">();</span><span class="w"> </span><span class="c1">// == 1</span>
<a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>
<a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="k">auto</span><span class="w"> </span><span class="n">addX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">](</span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="n">addX</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 2</span>
<a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a>
<a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="k">auto</span><span class="w"> </span><span class="n">getXRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="p">]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="n">getXRef</span><span class="p">();</span><span class="w"> </span><span class="c1">// 返回 `x` 的引用</span>
</code></pre></div>
<p>默认情况下，值捕获在 lambda 内无法被修改，因为编译器生成的方法被标记为 <code>const</code>。<code>mutable</code> 关键字允许在 lambda 内修改被捕获的变量。该关键字位于参数列表之后（即使参数列表为空，也必须存在）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>
<a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确: x 是一个引用，修改了原始变量</span>
<a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>
<a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="k">auto</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 错误：lambda 只能对捕获的值执行 const 操作</span>
<a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="c1">// vs.</span>
<a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="k">auto</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]()</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确: lambda 可以对捕获的值执行任何操作</span>
</code></pre></div>
<h4 id="decltype">decltype<a class="headerlink" href="#decltype" title="Permanent link">¶</a></h4>
<p><code>decltype</code> 是一个操作符，它返回传递给它的表达式的<em>声明类型</em>。如果 <code>cv</code> 限定符和引用是表达式的一部分，那么它们会被保留。以下是 <code>decltype</code> 的一些示例：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// `a` 被声明为类型 `int`</span>
<a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="k">decltype</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// `decltype(a)` 是 `int`</span>
<a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// `c` 被声明为类型 `const int&amp;`</span>
<a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="k">decltype</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// `decltype(c)` 是 `const int&amp;`</span>
<a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="k">decltype</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span><span class="w"> </span><span class="c1">// `decltype(123)` 是 `int`</span>
<a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// `f` 被声明为类型 `int&amp;&amp;`</span>
<a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="k">decltype</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// `decltype(f)` 是 `int&amp;&amp;`</span>
<a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="k">decltype</span><span class="p">((</span><span class="n">a</span><span class="p">))</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="p">;</span><span class="w"> </span><span class="c1">// `decltype((a))` 是 `int&amp;`</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">X</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Y</span><span class="o">&gt;</span>
<a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">X</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="p">}</span>
<a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// `decltype(x + y)` =&gt; `decltype(3.0)` =&gt; `double`</span>
</code></pre></div>
<p>参见：<a href="#decltypeauto">decltype(auto) (C++14)</a>。</p>
<h4 id="type-aliases">类型别名（Type aliases）<a class="headerlink" href="#type-aliases" title="Permanent link">¶</a></h4>
<p>类型别名语义上类似于使用 <code>typedef</code>，但是使用 <code>using</code> 的类型别名更易于阅读并且与模板兼容。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="k">using</span><span class="w"> </span><span class="n">Vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
<a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="n">Vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"> </span><span class="c1">// std::vector&lt;int&gt;</span>
<a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>
<a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="k">using</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">;</span>
<a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="n">String</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">{</span><span class="s">"foo"</span><span class="p">};</span>
</code></pre></div>
<h4 id="nullptr">nullptr<a class="headerlink" href="#nullptr" title="Permanent link">¶</a></h4>
<p>C++11 引入了一种新的空指针类型，旨在替代 C 的 <code>NULL</code> 宏。<code>nullptr</code> 本身的类型是 <code>std::nullptr_t</code>，它可以隐式转换为指针类型，而不像 <code>NULL</code> 那样可以转换为整型（除了 <code>bool</code> 以外）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">);</span>
<a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="n">foo</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span><span class="w"> </span><span class="c1">// 错误 -- 不明确</span>
<a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="n">foo</span><span class="p">(</span><span class="k">nullptr</span><span class="p">);</span><span class="w"> </span><span class="c1">// 调用 foo(char*)</span>
</code></pre></div>
<h4 id="strongly-typed-enums">强类型枚举（Strongly-typed enums）<a class="headerlink" href="#strongly-typed-enums" title="Permanent link">¶</a></h4>
<p>强类型枚举解决了 C 风格枚举的多种问题，包括：隐式转换、无法指定底层类型、作用域污染等。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c1">// 指定底层类型为 `unsigned int`</span>
<a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Color</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xff0000</span><span class="p">,</span><span class="w"> </span><span class="n">Green</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xff00</span><span class="p">,</span><span class="w"> </span><span class="n">Blue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="c1">// `Alert` 中的 `Red`/`Green` 不会与 `Color` 冲突</span>
<a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Alert</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Red</span><span class="p">,</span><span class="w"> </span><span class="n">Green</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="n">Color</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="o">::</span><span class="n">Red</span><span class="p">;</span>
</code></pre></div>
<h4 id="attributes">属性（Attributes）<a class="headerlink" href="#attributes" title="Permanent link">¶</a></h4>
<p>属性提供了一种统一的语法来替代 <code>__attribute__(...)</code>，<code>__declspec</code> 等。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="c1">// `noreturn` 属性表示 `f` 不会返回。</span>
<a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">[[</span><span class="w"> </span><span class="n">noreturn</span><span class="w"> </span><span class="p">]]</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="s">"error"</span><span class="p">;</span>
<a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="p">}</span>
</code></pre></div>
<h4 id="constexpr">constexpr<a class="headerlink" href="#constexpr" title="Permanent link">¶</a></h4>
<p>常量表达式是<em>可能</em>在编译时由编译器计算的表达式。只有非复杂的计算可以在常量表达式中进行（这些规则在后续版本中逐渐放宽）。使用 <code>constexpr</code> 说明符来指示变量、函数等是常量表达式。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">square</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="p">}</span>
<a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>
<a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">square2</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="p">}</span>
<a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a>
<a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">square</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w">  </span><span class="c1">// mov DWORD PTR [rbp-4], 4</span>
<a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>
<a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">square2</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// mov edi, 2</span>
<a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">                    </span><span class="c1">// call square2(int)</span>
<a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">                    </span><span class="c1">// mov DWORD PTR [rbp-8], eax</span>
</code></pre></div>
<p>在上面的代码片段中，可以注意到调用 <code>square</code> 时的计算是在编译时进行的，然后结果嵌入到代码生成中，而 <code>square2</code> 是在运行时调用的。</p>
<p><code>constexpr</code> 值是编译器可以在编译时计算的值，但不一定会计算：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- constexpr 变量 `y` 必须由常量表达式初始化</span>
</code></pre></div>
<p>与类一起使用的常量表达式：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Complex</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">  </span><span class="k">constexpr</span><span class="w"> </span><span class="n">Complex</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">re</span><span class="p">{</span><span class="n">r</span><span class="p">},</span><span class="w"> </span><span class="n">im</span><span class="p">{</span><span class="n">i</span><span class="p">}</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">  </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">real</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">re</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">imag</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">im</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>
<a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="k">private</span><span class="o">:</span>
<a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
<a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">im</span><span class="p">;</span>
<a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="p">};</span>
<a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a>
<a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="k">constexpr</span><span class="w"> </span><span class="n">Complex</span><span class="w"> </span><span class="nf">I</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>
<h4 id="delegating-constructors">委托构造函数（Delegating constructors）<a class="headerlink" href="#delegating-constructors" title="Permanent link">¶</a></h4>
<p>构造函数现在可以使用初始化列表调用同一个类中的其他构造函数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
<a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">  </span><span class="n">Foo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">foo</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">foo</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">  </span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="p">};</span>
<a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a>
<a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="n">Foo</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
<a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="n">foo</span><span class="p">.</span><span class="n">foo</span><span class="p">;</span><span class="w"> </span><span class="c1">// == 0</span>
</code></pre></div>
<h4 id="user-defined-literals">用户定义的字面量（User-defined literals）<a class="headerlink" href="#user-defined-literals" title="Permanent link">¶</a></h4>
<p>用户定义的字面量允许您扩展语言并添加自己的语法。要创建字面量，请定义一个 <code>T operator "" X(...) { ... }</code> 函数，该函数返回一个类型 <code>T</code>，名称为 <code>X</code>。请注意，此函数的名称定义了字面量的名称。任何不以下划线开头的字面量名称都是保留的，不会被调用。根据字面量的类型，用户定义的字面量函数应该接受的参数有一些规则。</p>
<p>将摄氏温度转换为华氏温度：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="c1">// 整型字面量需要 `unsigned long long` 参数。</span>
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="k">operator</span><span class="w"> </span><span class="s">""</span><span class="w"> </span><span class="n">_celsius</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">tempCelsius</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">llround</span><span class="p">(</span><span class="n">tempCelsius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1.8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
<a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="p">}</span>
<a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="mi">24</span><span class="n">_celsius</span><span class="p">;</span><span class="w"> </span><span class="c1">// == 75</span>
</code></pre></div>
<p>字符串到整数转换：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="c1">// 参数需要是 `const char*` 和 `std::size_t`。</span>
<a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="kt">int</span><span class="w"> </span><span class="k">operator</span><span class="w"> </span><span class="s">""</span><span class="w"> </span><span class="n">_int</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">stoi</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="p">}</span>
<a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a>
<a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="s">"123"</span><span class="n">_int</span><span class="p">;</span><span class="w"> </span><span class="c1">// == 123, 类型为 `int`</span>
</code></pre></div>
<h4 id="explicit-virtual-overrides">显式虚函数覆盖（Explicit virtual overrides）<a class="headerlink" href="#explicit-virtual-overrides" title="Permanent link">¶</a></h4>
<p>指定一个虚函数覆盖了另一个虚函数。如果虚函数没有覆盖父类的虚函数，则抛出编译器错误。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">  </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">();</span>
<a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">bar</span><span class="p">();</span>
<a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="p">};</span>
<a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a>
<a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="k">struct</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"> </span><span class="c1">// 正确 -- B::foo 覆盖了 A::foo</span>
<a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">bar</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- A::bar 不是虚函数</span>
<a href="#__codelineno-24-9" id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">baz</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- B::baz 没有覆盖 A::baz</span>
<a href="#__codelineno-24-10" id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="p">};</span>
</code></pre></div>
<h4 id="final-final-specifier">final 说明符（Final specifier）<a class="headerlink" href="#final-final-specifier" title="Permanent link">¶</a></h4>
<p>指定虚函数不能在派生类中被重写，或者指定类不能被继承。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">  </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">();</span>
<a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="p">};</span>
<a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a>
<a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">  </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="k">final</span><span class="p">;</span>
<a href="#__codelineno-25-7" id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="p">};</span>
<a href="#__codelineno-25-8" id="__codelineno-25-8" name="__codelineno-25-8"></a>
<a href="#__codelineno-25-9" id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="k">struct</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-25-10" id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="w">  </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">();</span><span class="w"> </span><span class="c1">// 错误 -- 声明 'foo' 覆盖了一个 'final' 函数</span>
<a href="#__codelineno-25-11" id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="p">};</span>
</code></pre></div>
<p>类不能被继承：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{};</span>
<a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{};</span><span class="w"> </span><span class="c1">// 错误 -- 基类 'A' 被标记为 'final'</span>
</code></pre></div>
<h4 id="default-functions">默认函数（Default functions）<a class="headerlink" href="#default-functions" title="Permanent link">¶</a></h4>
<p>提供函数默认实现的更优雅、高效的方式，例如构造函数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="w">  </span><span class="n">A</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">{</span><span class="n">x</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">};</span>
<a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="p">};</span>
<a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// a.x == 1</span>
<a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="n">A</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">};</span><span class="w"> </span><span class="c1">// a.x == 123</span>
</code></pre></div>
<p>与继承一起使用：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">  </span><span class="n">B</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a href="#__codelineno-28-4" id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="p">};</span>
<a href="#__codelineno-28-5" id="__codelineno-28-5" name="__codelineno-28-5"></a>
<a href="#__codelineno-28-6" id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="k">struct</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-28-7" id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="w">  </span><span class="c1">// 调用 B::B</span>
<a href="#__codelineno-28-8" id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">  </span><span class="n">C</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<a href="#__codelineno-28-9" id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="p">};</span>
<a href="#__codelineno-28-10" id="__codelineno-28-10" name="__codelineno-28-10"></a>
<a href="#__codelineno-28-11" id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"> </span><span class="c1">// c.x == 1</span>
</code></pre></div>
<h4 id="deleted-functions">已删除函数（Deleted functions）<a class="headerlink" href="#deleted-functions" title="Permanent link">¶</a></h4>
<p>提供函数删除实现的更优雅、高效的方式。用于防止对象被复制。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>
<a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="k">public</span><span class="o">:</span>
<a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">{</span><span class="n">x</span><span class="p">}</span><span class="w"> </span><span class="p">{};</span>
<a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">A</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span>
<a href="#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">  </span><span class="n">A</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">A</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span>
<a href="#__codelineno-29-8" id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="p">};</span>
<a href="#__codelineno-29-9" id="__codelineno-29-9" name="__codelineno-29-9"></a>
<a href="#__codelineno-29-10" id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="n">A</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">};</span>
<a href="#__codelineno-29-11" id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="n">A</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- 调用已删除的复制构造函数</span>
<a href="#__codelineno-29-12" id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- `operator=` 已删除</span>
</code></pre></div>
<h4 id="for-range-based-for-loops">基于范围的 for 循环（Range-based for loops）<a class="headerlink" href="#for-range-based-for-loops" title="Permanent link">¶</a></h4>
<p>用于迭代容器元素的语法糖。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
<a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="c1">// a == { 2, 4, 6, 8, 10 }</span>
</code></pre></div>
<p>注意使用 <code>int</code> 和 <code>int&amp;</code> 的区别：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
<a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="c1">// a == { 1, 2, 3, 4, 5 }</span>
</code></pre></div>
<h4 id="special-member-functions-for-move-semantics">移动语义的特殊成员函数（Special member functions for move semantics）<a class="headerlink" href="#special-member-functions-for-move-semantics" title="Permanent link">¶</a></h4>
<p>当进行复制时，会调用复制构造函数和复制赋值运算符，而随着 C++11 引入的移动语义，现在也有了移动构造函数和移动赋值运算符。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">  </span><span class="n">A</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="p">{</span><span class="s">"test"</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-32-4" id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">A</span><span class="o">&amp;</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="p">{</span><span class="n">o</span><span class="p">.</span><span class="n">s</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-32-5" id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="n">A</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">s</span><span class="p">)}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-32-6" id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">  </span><span class="n">A</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">A</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-32-7" id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">   </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">s</span><span class="p">);</span>
<a href="#__codelineno-32-8" id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<a href="#__codelineno-32-9" id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-32-10" id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="p">};</span>
<a href="#__codelineno-32-11" id="__codelineno-32-11" name="__codelineno-32-11"></a>
<a href="#__codelineno-32-12" id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="n">A</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-32-13" id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<a href="#__codelineno-32-14" id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="p">}</span>
<a href="#__codelineno-32-15" id="__codelineno-32-15" name="__codelineno-32-15"></a>
<a href="#__codelineno-32-16" id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="n">A</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">A</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 从右值临时对象移动构造</span>
<a href="#__codelineno-32-17" id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="n">A</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">a1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 使用 std::move 移动构造</span>
<a href="#__codelineno-32-18" id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="n">A</span><span class="w"> </span><span class="n">a3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">{};</span>
<a href="#__codelineno-32-19" id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">a3</span><span class="p">);</span><span class="w"> </span><span class="c1">// 使用 std::move 移动赋值</span>
<a href="#__codelineno-32-20" id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">A</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 从右值临时对象移动赋值</span>
</code></pre></div>
<h4 id="converting-constructors">转换构造函数（Converting constructors）<a class="headerlink" href="#converting-constructors" title="Permanent link">¶</a></h4>
<p>转换构造函数将大括号列表语法的值转换为构造函数参数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-33-4" id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-33-5" id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="p">};</span>
<a href="#__codelineno-33-6" id="__codelineno-33-6" name="__codelineno-33-6"></a>
<a href="#__codelineno-33-7" id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 调用 A::A(int, int)</span>
<a href="#__codelineno-33-8" id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="n">A</span><span class="w"> </span><span class="nf">b</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// 调用 A::A(int, int)</span>
<a href="#__codelineno-33-9" id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="n">A</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 调用 A::A(int, int)</span>
<a href="#__codelineno-33-10" id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="n">A</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 调用 A::A(int, int, int)</span>
</code></pre></div>
<p>请注意，大括号列表语法不允许缩小：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="p">};</span>
<a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a>
<a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="n">A</span><span class="w"> </span><span class="nf">a</span><span class="p">(</span><span class="mf">1.1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 正确</span>
<a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="n">A</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">{</span><span class="mf">1.1</span><span class="p">};</span><span class="w"> </span><span class="c1">// 错误 缩小转换从 double 到 int</span>
</code></pre></div>
<p>请注意，如果构造函数接受 <code>std::initializer_list</code>，它将被调用：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-35-6" id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="p">};</span>
<a href="#__codelineno-35-7" id="__codelineno-35-7" name="__codelineno-35-7"></a>
<a href="#__codelineno-35-8" id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 调用 A::A(std::initializer_list&lt;int&gt;)</span>
<a href="#__codelineno-35-9" id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="n">A</span><span class="w"> </span><span class="nf">b</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// 调用 A::A(int, int)</span>
<a href="#__codelineno-35-10" id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="n">A</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 调用 A::A(std::initializer_list&lt;int&gt;)</span>
<a href="#__codelineno-35-11" id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="n">A</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 调用 A::A(std::initializer_list&lt;int&gt;)</span>
</code></pre></div>
<h4 id="explicit-conversion-functions">显式转换函数（Explicit conversion functions）<a class="headerlink" href="#explicit-conversion-functions" title="Permanent link">¶</a></h4>
<p>转换函数现在可以使用 <code>explicit</code> 说明符来显式指定。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">  </span><span class="k">operator</span><span class="w"> </span><span class="kt">bool</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-36-3" id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="p">};</span>
<a href="#__codelineno-36-4" id="__codelineno-36-4" name="__codelineno-36-4"></a>
<a href="#__codelineno-36-5" id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-36-6" id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">  </span><span class="k">explicit</span><span class="w"> </span><span class="k">operator</span><span class="w"> </span><span class="kt">bool</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-36-7" id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="p">};</span>
<a href="#__codelineno-36-8" id="__codelineno-36-8" name="__codelineno-36-8"></a>
<a href="#__codelineno-36-9" id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<a href="#__codelineno-36-10" id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="w"> </span><span class="c1">// 正确 调用 A::operator bool()</span>
<a href="#__codelineno-36-11" id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="kt">bool</span><span class="w"> </span><span class="n">ba</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// 正确 拷贝初始化选择 A::operator bool()</span>
<a href="#__codelineno-36-12" id="__codelineno-36-12" name="__codelineno-36-12"></a>
<a href="#__codelineno-36-13" id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="n">B</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a href="#__codelineno-36-14" id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// 正确 调用 B::operator bool()</span>
<a href="#__codelineno-36-15" id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="kt">bool</span><span class="w"> </span><span class="n">bb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 拷贝初始化不考虑 B::operator bool()</span>
</code></pre></div>
<h4 id="inline-namespaces">内联命名空间（Inline namespaces）<a class="headerlink" href="#inline-namespaces" title="Permanent link">¶</a></h4>
<p>内联命名空间的所有成员都被视为其父命名空间的一部分，允许函数的特化并简化版本控制。这是一种传递性质，如果 A 包含 B，而 B 又包含 C，且 B 和 C 都是内联命名空间，则 C 的成员可以像在 A 中一样使用。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">Program</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">  </span><span class="k">namespace</span><span class="w"> </span><span class="nn">Version1</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-37-3" id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">getVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-37-4" id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">isFirstVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-37-5" id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-37-6" id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">  </span><span class="kr">inline</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">Version2</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-37-7" id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">getVersion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-37-8" id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-37-9" id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="p">}</span>
<a href="#__codelineno-37-10" id="__codelineno-37-10" name="__codelineno-37-10"></a>
<a href="#__codelineno-37-11" id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="kt">int</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">{</span><span class="n">Program</span><span class="o">::</span><span class="n">getVersion</span><span class="p">()};</span><span class="w">              </span><span class="c1">// 使用 Version2 中的 getVersion()</span>
<a href="#__codelineno-37-12" id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="kt">int</span><span class="w"> </span><span class="n">oldVersion</span><span class="w"> </span><span class="p">{</span><span class="n">Program</span><span class="o">::</span><span class="n">Version1</span><span class="o">::</span><span class="n">getVersion</span><span class="p">()};</span><span class="w"> </span><span class="c1">// 使用 Version1 中的 getVersion()</span>
<a href="#__codelineno-37-13" id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="kt">bool</span><span class="w"> </span><span class="n">firstVersion</span><span class="w"> </span><span class="p">{</span><span class="n">Program</span><span class="o">::</span><span class="n">isFirstVersion</span><span class="p">()};</span><span class="w">    </span><span class="c1">// 当 Version2 被添加时，编译失败</span>
</code></pre></div>
<h4 id="non-static-data-member-initializers">非静态数据成员初始化器（Non-static data member initializers）<a class="headerlink" href="#non-static-data-member-initializers" title="Permanent link">¶</a></h4>
<p>允许在声明非静态数据成员时进行初始化，可能会清理默认初始化的构造函数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="c1">// C++11 之前的默认初始化</span>
<a href="#__codelineno-38-2" id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">Human</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-38-3" id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">    </span><span class="n">Human</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">age</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-38-4" id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">  </span><span class="k">private</span><span class="o">:</span>
<a href="#__codelineno-38-5" id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<a href="#__codelineno-38-6" id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="p">};</span>
<a href="#__codelineno-38-7" id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="c1">// C++11 上的默认初始化</span>
<a href="#__codelineno-38-8" id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">Human</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-38-9" id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">  </span><span class="k">private</span><span class="o">:</span>
<a href="#__codelineno-38-10" id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<a href="#__codelineno-38-11" id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="p">};</span>
</code></pre></div>
<h4 id="right-angle-brackets">右尖括号（Right angle brackets）<a class="headerlink" href="#right-angle-brackets" title="Permanent link">¶</a></h4>
<p>C++11 现在能够推断一系列右尖括号是用作运算符还是作为 <code>typedef</code> 的结束语句，而不必添加空格。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="k">typedef</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">cpp98LongTypedef</span><span class="p">;</span>
<a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="k">typedef</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;&gt;</span><span class="w">   </span><span class="n">cpp11LongTypedef</span><span class="p">;</span>
</code></pre></div>
<h4 id="ref-qualified-member-functions">引用限定成员函数（Ref-qualified member functions）<a class="headerlink" href="#ref-qualified-member-functions" title="Permanent link">¶</a></h4>
<p>成员函数现在可以根据 <em>this</em> 是 lvalue 还是 rvalue 引用来进行限定。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Bar</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="p">};</span>
<a href="#__codelineno-40-4" id="__codelineno-40-4" name="__codelineno-40-4"></a>
<a href="#__codelineno-40-5" id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-40-6" id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">  </span><span class="n">Bar</span><span class="w"> </span><span class="nf">getBar</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">bar</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-40-7" id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">  </span><span class="n">Bar</span><span class="w"> </span><span class="nf">getBar</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">bar</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-40-8" id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">  </span><span class="n">Bar</span><span class="w"> </span><span class="nf">getBar</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">bar</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-40-9" id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="k">private</span><span class="o">:</span>
<a href="#__codelineno-40-10" id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">  </span><span class="n">Bar</span><span class="w"> </span><span class="n">bar</span><span class="p">;</span>
<a href="#__codelineno-40-11" id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="p">};</span>
<a href="#__codelineno-40-12" id="__codelineno-40-12" name="__codelineno-40-12"></a>
<a href="#__codelineno-40-13" id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="n">Foo</span><span class="w"> </span><span class="n">foo</span><span class="p">{};</span>
<a href="#__codelineno-40-14" id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="n">Bar</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">getBar</span><span class="p">();</span><span class="w"> </span><span class="c1">// 调用 `Bar getBar() &amp;`</span>
<a href="#__codelineno-40-15" id="__codelineno-40-15" name="__codelineno-40-15"></a>
<a href="#__codelineno-40-16" id="__codelineno-40-16" name="__codelineno-40-16"></a><span class="k">const</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">foo2</span><span class="p">{};</span>
<a href="#__codelineno-40-17" id="__codelineno-40-17" name="__codelineno-40-17"></a><span class="n">Bar</span><span class="w"> </span><span class="n">bar2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foo2</span><span class="p">.</span><span class="n">getBar</span><span class="p">();</span><span class="w"> </span><span class="c1">// 调用 `Bar Foo::getBar() const&amp;`</span>
<a href="#__codelineno-40-18" id="__codelineno-40-18" name="__codelineno-40-18"></a>
<a href="#__codelineno-40-19" id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="n">Foo</span><span class="p">{}.</span><span class="n">getBar</span><span class="p">();</span><span class="w"> </span><span class="c1">// 调用 `Bar Foo::getBar() &amp;&amp;`</span>
<a href="#__codelineno-40-20" id="__codelineno-40-20" name="__codelineno-40-20"></a><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">foo</span><span class="p">).</span><span class="n">getBar</span><span class="p">();</span><span class="w"> </span><span class="c1">// 调用 `Bar Foo::getBar() &amp;&amp;`</span>
<a href="#__codelineno-40-21" id="__codelineno-40-21" name="__codelineno-40-21"></a>
<a href="#__codelineno-40-22" id="__codelineno-40-22" name="__codelineno-40-22"></a><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">foo2</span><span class="p">).</span><span class="n">getBar</span><span class="p">();</span><span class="w"> </span><span class="c1">// 调用 `Bar Foo::getBar() const&amp;&amp;`</span>
</code></pre></div>
<h4 id="trailing-return-types">尾置返回类型（Trailing return types）<a class="headerlink" href="#trailing-return-types" title="Permanent link">¶</a></h4>
<p>C++11 允许函数和 lambda 使用替代语法来指定其返回类型。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="p">}</span>
<a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="c1">// vs.</span>
<a href="#__codelineno-41-5" id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-41-6" id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-41-7" id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="p">}</span>
<a href="#__codelineno-41-8" id="__codelineno-41-8" name="__codelineno-41-8"></a>
<a href="#__codelineno-41-9" id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="k">auto</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-41-10" id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-41-11" id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="p">};</span>
</code></pre></div>
<p>此特性在某些返回类型无法解析时特别有用：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="c1">// 注意：这段代码无法编译！</span>
<a href="#__codelineno-42-2" id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">U</span><span class="o">&gt;</span>
<a href="#__codelineno-42-3" id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="k">decltype</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-42-4" id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a href="#__codelineno-42-5" id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="p">}</span>
<a href="#__codelineno-42-6" id="__codelineno-42-6" name="__codelineno-42-6"></a>
<a href="#__codelineno-42-7" id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="c1">// 尾置返回类型允许这样：</span>
<a href="#__codelineno-42-8" id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">U</span><span class="o">&gt;</span>
<a href="#__codelineno-42-9" id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="k">auto</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-42-10" id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a href="#__codelineno-42-11" id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="p">}</span>
</code></pre></div>
<p>在 C++14 中，可以改用 <a href="#decltypeauto">decltype(auto) (C++14)</a>。</p>
<h4 id="noexcept-noexcept-specifier">noexcept 说明符（noexcept specifier）<a class="headerlink" href="#noexcept-noexcept-specifier" title="Permanent link">¶</a></h4>
<p><code>noexcept</code> 说明符用于指定一个函数是否可能抛出异常。它是 <code>throw()</code> 的改进版本。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func1</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="p">;</span><span class="w">        </span><span class="c1">// 不会抛出异常</span>
<a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func2</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w">  </span><span class="c1">// 不会抛出异常</span>
<a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func3</span><span class="p">()</span><span class="w"> </span><span class="k">throw</span><span class="p">();</span><span class="w">         </span><span class="c1">// 不会抛出异常</span>
<a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a>
<a href="#__codelineno-43-5" id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func4</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// 可能会抛出异常</span>
</code></pre></div>
<p>不抛出异常的函数可以调用可能抛出异常的函数。当异常被抛出并且在寻找处理程序时遇到不抛出异常的函数的外部块，函数 <code>std::terminate</code> 会被调用。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">();</span><span class="w">  </span><span class="c1">// 可能抛出异常</span>
<a href="#__codelineno-44-2" id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">g</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-44-3" id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="w">    </span><span class="n">f</span><span class="p">();</span><span class="w">          </span><span class="c1">// 有效，即使 f 抛出异常</span>
<a href="#__codelineno-44-4" id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">     </span><span class="c1">// 有效，实际上是调用 std::terminate</span>
<a href="#__codelineno-44-5" id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="p">}</span>
</code></pre></div>
<h4 id="char32_t-char16_t">char32_t 和 char16_t<a class="headerlink" href="#char32_t-char16_t" title="Permanent link">¶</a></h4>
<p>提供了表示 UTF-8 字符串的标准类型。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="kt">char32_t</span><span class="w"> </span><span class="n">utf8_str</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sa">U</span><span class="s">"</span><span class="se">\u0123</span><span class="s">"</span><span class="p">;</span>
<a href="#__codelineno-45-2" id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="kt">char16_t</span><span class="w"> </span><span class="n">utf8_str</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sa">u</span><span class="s">"</span><span class="se">\u0123</span><span class="s">"</span><span class="p">;</span>
</code></pre></div>
<h4 id="raw-string-literals">原始字符串字面量（Raw string literals）<a class="headerlink" href="#raw-string-literals" title="Permanent link">¶</a></h4>
<p>C++11 引入了一种新的声明字符串字面量的方式，称为“原始字符串字面量”。从转义序列（如制表符、换行符、单个反斜杠等）发出的字符可以以原始方式输入，同时保持格式。这对于书写可能包含大量引号或特殊格式的文学文本特别有用。这样可以使字符串字面量更易读和维护。</p>
<p>原始字符串字面量使用以下语法声明：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="sa">R</span><span class="s2">"delimiter(raw_characters)delimiter"</span>
</code></pre></div>
<p>其中：</p>
<ul>
<li><code>delimiter</code> 是一个可选的字符序列，由除了括号、反斜杠和空格以外的任何源字符组成。</li>
<li><code>raw_characters</code> 是任何原始字符序列；不得包含结束序列 <code>")delimiter"</code>。</li>
</ul>
<p>示例：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="c1">// msg1 和 msg2 是等价的。</span>
<a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">msg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">Hello,</span><span class="se">\n\t</span><span class="s">world!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<a href="#__codelineno-47-3" id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">msg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sa">R</span><span class="s">"</span><span class="dl">(</span>
<a href="#__codelineno-47-4" id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="s">Hello,</span>
<a href="#__codelineno-47-5" id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="s">    world!</span>
<a href="#__codelineno-47-6" id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="dl">)</span><span class="s">"</span><span class="p">;</span>
</code></pre></div>
<h3 id="c11_2">C++11 标准库特性<a class="headerlink" href="#c11_2" title="Permanent link">¶</a></h3>
<h4 id="stdmove">std::move<a class="headerlink" href="#stdmove" title="Permanent link">¶</a></h4>
<p><code>std::move</code> 表明传递给它的对象可以将其资源转移。使用已被移动的对象时应谨慎，因为它们可能会处于未指定的状态（参见：<a href="https://stackoverflow.com/questions/7027523/what-can-i-do-with-a-moved-from-object">What can I do with a moved-from object?</a>）。</p>
<p><code>std::move</code> 的定义（执行移动实际上只是将其转换为右值引用）：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-48-2" id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="k">typename</span><span class="w"> </span><span class="nc">remove_reference</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">move</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-48-3" id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">remove_reference</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&amp;&amp;&gt;</span><span class="p">(</span><span class="n">arg</span><span class="p">);</span>
<a href="#__codelineno-48-4" id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="p">}</span>
</code></pre></div>
<p>转移 <code>std::unique_ptr</code>：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">}};</span><span class="w">  </span><span class="c1">// 实际上，使用 std::make_unique</span>
<a href="#__codelineno-49-2" id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误 -- 不能复制唯一指针</span>
<a href="#__codelineno-49-3" id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">p1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 将 `p1` 移动到 `p3`</span>
<a href="#__codelineno-49-4" id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">                                         </span><span class="c1">// 现在无法解引用 `p1` 持有的对象</span>
</code></pre></div>
<h4 id="stdforward">std::forward<a class="headerlink" href="#stdforward" title="Permanent link">¶</a></h4>
<p>返回传递给它的参数，同时保持其值类别和 cv-qualifiers。对于通用代码和工厂非常有用。与 <a href="#forwarding-references"><code>forwarding references</code></a> 一起使用。</p>
<p><code>std::forward</code> 的定义：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-50-2" id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">forward</span><span class="p">(</span><span class="k">typename</span><span class="w"> </span><span class="nc">remove_reference</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&amp;</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-50-3" id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&amp;&amp;&gt;</span><span class="p">(</span><span class="n">arg</span><span class="p">);</span>
<a href="#__codelineno-50-4" id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="p">}</span>
</code></pre></div>
<p>一个 <code>wrapper</code> 函数的示例，它只是将其他 <code>A</code> 对象转发到新 <code>A</code> 对象的拷贝或移动构造函数：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="w">  </span><span class="n">A</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<a href="#__codelineno-51-3" id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">A</span><span class="o">&amp;</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"copied"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-51-4" id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="w">  </span><span class="n">A</span><span class="p">(</span><span class="n">A</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"moved"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-51-5" id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="p">};</span>
<a href="#__codelineno-51-6" id="__codelineno-51-6" name="__codelineno-51-6"></a>
<a href="#__codelineno-51-7" id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-51-8" id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="n">A</span><span class="w"> </span><span class="n">wrapper</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-51-9" id="__codelineno-51-9" name="__codelineno-51-9"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">A</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">arg</span><span class="p">)};</span>
<a href="#__codelineno-51-10" id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="p">}</span>
<a href="#__codelineno-51-11" id="__codelineno-51-11" name="__codelineno-51-11"></a>
<a href="#__codelineno-51-12" id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="n">wrapper</span><span class="p">(</span><span class="n">A</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 移动</span>
<a href="#__codelineno-51-13" id="__codelineno-51-13" name="__codelineno-51-13"></a><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<a href="#__codelineno-51-14" id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="n">wrapper</span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="w"> </span><span class="c1">// 复制</span>
<a href="#__codelineno-51-15" id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="n">wrapper</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">a</span><span class="p">));</span><span class="w"> </span><span class="c1">// 移动</span>
</code></pre></div>
<p>另见：<a href="#forwarding-references"><code>forwarding references</code></a>，<a href="#rvalue-references"><code>rvalue references</code></a>。</p>
<h4 id="stdthread">std::thread<a class="headerlink" href="#stdthread" title="Permanent link">¶</a></h4>
<p><code>std::thread</code> 库提供了一种标准方式来控制线程，例如创建和终止它们。在下面的示例中，多个线程被创建来进行不同的计算，然后程序等待所有线程完成。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-52-1" id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">clause</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* 做一些事情... */</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-52-2" id="__codelineno-52-2" name="__codelineno-52-2"></a>
<a href="#__codelineno-52-3" id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">&gt;</span><span class="w"> </span><span class="n">threadsVector</span><span class="p">;</span>
<a href="#__codelineno-52-4" id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="n">threadsVector</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">([]()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-52-5" id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="w">  </span><span class="c1">// 将要调用的 Lambda 函数</span>
<a href="#__codelineno-52-6" id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="p">});</span>
<a href="#__codelineno-52-7" id="__codelineno-52-7" name="__codelineno-52-7"></a><span class="n">threadsVector</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w">  </span><span class="c1">// 线程将运行 foo(true)</span>
<a href="#__codelineno-52-8" id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="kr">thread</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">threadsVector</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-52-9" id="__codelineno-52-9" name="__codelineno-52-9"></a><span class="w">  </span><span class="kr">thread</span><span class="p">.</span><span class="n">join</span><span class="p">();</span><span class="w"> </span><span class="c1">// 等待线程完成</span>
<a href="#__codelineno-52-10" id="__codelineno-52-10" name="__codelineno-52-10"></a><span class="p">}</span>
</code></pre></div>
<h4 id="stdto_string">std::to_string<a class="headerlink" href="#stdto_string" title="Permanent link">¶</a></h4>
<p>将一个数字参数转换为 <code>std::string</code>。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-53-1" id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="mf">1.2</span><span class="p">);</span><span class="w"> </span><span class="c1">// == "1.2"</span>
<a href="#__codelineno-53-2" id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span><span class="w"> </span><span class="c1">// == "123"</span>
</code></pre></div>
<h4 id="type-traits">类型特性（Type traits）<a class="headerlink" href="#type-traits" title="Permanent link">¶</a></h4>
<p>类型特性定义了一个基于模板的编译时接口，用于查询或修改类型的属性。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-54-1" id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_integral</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">);</span>
<a href="#__codelineno-54-2" id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">);</span>
<a href="#__codelineno-54-3" id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">conditional</span><span class="o">&lt;</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">);</span>
</code></pre></div>
<h4 id="smart-pointers">智能指针（Smart pointers）<a class="headerlink" href="#smart-pointers" title="Permanent link">¶</a></h4>
<p>C++11 引入了新的智能指针：<code>std::unique_ptr</code>，<code>std::shared_ptr</code>，<code>std::weak_ptr</code>。<code>std::auto_ptr</code> 现在被弃用，并最终在 C++17 中移除。</p>
<p><code>std::unique_ptr</code> 是一个不可复制、可移动的指针，它管理自己的堆分配内存。<strong>注意：建议使用 <code>std::make_X</code> 辅助函数，而不是使用构造函数。有关更多信息，请参见 <a href="#stdmake_unique"><code>std::make_unique</code> (c++14)</a> 和 <a href="#stdmake_shared"><code>std::make_shared</code> (C++11)</a> 的部分。</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-55-1" id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Foo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Foo</span><span class="p">{}</span><span class="w"> </span><span class="p">};</span><span class="w">  </span><span class="c1">// `p1` 拥有 `Foo`</span>
<a href="#__codelineno-55-2" id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-55-3" id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="w">  </span><span class="n">p1</span><span class="o">-&gt;</span><span class="n">bar</span><span class="p">();</span>
<a href="#__codelineno-55-4" id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="p">}</span>
<a href="#__codelineno-55-5" id="__codelineno-55-5" name="__codelineno-55-5"></a>
<a href="#__codelineno-55-6" id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="p">{</span>
<a href="#__codelineno-55-7" id="__codelineno-55-7" name="__codelineno-55-7"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Foo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">p1</span><span class="p">)};</span><span class="w">  </span><span class="c1">// 现在 `p2` 拥有 `Foo`</span>
<a href="#__codelineno-55-8" id="__codelineno-55-8" name="__codelineno-55-8"></a><span class="w">  </span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">p2</span><span class="p">);</span>
<a href="#__codelineno-55-9" id="__codelineno-55-9" name="__codelineno-55-9"></a>
<a href="#__codelineno-55-10" id="__codelineno-55-10" name="__codelineno-55-10"></a><span class="w">  </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">p2</span><span class="p">);</span><span class="w">  </span><span class="c1">// 所有权返回到 `p1` -- `p2` 被销毁</span>
<a href="#__codelineno-55-11" id="__codelineno-55-11" name="__codelineno-55-11"></a><span class="p">}</span>
<a href="#__codelineno-55-12" id="__codelineno-55-12" name="__codelineno-55-12"></a>
<a href="#__codelineno-55-13" id="__codelineno-55-13" name="__codelineno-55-13"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-55-14" id="__codelineno-55-14" name="__codelineno-55-14"></a><span class="w">  </span><span class="n">p1</span><span class="o">-&gt;</span><span class="n">bar</span><span class="p">();</span>
<a href="#__codelineno-55-15" id="__codelineno-55-15" name="__codelineno-55-15"></a><span class="p">}</span>
<a href="#__codelineno-55-16" id="__codelineno-55-16" name="__codelineno-55-16"></a><span class="c1">// 当 `p1` 超出作用域时，`Foo` 实例被销毁</span>
</code></pre></div>
<p><code>std::shared_ptr</code> 是一种智能指针，管理一个在多个所有者之间共享的资源。共享指针持有一个<em>控制块</em>，控制块有几个组件，如托管对象和引用计数器。所有控制块访问都是线程安全的，但操作托管对象本身<em>不是</em>线程安全的。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-56-1" id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-56-2" id="__codelineno-56-2" name="__codelineno-56-2"></a><span class="w">  </span><span class="c1">// 对 `t` 做一些操作...</span>
<a href="#__codelineno-56-3" id="__codelineno-56-3" name="__codelineno-56-3"></a><span class="p">}</span>
<a href="#__codelineno-56-4" id="__codelineno-56-4" name="__codelineno-56-4"></a>
<a href="#__codelineno-56-5" id="__codelineno-56-5" name="__codelineno-56-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">bar</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-56-6" id="__codelineno-56-6" name="__codelineno-56-6"></a><span class="w">  </span><span class="c1">// 对 `t` 做一些操作...</span>
<a href="#__codelineno-56-7" id="__codelineno-56-7" name="__codelineno-56-7"></a><span class="p">}</span>
<a href="#__codelineno-56-8" id="__codelineno-56-8" name="__codelineno-56-8"></a>
<a href="#__codelineno-56-9" id="__codelineno-56-9" name="__codelineno-56-9"></a><span class="kt">void</span><span class="w"> </span><span class="nf">baz</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-56-10" id="__codelineno-56-10" name="__codelineno-56-10"></a><span class="w">  </span><span class="c1">// 对 `t` 做一些操作...</span>
<a href="#__codelineno-56-11" id="__codelineno-56-11" name="__codelineno-56-11"></a><span class="p">}</span>
<a href="#__codelineno-56-12" id="__codelineno-56-12" name="__codelineno-56-12"></a>
<a href="#__codelineno-56-13" id="__codelineno-56-13" name="__codelineno-56-13"></a><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">T</span><span class="p">{}};</span>
<a href="#__codelineno-56-14" id="__codelineno-56-14" name="__codelineno-56-14"></a><span class="c1">// 也许这些操作发生在其他线程中？</span>
<a href="#__codelineno-56-15" id="__codelineno-56-15" name="__codelineno-56-15"></a><span class="n">foo</span><span class="p">(</span><span class="n">p1</span><span class="p">);</span>
<a href="#__codelineno-56-16" id="__codelineno-56-16" name="__codelineno-56-16"></a><span class="n">bar</span><span class="p">(</span><span class="n">p1</span><span class="p">);</span>
<a href="#__codelineno-56-17" id="__codelineno-56-17" name="__codelineno-56-17"></a><span class="n">baz</span><span class="p">(</span><span class="n">p1</span><span class="p">);</span>
</code></pre></div>
<h4 id="stdchrono">std::chrono<a class="headerlink" href="#stdchrono" title="Permanent link">¶</a></h4>
<p><code>chrono</code> 库包含一组处理<em>持续时间</em>，<em>时钟</em>和<em>时间点</em>的实用函数和类型。此库的一个用例是基准测试代码：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-57-1" id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">steady_clock</span><span class="o">&gt;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">;</span>
<a href="#__codelineno-57-2" id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<a href="#__codelineno-57-3" id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="c1">// 一些计算...</span>
<a href="#__codelineno-57-4" id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<a href="#__codelineno-57-5" id="__codelineno-57-5" name="__codelineno-57-5"></a>
<a href="#__codelineno-57-6" id="__codelineno-57-6" name="__codelineno-57-6"></a><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">elapsed_seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="p">;</span>
<a href="#__codelineno-57-7" id="__codelineno-57-7" name="__codelineno-57-7"></a><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elapsed_seconds</span><span class="p">.</span><span class="n">count</span><span class="p">();</span><span class="w"> </span><span class="c1">// t 秒，表示为 `double`</span>
</code></pre></div>
<h4 id="tuples">元组（Tuples）<a class="headerlink" href="#tuples" title="Permanent link">¶</a></h4>
<p>元组是一个固定大小的异质值集合。可以通过解包 <a href="#stdtie"><code>std::tie</code></a> 或使用 <code>std::get</code> 访问 <code>std::tuple</code> 的元素。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-58-1" id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="c1">// `playerProfile` 的类型是 `std::tuple&lt;int, const char*, const char*&gt;`。</span>
<a href="#__codelineno-58-2" id="__codelineno-58-2" name="__codelineno-58-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">playerProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span><span class="w"> </span><span class="s">"Frans Nielsen"</span><span class="p">,</span><span class="w"> </span><span class="s">"NYI"</span><span class="p">);</span>
<a href="#__codelineno-58-3" id="__codelineno-58-3" name="__codelineno-58-3"></a><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">playerProfile</span><span class="p">);</span><span class="w"> </span><span class="c1">// 51</span>
<a href="#__codelineno-58-4" id="__codelineno-58-4" name="__codelineno-58-4"></a><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">playerProfile</span><span class="p">);</span><span class="w"> </span><span class="c1">// "Frans Nielsen"</span>
<a href="#__codelineno-58-5" id="__codelineno-58-5" name="__codelineno-58-5"></a><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">(</span><span class="n">playerProfile</span><span class="p">);</span><span class="w"> </span><span class="c1">// "NYI"</span>
</code></pre></div>
<h4 id="stdtie">std::tie<a class="headerlink" href="#stdtie" title="Permanent link">¶</a></h4>
<p>创建一个包含左值引用的元组。对 <code>std::pair</code> 和 <code>std::tuple</code> 对象的解包很有用。使用 <code>std::ignore</code> 作为被忽略值的占位符。在 C++17 中，应该使用结构化绑定。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-59-1" id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="c1">// 使用元组...</span>
<a href="#__codelineno-59-2" id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">playerName</span><span class="p">;</span>
<a href="#__codelineno-59-3" id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="n">std</span><span class="o">::</span><span class="n">tie</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ignore</span><span class="p">,</span><span class="w"> </span><span class="n">playerName</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ignore</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">91</span><span class="p">,</span><span class="w"> </span><span class="s">"John Tavares"</span><span class="p">,</span><span class="w"> </span><span class="s">"NYI"</span><span class="p">);</span>
<a href="#__codelineno-59-4" id="__codelineno-59-4" name="__codelineno-59-4"></a>
<a href="#__codelineno-59-5" id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="c1">// 使用对...</span>
<a href="#__codelineno-59-6" id="__codelineno-59-6" name="__codelineno-59-6"></a><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">yes</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">;</span>
<a href="#__codelineno-59-7" id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="n">std</span><span class="o">::</span><span class="n">tie</span><span class="p">(</span><span class="n">yes</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="s">"yes"</span><span class="p">,</span><span class="w"> </span><span class="s">"no"</span><span class="p">);</span>
</code></pre></div>
<h4 id="stdarray">std::array<a class="headerlink" href="#stdarray" title="Permanent link">¶</a></h4>
<p><code>std::array</code> 是基于 C 风格数组构建的容器。支持常见的容器操作，如排序。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-60-1" id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">};</span>
<a href="#__codelineno-60-2" id="__codelineno-60-2" name="__codelineno-60-2"></a><span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">());</span><span class="w"> </span><span class="c1">// a == { 1, 2, 3 }</span>
<a href="#__codelineno-60-3" id="__codelineno-60-3" name="__codelineno-60-3"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// a == { 2, 4, 6 }</span>
</code></pre></div>
<h4 id="unordered-containers">无序容器（Unordered containers）<a class="headerlink" href="#unordered-containers" title="Permanent link">¶</a></h4>
<p>这些容器保持平均常数时间复杂度的搜索、插入和删除操作。为了实现常数时间复杂度，通过将元素哈希到桶中来牺牲顺序以换取速度。无序容器有四种：</p>
<ul>
<li><code>unordered_set</code></li>
<li><code>unordered_multiset</code></li>
<li><code>unordered_map</code></li>
<li><code>unordered_multimap</code></li>
</ul>
<h4 id="stdmake_shared">std::make_shared<a class="headerlink" href="#stdmake_shared" title="Permanent link">¶</a></h4>
<p><code>std::make_shared</code> 是创建 <code>std::shared_ptr</code> 实例的推荐方法，原因如下：</p>
<ul>
<li>避免使用 <code>new</code> 操作符。</li>
<li>避免在指定指针所持有的底层类型时重复代码。</li>
<li>提供异常安全性。假设我们像这样调用函数 <code>foo</code>：</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-61-1" id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="n">foo</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">T</span><span class="p">{}},</span><span class="w"> </span><span class="n">function_that_throws</span><span class="p">(),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">T</span><span class="p">{}});</span>
</code></pre></div>
<p>编译器可以先调用 <code>new T{}</code>，然后调用 <code>function_that_throws()</code>，然后是... 由于我们在第一次构造 <code>T</code> 时在堆上分配了数据，我们在这里引入了内存泄漏。使用 <code>std::make_shared</code>，我们获得了异常安全性：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-62-1" id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="n">foo</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"> </span><span class="n">function_that_throws</span><span class="p">(),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">());</span>
</code></pre></div>
<ul>
<li>避免进行两次分配。当调用 <code>std::shared_ptr{ new T{} }</code> 时，我们需要为 <code>T</code> 分配内存，然后在共享指针中为控制块分配内存。</li>
</ul>
<p>有关 <code>std::unique_ptr</code> 和 <code>std::shared_ptr</code> 的更多信息，请参见智能指针的部分。</p>
<h4 id="stdref">std::ref<a class="headerlink" href="#stdref" title="Permanent link">¶</a></h4>
<p><code>std::ref(val)</code> 用于创建类型为 <code>std::reference_wrapper</code> 的对象，该对象持有 <code>val</code> 的引用。在通常的引用传递使用 <code>&amp;</code> 时编译失败或由于类型推断而丢失 <code>&amp;</code> 的情况下使用。<code>std::cref</code> 类似，但创建的引用包装器持有 <code>val</code> 的常量引用。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-63-1" id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="c1">// 创建一个容器来存储对象的引用。</span>
<a href="#__codelineno-63-2" id="__codelineno-63-2" name="__codelineno-63-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="p">;</span>
<a href="#__codelineno-63-3" id="__codelineno-63-3" name="__codelineno-63-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<a href="#__codelineno-63-4" id="__codelineno-63-4" name="__codelineno-63-4"></a><span class="n">_ref</span><span class="o">++</span><span class="p">;</span>
<a href="#__codelineno-63-5" id="__codelineno-63-5" name="__codelineno-63-5"></a><span class="k">auto</span><span class="w"> </span><span class="n">_cref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cref</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<a href="#__codelineno-63-6" id="__codelineno-63-6" name="__codelineno-63-6"></a><span class="c1">// _cref++ 不会编译</span>
<a href="#__codelineno-63-7" id="__codelineno-63-7" name="__codelineno-63-7"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">reference_wrapper</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="n">vec</span><span class="p">;</span><span class="w"> </span><span class="c1">// vector&lt;int&amp;&gt;vec 不会编译</span>
<a href="#__codelineno-63-8" id="__codelineno-63-8" name="__codelineno-63-8"></a><span class="n">vec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">_ref</span><span class="p">);</span><span class="w"> </span><span class="c1">// vec.push_back(&amp;i) 不会编译</span>
<a href="#__codelineno-63-9" id="__codelineno-63-9" name="__codelineno-63-9"></a><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="c1">// 打印 100</span>
<a href="#__codelineno-63-10" id="__codelineno-63-10" name="__codelineno-63-10"></a><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="c1">// 打印 100</span>
<a href="#__codelineno-63-11" id="__codelineno-63-11" name="__codelineno-63-11"></a><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">_cref</span><span class="p">;</span><span class="w"> </span><span class="c1">// 打印 100</span>
</code></pre></div>
<h4 id="memory-model">内存模型（Memory model）<a class="headerlink" href="#memory-model" title="Permanent link">¶</a></h4>
<p>C++11 引入了 C++ 的内存模型，这意味着库支持线程和原子操作。其中一些操作包括（但不限于）原子加载/存储、比较并交换、原子标志、promise、future、锁和条件变量。</p>
<p>参见：<a href="#stdthread"><code>std::thread</code></a></p>
<h4 id="stdasync">std::async<a class="headerlink" href="#stdasync" title="Permanent link">¶</a></h4>
<p><code>std::async</code> 以异步或延迟评估的方式运行给定的函数，然后返回一个 <code>std::future</code>，该 <code>std::future</code> 持有该函数调用的结果。</p>
<p>第一个参数是策略，可以是：</p>
<ol>
<li><code>std::launch::async | std::launch::deferred</code> 由实现决定是否执行异步执行或延迟评估。</li>
<li><code>std::launch::async</code> 在新线程上运行可调用对象。</li>
<li><code>std::launch::deferred</code> 在当前线程上执行延迟评估。</li>
</ol>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-64-1" id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-64-2" id="__codelineno-64-2" name="__codelineno-64-2"></a><span class="w">  </span><span class="cm">/* 在这里做一些事情，然后返回结果。 */</span>
<a href="#__codelineno-64-3" id="__codelineno-64-3" name="__codelineno-64-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span>
<a href="#__codelineno-64-4" id="__codelineno-64-4" name="__codelineno-64-4"></a><span class="p">}</span>
<a href="#__codelineno-64-5" id="__codelineno-64-5" name="__codelineno-64-5"></a>
<a href="#__codelineno-64-6" id="__codelineno-64-6" name="__codelineno-64-6"></a><span class="k">auto</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">async</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">launch</span><span class="o">::</span><span class="n">async</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="p">);</span><span class="w">  </span><span class="c1">// 创建一个异步任务</span>
<a href="#__codelineno-64-7" id="__codelineno-64-7" name="__codelineno-64-7"></a><span class="k">auto</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handle</span><span class="p">.</span><span class="n">get</span><span class="p">();</span><span class="w">  </span><span class="c1">// 等待结果</span>
</code></pre></div>
<h4 id="stdbeginend">std::begin/end<a class="headerlink" href="#stdbeginend" title="Permanent link">¶</a></h4>
<p><code>std::begin</code> 和 <code>std::end</code> 自由函数被添加用于通用地返回容器的开始和结束迭代器。这些函数也适用于没有 <code>begin</code> 和 <code>end</code> 成员函数的原始数组。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-65-1" id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-65-2" id="__codelineno-65-2" name="__codelineno-65-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">CountTwos</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">container</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-65-3" id="__codelineno-65-3" name="__codelineno-65-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">count_if</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">container</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">(</span><span class="n">container</span><span class="p">),</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-65-4" id="__codelineno-65-4" name="__codelineno-65-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a href="#__codelineno-65-5" id="__codelineno-65-5" name="__codelineno-65-5"></a><span class="w">  </span><span class="p">});</span>
<a href="#__codelineno-65-6" id="__codelineno-65-6" name="__codelineno-65-6"></a><span class="p">}</span>
<a href="#__codelineno-65-7" id="__codelineno-65-7" name="__codelineno-65-7"></a>
<a href="#__codelineno-65-8" id="__codelineno-65-8" name="__codelineno-65-8"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="mi">435</span><span class="p">,</span><span class="w"> </span><span class="mi">4543</span><span class="p">,</span><span class="w"> </span><span class="mi">534</span><span class="p">};</span>
<a href="#__codelineno-65-9" id="__codelineno-65-9" name="__codelineno-65-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">435</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">};</span>
<a href="#__codelineno-65-10" id="__codelineno-65-10" name="__codelineno-65-10"></a><span class="k">auto</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CountTwos</span><span class="p">(</span><span class="n">vec</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2</span>
<a href="#__codelineno-65-11" id="__codelineno-65-11" name="__codelineno-65-11"></a><span class="k">auto</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CountTwos</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span><span class="w">  </span><span class="c1">// 1</span>
</code></pre></div>
<h2 id="c14">C++14<a class="headerlink" href="#c14" title="Permanent link">¶</a></h2>
<h3 id="c14_1">C++14 语言特性<a class="headerlink" href="#c14_1" title="Permanent link">¶</a></h3>
<h4 id="binary-literals">二进制字面量（Binary literals）<a class="headerlink" href="#binary-literals" title="Permanent link">¶</a></h4>
<p>二进制字面量提供了一种方便的方式来表示以 2 为基数的数字。可以使用 <code>'</code> 分隔数字。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-66-1" id="__codelineno-66-1" name="__codelineno-66-1"></a><span class="mb">0b110</span><span class="w"> </span><span class="c1">// == 6</span>
<a href="#__codelineno-66-2" id="__codelineno-66-2" name="__codelineno-66-2"></a><span class="mb">0b1111'1111</span><span class="w"> </span><span class="c1">// == 255</span>
</code></pre></div>
<h4 id="lambda-generic-lambda-expressions">泛型 lambda 表达式（Generic lambda expressions）<a class="headerlink" href="#lambda-generic-lambda-expressions" title="Permanent link">¶</a></h4>
<p>C++14 允许在参数列表中使用 <code>auto</code> 类型说明符，从而启用多态 lambda。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-67-1" id="__codelineno-67-1" name="__codelineno-67-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">identity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">auto</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-67-2" id="__codelineno-67-2" name="__codelineno-67-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">identity</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 3</span>
<a href="#__codelineno-67-3" id="__codelineno-67-3" name="__codelineno-67-3"></a><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">identity</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span><span class="w"> </span><span class="c1">// == "foo"</span>
</code></pre></div>
<h4 id="lambda-lambda-capture-initializers">Lambda 捕获初始化器（Lambda capture initializers）<a class="headerlink" href="#lambda-lambda-capture-initializers" title="Permanent link">¶</a></h4>
<p>这允许使用任意表达式初始化 lambda 捕获。赋予捕获值的名称不需要与封闭范围内的任何变量相关，并且会在 lambda 内部引入一个新名称。初始化表达式在 lambda <em>创建</em>时求值（而不是在<em>调用</em>时求值）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-68-1" id="__codelineno-68-1" name="__codelineno-68-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">factory</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-68-2" id="__codelineno-68-2" name="__codelineno-68-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 返回 20</span>
<a href="#__codelineno-68-3" id="__codelineno-68-3" name="__codelineno-68-3"></a>
<a href="#__codelineno-68-4" id="__codelineno-68-4" name="__codelineno-68-4"></a><span class="k">auto</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-68-5" id="__codelineno-68-5" name="__codelineno-68-5"></a><span class="w">  </span><span class="c1">// 如果没有 'mutable' 则无法编译，因为我们在每次调用时都在修改 x</span>
<a href="#__codelineno-68-6" id="__codelineno-68-6" name="__codelineno-68-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="o">++</span><span class="p">;</span>
<a href="#__codelineno-68-7" id="__codelineno-68-7" name="__codelineno-68-7"></a><span class="p">};</span>
<a href="#__codelineno-68-8" id="__codelineno-68-8" name="__codelineno-68-8"></a><span class="k">auto</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generator</span><span class="p">();</span><span class="w"> </span><span class="c1">// == 0</span>
<a href="#__codelineno-68-9" id="__codelineno-68-9" name="__codelineno-68-9"></a><span class="k">auto</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generator</span><span class="p">();</span><span class="w"> </span><span class="c1">// == 1</span>
<a href="#__codelineno-68-10" id="__codelineno-68-10" name="__codelineno-68-10"></a><span class="k">auto</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generator</span><span class="p">();</span><span class="w"> </span><span class="c1">// == 2</span>
</code></pre></div>
<p>由于现在可以将值<em>移动</em>（或<em>转发</em>）到 lambda 中，这些值以前只能通过复制或引用捕获，我们现在可以在 lambda 中按值捕获仅能移动的类型。请注意，在下面的示例中，<code>task2</code> 的捕获列表中的 <code>p</code> 是 lambda 内部的一个新变量，而不是指原始的 <code>p</code>。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-69-1" id="__codelineno-69-1" name="__codelineno-69-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a href="#__codelineno-69-2" id="__codelineno-69-2" name="__codelineno-69-2"></a>
<a href="#__codelineno-69-3" id="__codelineno-69-3" name="__codelineno-69-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">task1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 错误：std::unique_ptr 不能被复制</span>
<a href="#__codelineno-69-4" id="__codelineno-69-4" name="__codelineno-69-4"></a><span class="c1">// vs.</span>
<a href="#__codelineno-69-5" id="__codelineno-69-5" name="__codelineno-69-5"></a><span class="k">auto</span><span class="w"> </span><span class="n">task2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">p</span><span class="p">)]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确：p 通过移动构造到闭包对象中</span>
<a href="#__codelineno-69-6" id="__codelineno-69-6" name="__codelineno-69-6"></a><span class="c1">// 原始的 p 在创建 task2 后为空</span>
</code></pre></div>
<p>使用这种方式，引用捕获的名称可以与被引用的变量不同。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-70-1" id="__codelineno-70-1" name="__codelineno-70-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a href="#__codelineno-70-2" id="__codelineno-70-2" name="__codelineno-70-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-70-3" id="__codelineno-70-3" name="__codelineno-70-3"></a><span class="w">  </span><span class="o">++</span><span class="n">r</span><span class="p">;</span>
<a href="#__codelineno-70-4" id="__codelineno-70-4" name="__codelineno-70-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a href="#__codelineno-70-5" id="__codelineno-70-5" name="__codelineno-70-5"></a><span class="p">};</span>
<a href="#__codelineno-70-6" id="__codelineno-70-6" name="__codelineno-70-6"></a><span class="n">f</span><span class="p">();</span><span class="w"> </span><span class="c1">// 将 x 设置为 2 并返回 12</span>
</code></pre></div>
<h4 id="return-type-deduction">返回类型推导（Return type deduction）<a class="headerlink" href="#return-type-deduction" title="Permanent link">¶</a></h4>
<p>在 C++14 中使用 <code>auto</code> 返回类型，编译器会尝试为你推导类型。对于 lambda，现在可以使用 <code>auto</code> 推导其返回类型，这使得返回推导出的引用或右值引用成为可能。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-71-1" id="__codelineno-71-1" name="__codelineno-71-1"></a><span class="c1">// 推导返回类型为 `int`。</span>
<a href="#__codelineno-71-2" id="__codelineno-71-2" name="__codelineno-71-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-71-3" id="__codelineno-71-3" name="__codelineno-71-3"></a><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a href="#__codelineno-71-4" id="__codelineno-71-4" name="__codelineno-71-4"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-72-1" id="__codelineno-72-1" name="__codelineno-72-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-72-2" id="__codelineno-72-2" name="__codelineno-72-2"></a><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-72-3" id="__codelineno-72-3" name="__codelineno-72-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<a href="#__codelineno-72-4" id="__codelineno-72-4" name="__codelineno-72-4"></a><span class="p">}</span>
<a href="#__codelineno-72-5" id="__codelineno-72-5" name="__codelineno-72-5"></a>
<a href="#__codelineno-72-6" id="__codelineno-72-6" name="__codelineno-72-6"></a><span class="c1">// 返回推导出的类型的引用。</span>
<a href="#__codelineno-72-7" id="__codelineno-72-7" name="__codelineno-72-7"></a><span class="k">auto</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-72-8" id="__codelineno-72-8" name="__codelineno-72-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-72-9" id="__codelineno-72-9" name="__codelineno-72-9"></a><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"> </span><span class="c1">// 引用 `y`</span>
</code></pre></div>
<h4 id="decltypeauto">decltype(auto)<a class="headerlink" href="#decltypeauto" title="Permanent link">¶</a></h4>
<p><code>decltype(auto)</code> 类型说明符也像 <code>auto</code> 一样推导类型。然而，它在保留引用和 cv 限定符的同时推导返回类型，而 <code>auto</code> 不会。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-73-1" id="__codelineno-73-1" name="__codelineno-73-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-73-2" id="__codelineno-73-2" name="__codelineno-73-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// int</span>
<a href="#__codelineno-73-3" id="__codelineno-73-3" name="__codelineno-73-3"></a><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// const int</span>
<a href="#__codelineno-73-4" id="__codelineno-73-4" name="__codelineno-73-4"></a><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-73-5" id="__codelineno-73-5" name="__codelineno-73-5"></a><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a href="#__codelineno-73-6" id="__codelineno-73-6" name="__codelineno-73-6"></a><span class="k">auto</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y1</span><span class="p">;</span><span class="w"> </span><span class="c1">// int</span>
<a href="#__codelineno-73-7" id="__codelineno-73-7" name="__codelineno-73-7"></a><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="n">y3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y1</span><span class="p">;</span><span class="w"> </span><span class="c1">// int&amp;</span>
<a href="#__codelineno-73-8" id="__codelineno-73-8" name="__codelineno-73-8"></a><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-73-9" id="__codelineno-73-9" name="__codelineno-73-9"></a><span class="k">auto</span><span class="w"> </span><span class="n">z1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="c1">// int</span>
<a href="#__codelineno-73-10" id="__codelineno-73-10" name="__codelineno-73-10"></a><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="n">z2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="c1">// int&amp;&amp;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-74-1" id="__codelineno-74-1" name="__codelineno-74-1"></a><span class="c1">// 注意：在泛型代码中特别有用！</span>
<a href="#__codelineno-74-2" id="__codelineno-74-2" name="__codelineno-74-2"></a>
<a href="#__codelineno-74-3" id="__codelineno-74-3" name="__codelineno-74-3"></a><span class="c1">// 返回类型为 `int`。</span>
<a href="#__codelineno-74-4" id="__codelineno-74-4" name="__codelineno-74-4"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-74-5" id="__codelineno-74-5" name="__codelineno-74-5"></a><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a href="#__codelineno-74-6" id="__codelineno-74-6" name="__codelineno-74-6"></a><span class="p">}</span>
<a href="#__codelineno-74-7" id="__codelineno-74-7" name="__codelineno-74-7"></a>
<a href="#__codelineno-74-8" id="__codelineno-74-8" name="__codelineno-74-8"></a><span class="c1">// 返回类型为 `const int&amp;`。</span>
<a href="#__codelineno-74-9" id="__codelineno-74-9" name="__codelineno-74-9"></a><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-74-10" id="__codelineno-74-10" name="__codelineno-74-10"></a><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a href="#__codelineno-74-11" id="__codelineno-74-11" name="__codelineno-74-11"></a><span class="p">}</span>
<a href="#__codelineno-74-12" id="__codelineno-74-12" name="__codelineno-74-12"></a>
<a href="#__codelineno-74-13" id="__codelineno-74-13" name="__codelineno-74-13"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-74-14" id="__codelineno-74-14" name="__codelineno-74-14"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">&gt;::</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a href="#__codelineno-74-15" id="__codelineno-74-15" name="__codelineno-74-15"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">&gt;::</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a href="#__codelineno-74-16" id="__codelineno-74-16" name="__codelineno-74-16"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_same</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">&gt;::</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>
<p>参见：<a href="#decltype"><code>decltype (C++11)</code></a>.</p>
<h4 id="constexpr-relaxing-constraints-on-constexpr-functions">放宽对 constexpr 函数的限制（Relaxing constraints on constexpr functions）<a class="headerlink" href="#constexpr-relaxing-constraints-on-constexpr-functions" title="Permanent link">¶</a></h4>
<p>在 C++11 中，<code>constexpr</code> 函数体只能包含非常有限的语法集，包括（但不限于）：<code>typedef</code>、<code>using</code> 和一个单一的 <code>return</code> 语句。在 C++14 中，允许的语法集大大扩展，涵盖了最常见的语法，如 <code>if</code> 语句、多个 <code>return</code>、循环等。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-75-1" id="__codelineno-75-1" name="__codelineno-75-1"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">factorial</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-75-2" id="__codelineno-75-2" name="__codelineno-75-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-75-3" id="__codelineno-75-3" name="__codelineno-75-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a href="#__codelineno-75-4" id="__codelineno-75-4" name="__codelineno-75-4"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-75-5" id="__codelineno-75-5" name="__codelineno-75-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a href="#__codelineno-75-6" id="__codelineno-75-6" name="__codelineno-75-6"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-75-7" id="__codelineno-75-7" name="__codelineno-75-7"></a><span class="p">}</span>
<a href="#__codelineno-75-8" id="__codelineno-75-8" name="__codelineno-75-8"></a><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 120</span>
</code></pre></div>
<h4 id="variable-templates">变量模板（Variable templates）<a class="headerlink" href="#variable-templates" title="Permanent link">¶</a></h4>
<p>C++14 允许变量进行模板化：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-76-1" id="__codelineno-76-1" name="__codelineno-76-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-76-2" id="__codelineno-76-2" name="__codelineno-76-2"></a><span class="k">constexpr</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">(</span><span class="mf">3.1415926535897932385</span><span class="p">);</span>
<a href="#__codelineno-76-3" id="__codelineno-76-3" name="__codelineno-76-3"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-76-4" id="__codelineno-76-4" name="__codelineno-76-4"></a><span class="k">constexpr</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">e</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">(</span><span class="mf">2.7182818284590452353</span><span class="p">);</span>
</code></pre></div>
<h4 id="deprecated-attribute">[[deprecated]] attribute<a class="headerlink" href="#deprecated-attribute" title="Permanent link">¶</a></h4>
<p>C++14 引入了 <code>[[deprecated]]</code> 属性，以表明某个单元（函数、类等）已不推荐使用，并可能产生编译警告。如果提供了原因，它将包含在警告信息中。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-77-1" id="__codelineno-77-1" name="__codelineno-77-1"></a><span class="p">[[</span><span class="n">deprecated</span><span class="p">]]</span>
<a href="#__codelineno-77-2" id="__codelineno-77-2" name="__codelineno-77-2"></a><span class="kt">void</span><span class="w"> </span><span class="n">old_method</span><span class="p">();</span>
<a href="#__codelineno-77-3" id="__codelineno-77-3" name="__codelineno-77-3"></a><span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="s">"Use new_method instead"</span><span class="p">)]]</span>
<a href="#__codelineno-77-4" id="__codelineno-77-4" name="__codelineno-77-4"></a><span class="kt">void</span><span class="w"> </span><span class="n">legacy_method</span><span class="p">();</span>
</code></pre></div>
<h3 id="c14_2">C++14 库特性<a class="headerlink" href="#c14_2" title="Permanent link">¶</a></h3>
<h4 id="user-defined-literals-for-standard-library-types">标准库类型的用户定义字面量（User-defined literals for standard library types）<a class="headerlink" href="#user-defined-literals-for-standard-library-types" title="Permanent link">¶</a></h4>
<p>新的用户定义字面量适用于标准库类型，包括适用于 <code>chrono</code> 和 <code>basic_string</code> 的新的内置字面量。这些字面量可以是 <code>constexpr</code>，意味着它们可以在编译时使用。对这些字面量的一些使用包括编译时整数解析、二进制字面量和虚数字面量。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-78-1" id="__codelineno-78-1" name="__codelineno-78-1"></a><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="o">::</span><span class="nn">chrono_literals</span><span class="p">;</span>
<a href="#__codelineno-78-2" id="__codelineno-78-2" name="__codelineno-78-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="n">h</span><span class="p">;</span>
<a href="#__codelineno-78-3" id="__codelineno-78-3" name="__codelineno-78-3"></a><span class="n">day</span><span class="p">.</span><span class="n">count</span><span class="p">();</span><span class="w"> </span><span class="c1">// == 24</span>
<a href="#__codelineno-78-4" id="__codelineno-78-4" name="__codelineno-78-4"></a><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">minutes</span><span class="o">&gt;</span><span class="p">(</span><span class="n">day</span><span class="p">).</span><span class="n">count</span><span class="p">();</span><span class="w"> </span><span class="c1">// == 1440</span>
</code></pre></div>
<h4 id="compile-time-integer-sequences">编译时整数序列（Compile-time integer sequences）<a class="headerlink" href="#compile-time-integer-sequences" title="Permanent link">¶</a></h4>
<p>类模板 <code>std::integer_sequence</code> 表示一个编译时整数序列。在其之上构建了一些辅助类：</p>
<ul>
<li><code>std::make_integer_sequence&lt;T, N&gt;</code>：创建一个从 <code>0</code> 到 <code>N - 1</code> 的序列，类型为 <code>T</code>。</li>
<li><code>std::index_sequence_for&lt;T...&gt;</code>：将模板参数包转换为一个整数序列。</li>
</ul>
<p>将数组转换为元组：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-79-1" id="__codelineno-79-1" name="__codelineno-79-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Array</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">...</span><span class="w"> </span><span class="n">I</span><span class="o">&gt;</span>
<a href="#__codelineno-79-2" id="__codelineno-79-2" name="__codelineno-79-2"></a><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="n">a2t_impl</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Array</span><span class="o">&amp;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integer_sequence</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">,</span><span class="w"> </span><span class="n">I</span><span class="p">...</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-79-3" id="__codelineno-79-3" name="__codelineno-79-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">I</span><span class="p">]...);</span>
<a href="#__codelineno-79-4" id="__codelineno-79-4" name="__codelineno-79-4"></a><span class="p">}</span>
<a href="#__codelineno-79-5" id="__codelineno-79-5" name="__codelineno-79-5"></a>
<a href="#__codelineno-79-6" id="__codelineno-79-6" name="__codelineno-79-6"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Indices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_index_sequence</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;&gt;</span>
<a href="#__codelineno-79-7" id="__codelineno-79-7" name="__codelineno-79-7"></a><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="n">a2t</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-79-8" id="__codelineno-79-8" name="__codelineno-79-8"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a2t_impl</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Indices</span><span class="p">());</span>
<a href="#__codelineno-79-9" id="__codelineno-79-9" name="__codelineno-79-9"></a><span class="p">}</span>
</code></pre></div>
<h4 id="stdmake_unique">std::make_unique<a class="headerlink" href="#stdmake_unique" title="Permanent link">¶</a></h4>
<p><code>std::make_unique</code> 是创建 <code>std::unique_ptr</code> 实例的推荐方法，原因如下：</p>
<ul>
<li>避免使用 <code>new</code> 操作符。</li>
<li>防止在指定指针持有的底层类型时重复代码。</li>
<li>最重要的是，它提供了异常安全性。假设我们像这样调用函数 <code>foo</code>：</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-80-1" id="__codelineno-80-1" name="__codelineno-80-1"></a><span class="n">foo</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">T</span><span class="p">{}},</span><span class="w"> </span><span class="n">function_that_throws</span><span class="p">(),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="n">T</span><span class="p">{}});</span>
</code></pre></div>
<p>编译器可以先调用 <code>new T{}</code>，然后调用 <code>function_that_throws()</code>，然后是... 由于我们在第一次构造 <code>T</code> 时在堆上分配了数据，我们在这里引入了内存泄漏。使用 <code>std::make_unique</code>，我们获得了异常安全性：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-81-1" id="__codelineno-81-1" name="__codelineno-81-1"></a><span class="n">foo</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"> </span><span class="n">function_that_throws</span><span class="p">(),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">());</span>
</code></pre></div>
<p>参见<a href="#smart-pointers">智能指针（C++11）</a>部分，了解有关 <code>std::unique_ptr</code> 和 <code>std::shared_ptr</code> 的更多信息。</p>
<h2 id="c17">C++17<a class="headerlink" href="#c17" title="Permanent link">¶</a></h2>
<h3 id="c17_1">C++17 语言特性<a class="headerlink" href="#c17_1" title="Permanent link">¶</a></h3>
<h4 id="template-argument-deduction-for-class-templates">类模板的模板参数推导（Template argument deduction for class templates）<a class="headerlink" href="#template-argument-deduction-for-class-templates" title="Permanent link">¶</a></h4>
<p>自动模板参数推导类似于函数的模板参数推导，但现在也包括类构造函数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-82-1" id="__codelineno-82-1" name="__codelineno-82-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span>
<a href="#__codelineno-82-2" id="__codelineno-82-2" name="__codelineno-82-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">MyContainer</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-82-3" id="__codelineno-82-3" name="__codelineno-82-3"></a><span class="w">  </span><span class="n">T</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<a href="#__codelineno-82-4" id="__codelineno-82-4" name="__codelineno-82-4"></a><span class="w">  </span><span class="n">MyContainer</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">val</span><span class="p">{}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-82-5" id="__codelineno-82-5" name="__codelineno-82-5"></a><span class="w">  </span><span class="n">MyContainer</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">val</span><span class="p">{</span><span class="n">val</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-82-6" id="__codelineno-82-6" name="__codelineno-82-6"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-82-7" id="__codelineno-82-7" name="__codelineno-82-7"></a><span class="p">};</span>
<a href="#__codelineno-82-8" id="__codelineno-82-8" name="__codelineno-82-8"></a><span class="n">MyContainer</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确，推导为 MyContainer&lt;int&gt;</span>
<a href="#__codelineno-82-9" id="__codelineno-82-9" name="__codelineno-82-9"></a><span class="n">MyContainer</span><span class="w"> </span><span class="n">c2</span><span class="p">;</span><span class="w"> </span><span class="c1">// 正确，推导为 MyContainer&lt;float&gt;</span>
</code></pre></div>
<h4 id="auto-declaring-non-type-template-parameters-with-auto">使用 auto 声明非类型模板参数（Declaring non-type template parameters with auto）<a class="headerlink" href="#auto-declaring-non-type-template-parameters-with-auto" title="Permanent link">¶</a></h4>
<p class="annotate">遵循 <code>auto</code> 的推导规则，同时尊重非类型模板参数列表中的可允许类型(1)，模板参数可以从其参数的类型中推导出来：</p>
<ol>
<li>例如，你不能使用 <code>double</code> 作为模板参数类型，这也使得使用 <code>auto</code> 进行这种推导是无效的。</li>
</ol>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-83-1" id="__codelineno-83-1" name="__codelineno-83-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">auto</span><span class="p">...</span><span class="w"> </span><span class="n">seq</span><span class="o">&gt;</span>
<a href="#__codelineno-83-2" id="__codelineno-83-2" name="__codelineno-83-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">my_integer_sequence</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-83-3" id="__codelineno-83-3" name="__codelineno-83-3"></a><span class="w">  </span><span class="c1">// 实现 ...</span>
<a href="#__codelineno-83-4" id="__codelineno-83-4" name="__codelineno-83-4"></a><span class="p">};</span>
<a href="#__codelineno-83-5" id="__codelineno-83-5" name="__codelineno-83-5"></a>
<a href="#__codelineno-83-6" id="__codelineno-83-6" name="__codelineno-83-6"></a><span class="c1">// 显式地将类型 `int` 作为模板参数传递。</span>
<a href="#__codelineno-83-7" id="__codelineno-83-7" name="__codelineno-83-7"></a><span class="k">auto</span><span class="w"> </span><span class="n">seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">integer_sequence</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;</span><span class="p">();</span>
<a href="#__codelineno-83-8" id="__codelineno-83-8" name="__codelineno-83-8"></a><span class="c1">// 类型被推导为 `int`。</span>
<a href="#__codelineno-83-9" id="__codelineno-83-9" name="__codelineno-83-9"></a><span class="k">auto</span><span class="w"> </span><span class="n">seq2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_integer_sequence</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;</span><span class="p">();</span>
</code></pre></div>
<h4 id="folding-expressions">折叠表达式（Folding expressions）<a class="headerlink" href="#folding-expressions" title="Permanent link">¶</a></h4>
<p>折叠表达式通过一个二元运算符对模板参数包进行折叠。</p>
<ul>
<li>形如 <code>(... op e)</code> 或 <code>(e op ...)</code> 的表达式，其中 <code>op</code> 是一个折叠操作符，<code>e</code> 是一个未展开的参数包，称为<em>一元折叠</em>。</li>
<li>形如 <code>(e1 op ... op e2)</code> 的表达式，其中 <code>op</code> 是折叠操作符，称为<em>二元折叠</em>。<code>e1</code> 或 <code>e2</code> 中的一个是未展开的参数包，但不能是两个都未展开。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-84-1" id="__codelineno-84-1" name="__codelineno-84-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a href="#__codelineno-84-2" id="__codelineno-84-2" name="__codelineno-84-2"></a><span class="kt">bool</span><span class="w"> </span><span class="n">logicalAnd</span><span class="p">(</span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-84-3" id="__codelineno-84-3" name="__codelineno-84-3"></a><span class="w">    </span><span class="c1">// 二元折叠。</span>
<a href="#__codelineno-84-4" id="__codelineno-84-4" name="__codelineno-84-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<a href="#__codelineno-84-5" id="__codelineno-84-5" name="__codelineno-84-5"></a><span class="p">}</span>
<a href="#__codelineno-84-6" id="__codelineno-84-6" name="__codelineno-84-6"></a><span class="kt">bool</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a href="#__codelineno-84-7" id="__codelineno-84-7" name="__codelineno-84-7"></a><span class="kt">bool</span><span class="o">&amp;</span><span class="w"> </span><span class="n">b2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a href="#__codelineno-84-8" id="__codelineno-84-8" name="__codelineno-84-8"></a><span class="n">logicalAnd</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">b2</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// == true</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-85-1" id="__codelineno-85-1" name="__codelineno-85-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a href="#__codelineno-85-2" id="__codelineno-85-2" name="__codelineno-85-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-85-3" id="__codelineno-85-3" name="__codelineno-85-3"></a><span class="w">    </span><span class="c1">// 一元折叠。</span>
<a href="#__codelineno-85-4" id="__codelineno-85-4" name="__codelineno-85-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(...</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<a href="#__codelineno-85-5" id="__codelineno-85-5" name="__codelineno-85-5"></a><span class="p">}</span>
<a href="#__codelineno-85-6" id="__codelineno-85-6" name="__codelineno-85-6"></a><span class="n">sum</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 6.0</span>
</code></pre></div>
<h4 id="auto-new-rules-for-auto-deduction-from-braced-init-list">使用大括号初始化列表时 auto 的新规则（New rules for auto deduction from braced-init-list）<a class="headerlink" href="#auto-new-rules-for-auto-deduction-from-braced-init-list" title="Permanent link">¶</a></h4>
<p>使用统一初始化语法时，<code>auto</code> 推导的更改。以前，<code>auto x {3};</code> 推导为 <code>std::initializer_list&lt;int&gt;</code>，现在推导为 <code>int</code>。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-86-1" id="__codelineno-86-1" name="__codelineno-86-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">};</span><span class="w"> </span><span class="c1">// 错误：不是单个元素</span>
<a href="#__codelineno-86-2" id="__codelineno-86-2" name="__codelineno-86-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">};</span><span class="w"> </span><span class="c1">// x2 是 std::initializer_list&lt;int&gt;</span>
<a href="#__codelineno-86-3" id="__codelineno-86-3" name="__codelineno-86-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">x3</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">};</span><span class="w"> </span><span class="c1">// x3 是 int</span>
<a href="#__codelineno-86-4" id="__codelineno-86-4" name="__codelineno-86-4"></a><span class="k">auto</span><span class="w"> </span><span class="n">x4</span><span class="w"> </span><span class="p">{</span><span class="mf">3.0</span><span class="p">};</span><span class="w"> </span><span class="c1">// x4 是 double</span>
</code></pre></div>
<h4 id="constexpr-lambda-constexpr-lambda">constexpr lambda 表达式（constexpr lambda）<a class="headerlink" href="#constexpr-lambda-constexpr-lambda" title="Permanent link">¶</a></h4>
<p>使用 <code>constexpr</code> 的编译时 lambda 表达式。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-87-1" id="__codelineno-87-1" name="__codelineno-87-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">identity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-87-2" id="__codelineno-87-2" name="__codelineno-87-2"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">identity</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">123</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-88-1" id="__codelineno-88-1" name="__codelineno-88-1"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-88-2" id="__codelineno-88-2" name="__codelineno-88-2"></a><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-88-3" id="__codelineno-88-3" name="__codelineno-88-3"></a><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-88-4" id="__codelineno-88-4" name="__codelineno-88-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">L</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">R</span><span class="p">();</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-88-5" id="__codelineno-88-5" name="__codelineno-88-5"></a><span class="p">};</span>
<a href="#__codelineno-88-6" id="__codelineno-88-6" name="__codelineno-88-6"></a>
<a href="#__codelineno-88-7" id="__codelineno-88-7" name="__codelineno-88-7"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-89-1" id="__codelineno-89-1" name="__codelineno-89-1"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">addOne</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-89-2" id="__codelineno-89-2" name="__codelineno-89-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}();</span>
<a href="#__codelineno-89-3" id="__codelineno-89-3" name="__codelineno-89-3"></a><span class="p">}</span>
<a href="#__codelineno-89-4" id="__codelineno-89-4" name="__codelineno-89-4"></a>
<a href="#__codelineno-89-5" id="__codelineno-89-5" name="__codelineno-89-5"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">addOne</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</code></pre></div>
<h4 id="lambda-this-lambda-capture-this-by-value">Lambda 捕获 this 的值（Lambda capture this by value）<a class="headerlink" href="#lambda-this-lambda-capture-this-by-value" title="Permanent link">¶</a></h4>
<p>在 lambda 的环境中捕获 <code>this</code> 以前只能通过引用来捕获。一个示例是异步代码使用回调函数，这些回调函数要求对象在其生命周期内可用，并且可能超出其生命周期。<code>*this</code>（C++17）现在将创建当前对象的副本，而 <code>this</code>（C++11）继续通过引用捕获。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-90-1" id="__codelineno-90-1" name="__codelineno-90-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">MyObj</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-90-2" id="__codelineno-90-2" name="__codelineno-90-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">};</span>
<a href="#__codelineno-90-3" id="__codelineno-90-3" name="__codelineno-90-3"></a><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">getValueCopy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-90-4" id="__codelineno-90-4" name="__codelineno-90-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="k">this</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-90-5" id="__codelineno-90-5" name="__codelineno-90-5"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-90-6" id="__codelineno-90-6" name="__codelineno-90-6"></a><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">getValueRef</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-90-7" id="__codelineno-90-7" name="__codelineno-90-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="k">this</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-90-8" id="__codelineno-90-8" name="__codelineno-90-8"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-90-9" id="__codelineno-90-9" name="__codelineno-90-9"></a><span class="p">};</span>
<a href="#__codelineno-90-10" id="__codelineno-90-10" name="__codelineno-90-10"></a><span class="n">MyObj</span><span class="w"> </span><span class="n">mo</span><span class="p">;</span>
<a href="#__codelineno-90-11" id="__codelineno-90-11" name="__codelineno-90-11"></a><span class="k">auto</span><span class="w"> </span><span class="n">valueCopy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mo</span><span class="p">.</span><span class="n">getValueCopy</span><span class="p">();</span>
<a href="#__codelineno-90-12" id="__codelineno-90-12" name="__codelineno-90-12"></a><span class="k">auto</span><span class="w"> </span><span class="n">valueRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mo</span><span class="p">.</span><span class="n">getValueRef</span><span class="p">();</span>
<a href="#__codelineno-90-13" id="__codelineno-90-13" name="__codelineno-90-13"></a><span class="n">mo</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">321</span><span class="p">;</span>
<a href="#__codelineno-90-14" id="__codelineno-90-14" name="__codelineno-90-14"></a><span class="n">valueCopy</span><span class="p">();</span><span class="w"> </span><span class="c1">// 123</span>
<a href="#__codelineno-90-15" id="__codelineno-90-15" name="__codelineno-90-15"></a><span class="n">valueRef</span><span class="p">();</span><span class="w"> </span><span class="c1">// 321</span>
</code></pre></div>
<h4 id="inline-variables">内联变量（Inline variables）<a class="headerlink" href="#inline-variables" title="Permanent link">¶</a></h4>
<p><code>inline</code> 说明符可以应用于变量以及函数。一个被声明为 <code>inline</code> 的变量与被声明为 <code>inline</code> 的函数具有相同的语义。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-91-1" id="__codelineno-91-1" name="__codelineno-91-1"></a><span class="c1">// 使用 compiler explorer 的反汇编示例。</span>
<a href="#__codelineno-91-2" id="__codelineno-91-2" name="__codelineno-91-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-91-3" id="__codelineno-91-3" name="__codelineno-91-3"></a><span class="kr">inline</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="p">{</span><span class="mi">321</span><span class="p">};</span><span class="w"> </span><span class="c1">// mov esi, dword ptr [x1]</span>
<a href="#__codelineno-91-4" id="__codelineno-91-4" name="__codelineno-91-4"></a><span class="w">                      </span><span class="c1">// x1: .long 321</span>
<a href="#__codelineno-91-5" id="__codelineno-91-5" name="__codelineno-91-5"></a>
<a href="#__codelineno-91-6" id="__codelineno-91-6" name="__codelineno-91-6"></a><span class="n">S</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="p">{</span><span class="mi">123</span><span class="p">};</span><span class="w">        </span><span class="c1">// mov eax, dword ptr [.L_ZZ4mainE2x2]</span>
<a href="#__codelineno-91-7" id="__codelineno-91-7" name="__codelineno-91-7"></a><span class="w">                      </span><span class="c1">// mov dword ptr [rbp - 8], eax</span>
<a href="#__codelineno-91-8" id="__codelineno-91-8" name="__codelineno-91-8"></a><span class="w">                      </span><span class="c1">// .L_ZZ4mainE2x2: .long 123</span>
</code></pre></div>
<p>它还可以用于声明和定义静态成员变量，使其不需要在源文件中初始化。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-92-1" id="__codelineno-92-1" name="__codelineno-92-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-92-2" id="__codelineno-92-2" name="__codelineno-92-2"></a><span class="w">  </span><span class="n">S</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">{</span><span class="n">count</span><span class="o">++</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-92-3" id="__codelineno-92-3" name="__codelineno-92-3"></a><span class="w">  </span><span class="o">~</span><span class="n">S</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">count</span><span class="o">--</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-92-4" id="__codelineno-92-4" name="__codelineno-92-4"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<a href="#__codelineno-92-5" id="__codelineno-92-5" name="__codelineno-92-5"></a><span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 在类内声明并初始化 count 为 0</span>
<a href="#__codelineno-92-6" id="__codelineno-92-6" name="__codelineno-92-6"></a><span class="p">};</span>
</code></pre></div>
<h4 id="nested-namespaces">嵌套命名空间（Nested namespaces）<a class="headerlink" href="#nested-namespaces" title="Permanent link">¶</a></h4>
<p>使用命名空间解析操作符来创建嵌套的命名空间定义。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-93-1" id="__codelineno-93-1" name="__codelineno-93-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-93-2" id="__codelineno-93-2" name="__codelineno-93-2"></a><span class="w">  </span><span class="k">namespace</span><span class="w"> </span><span class="nn">B</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-93-3" id="__codelineno-93-3" name="__codelineno-93-3"></a><span class="w">    </span><span class="k">namespace</span><span class="w"> </span><span class="nn">C</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-93-4" id="__codelineno-93-4" name="__codelineno-93-4"></a><span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a href="#__codelineno-93-5" id="__codelineno-93-5" name="__codelineno-93-5"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-93-6" id="__codelineno-93-6" name="__codelineno-93-6"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-93-7" id="__codelineno-93-7" name="__codelineno-93-7"></a><span class="p">}</span>
</code></pre></div>
<p>上面的代码可以写成：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-94-1" id="__codelineno-94-1" name="__codelineno-94-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">A</span><span class="o">::</span><span class="nn">B</span><span class="o">::</span><span class="nn">C</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-94-2" id="__codelineno-94-2" name="__codelineno-94-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a href="#__codelineno-94-3" id="__codelineno-94-3" name="__codelineno-94-3"></a><span class="p">}</span>
<a href="#__codelineno-94-4" id="__codelineno-94-4" name="__codelineno-94-4"></a><span class="err">```</span><span class="n">tu</span>
<a href="#__codelineno-94-5" id="__codelineno-94-5" name="__codelineno-94-5"></a>
<a href="#__codelineno-94-6" id="__codelineno-94-6" name="__codelineno-94-6"></a><span class="cp">#### 结构化绑定（Structured bindings）</span>
<a href="#__codelineno-94-7" id="__codelineno-94-7" name="__codelineno-94-7"></a>
<a href="#__codelineno-94-8" id="__codelineno-94-8" name="__codelineno-94-8"></a><span class="n">提议用于解构初始化</span><span class="err">，</span><span class="n">这允许编写</span><span class="w"> </span><span class="err">`</span><span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">expr</span><span class="p">;</span><span class="err">`</span><span class="w"> </span><span class="n">这样的代码</span><span class="err">，</span><span class="n">其中</span><span class="w"> </span><span class="err">`</span><span class="n">expr</span><span class="err">`</span><span class="w"> </span><span class="n">的类型是一个元组样对象</span><span class="err">，</span><span class="n">其元素将绑定到变量</span><span class="w"> </span><span class="err">`</span><span class="n">x</span><span class="err">`、`</span><span class="n">y</span><span class="err">`</span><span class="w"> </span><span class="n">和</span><span class="w"> </span><span class="err">`</span><span class="n">z</span><span class="err">`（</span><span class="n">此构造声明</span><span class="err">）。</span><span class="o">*</span><span class="n">元组样对象</span><span class="o">*</span><span class="n">包括</span><span class="w"> </span><span class="err">`</span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="err">`，`</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="err">`，`</span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="err">`</span><span class="w"> </span><span class="n">和聚合结构</span><span class="err">。</span>
<a href="#__codelineno-94-9" id="__codelineno-94-9" name="__codelineno-94-9"></a>
<a href="#__codelineno-94-10" id="__codelineno-94-10" name="__codelineno-94-10"></a><span class="err">```</span><span class="n">c</span><span class="o">++</span>
<a href="#__codelineno-94-11" id="__codelineno-94-11" name="__codelineno-94-11"></a><span class="k">using</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>
<a href="#__codelineno-94-12" id="__codelineno-94-12" name="__codelineno-94-12"></a><span class="n">Coordinate</span><span class="w"> </span><span class="nf">origin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-94-13" id="__codelineno-94-13" name="__codelineno-94-13"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span>
<a href="#__codelineno-94-14" id="__codelineno-94-14" name="__codelineno-94-14"></a><span class="p">}</span>
<a href="#__codelineno-94-15" id="__codelineno-94-15" name="__codelineno-94-15"></a>
<a href="#__codelineno-94-16" id="__codelineno-94-16" name="__codelineno-94-16"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">origin</span><span class="p">();</span>
<a href="#__codelineno-94-17" id="__codelineno-94-17" name="__codelineno-94-17"></a><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// == 0</span>
<a href="#__codelineno-94-18" id="__codelineno-94-18" name="__codelineno-94-18"></a><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="c1">// == 0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-95-1" id="__codelineno-95-1" name="__codelineno-95-1"></a><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-95-2" id="__codelineno-95-2" name="__codelineno-95-2"></a><span class="w">  </span><span class="p">{</span><span class="s">"a"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span>
<a href="#__codelineno-95-3" id="__codelineno-95-3" name="__codelineno-95-3"></a><span class="w">  </span><span class="p">{</span><span class="s">"b"</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span>
<a href="#__codelineno-95-4" id="__codelineno-95-4" name="__codelineno-95-4"></a><span class="w">  </span><span class="p">{</span><span class="s">"c"</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span>
<a href="#__codelineno-95-5" id="__codelineno-95-5" name="__codelineno-95-5"></a><span class="p">};</span>
<a href="#__codelineno-95-6" id="__codelineno-95-6" name="__codelineno-95-6"></a>
<a href="#__codelineno-95-7" id="__codelineno-95-7" name="__codelineno-95-7"></a><span class="c1">// 通过引用解构。</span>
<a href="#__codelineno-95-8" id="__codelineno-95-8" name="__codelineno-95-8"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">mapping</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-95-9" id="__codelineno-95-9" name="__codelineno-95-9"></a><span class="w">  </span><span class="c1">// 对键和值进行操作</span>
<a href="#__codelineno-95-10" id="__codelineno-95-10" name="__codelineno-95-10"></a><span class="p">}</span>
</code></pre></div>
<h4 id="selection-statements-with-initializer">带初始化器的选择语句（Selection statements with initializer）<a class="headerlink" href="#selection-statements-with-initializer" title="Permanent link">¶</a></h4>
<p><code>if</code> 和 <code>switch</code> 语句的新版本，这些版本简化了常见的代码模式并帮助用户保持紧凑的作用域。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-96-1" id="__codelineno-96-1" name="__codelineno-96-1"></a><span class="p">{</span>
<a href="#__codelineno-96-2" id="__codelineno-96-2" name="__codelineno-96-2"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">mx</span><span class="p">);</span>
<a href="#__codelineno-96-3" id="__codelineno-96-3" name="__codelineno-96-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<a href="#__codelineno-96-4" id="__codelineno-96-4" name="__codelineno-96-4"></a><span class="p">}</span>
<a href="#__codelineno-96-5" id="__codelineno-96-5" name="__codelineno-96-5"></a><span class="c1">// 对比：</span>
<a href="#__codelineno-96-6" id="__codelineno-96-6" name="__codelineno-96-6"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">mx</span><span class="p">);</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-96-7" id="__codelineno-96-7" name="__codelineno-96-7"></a><span class="w">  </span><span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<a href="#__codelineno-96-8" id="__codelineno-96-8" name="__codelineno-96-8"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-97-1" id="__codelineno-97-1" name="__codelineno-97-1"></a><span class="n">Foo</span><span class="w"> </span><span class="nf">gadget</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
<a href="#__codelineno-97-2" id="__codelineno-97-2" name="__codelineno-97-2"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gadget</span><span class="p">.</span><span class="n">status</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-97-3" id="__codelineno-97-3" name="__codelineno-97-3"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="no">OK</span><span class="p">:</span><span class="w"> </span><span class="n">gadget</span><span class="p">.</span><span class="n">zip</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a href="#__codelineno-97-4" id="__codelineno-97-4" name="__codelineno-97-4"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="no">Bad</span><span class="p">:</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="n">BadFoo</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">message</span><span class="p">());</span>
<a href="#__codelineno-97-5" id="__codelineno-97-5" name="__codelineno-97-5"></a><span class="p">}</span>
<a href="#__codelineno-97-6" id="__codelineno-97-6" name="__codelineno-97-6"></a><span class="c1">// 对比：</span>
<a href="#__codelineno-97-7" id="__codelineno-97-7" name="__codelineno-97-7"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">Foo</span><span class="w"> </span><span class="n">gadget</span><span class="p">(</span><span class="n">args</span><span class="p">);</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gadget</span><span class="p">.</span><span class="n">status</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-97-8" id="__codelineno-97-8" name="__codelineno-97-8"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="no">OK</span><span class="p">:</span><span class="w"> </span><span class="n">gadget</span><span class="p">.</span><span class="n">zip</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a href="#__codelineno-97-9" id="__codelineno-97-9" name="__codelineno-97-9"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="no">Bad</span><span class="p">:</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="n">BadFoo</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">message</span><span class="p">());</span>
<a href="#__codelineno-97-10" id="__codelineno-97-10" name="__codelineno-97-10"></a><span class="p">}</span>
</code></pre></div>
<h4 id="constexpr-if">constexpr if<a class="headerlink" href="#constexpr-if" title="Permanent link">¶</a></h4>
<p>编写根据编译时条件实例化的代码。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-98-1" id="__codelineno-98-1" name="__codelineno-98-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-98-2" id="__codelineno-98-2" name="__codelineno-98-2"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isIntegral</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-98-3" id="__codelineno-98-3" name="__codelineno-98-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_integral</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-98-4" id="__codelineno-98-4" name="__codelineno-98-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a href="#__codelineno-98-5" id="__codelineno-98-5" name="__codelineno-98-5"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-98-6" id="__codelineno-98-6" name="__codelineno-98-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a href="#__codelineno-98-7" id="__codelineno-98-7" name="__codelineno-98-7"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-98-8" id="__codelineno-98-8" name="__codelineno-98-8"></a><span class="p">}</span>
<a href="#__codelineno-98-9" id="__codelineno-98-9" name="__codelineno-98-9"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">isIntegral</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<a href="#__codelineno-98-10" id="__codelineno-98-10" name="__codelineno-98-10"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">isIntegral</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<a href="#__codelineno-98-11" id="__codelineno-98-11" name="__codelineno-98-11"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">isIntegral</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a href="#__codelineno-98-12" id="__codelineno-98-12" name="__codelineno-98-12"></a><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{};</span>
<a href="#__codelineno-98-13" id="__codelineno-98-13" name="__codelineno-98-13"></a><span class="k">static_assert</span><span class="p">(</span><span class="n">isIntegral</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
</code></pre></div>
<h4 id="utf-8-utf-8-character-literals">UTF-8 字符字面量（UTF-8 character literals）<a class="headerlink" href="#utf-8-utf-8-character-literals" title="Permanent link">¶</a></h4>
<p>以 <code>u8</code> 开头的字符字面量是 <code>char</code> 类型的字符字面量。UTF-8 字符字面量的值等于其 ISO 10646 代码点值。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-99-1" id="__codelineno-99-1" name="__codelineno-99-1"></a><span class="kt">char</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sa">u8</span><span class="sc">'x'</span><span class="p">;</span>
</code></pre></div>
<h4 id="direct-list-initialization-of-enums">枚举的直接列表初始化（Direct list initialization of enums）<a class="headerlink" href="#direct-list-initialization-of-enums" title="Permanent link">¶</a></h4>
<p>枚举现在可以使用大括号语法初始化。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-100-1" id="__codelineno-100-1" name="__codelineno-100-1"></a><span class="k">enum</span><span class="w"> </span><span class="nc">byte</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">{};</span>
<a href="#__codelineno-100-2" id="__codelineno-100-2" name="__codelineno-100-2"></a><span class="n">byte</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确</span>
<a href="#__codelineno-100-3" id="__codelineno-100-3" name="__codelineno-100-3"></a><span class="n">byte</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">{</span><span class="mi">-1</span><span class="p">};</span><span class="w"> </span><span class="c1">// 错误</span>
<a href="#__codelineno-100-4" id="__codelineno-100-4" name="__codelineno-100-4"></a><span class="n">byte</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">byte</span><span class="p">{</span><span class="mi">1</span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确</span>
<a href="#__codelineno-100-5" id="__codelineno-100-5" name="__codelineno-100-5"></a><span class="n">byte</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">byte</span><span class="p">{</span><span class="mi">256</span><span class="p">};</span><span class="w"> </span><span class="c1">// 错误</span>
</code></pre></div>
<h4 id="fallthrough-nodiscard-maybe_unused-attributes">[[fallthrough]], [[nodiscard]], [[maybe_unused]] attributes<a class="headerlink" href="#fallthrough-nodiscard-maybe_unused-attributes" title="Permanent link">¶</a></h4>
<p>C++17 引入了三个新的属性：<code>[[fallthrough]]</code>、<code>[[nodiscard]]</code> 和 <code>[[maybe_unused]]</code>。</p>
<ul>
<li><code>[[fallthrough]]</code> 表示在 switch 语句中进行穿透是有意的行为。此属性只能用于 switch 语句中，必须放在下一个 case/default 标签之前。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-101-1" id="__codelineno-101-1" name="__codelineno-101-1"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-101-2" id="__codelineno-101-2" name="__codelineno-101-2"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span>
<a href="#__codelineno-101-3" id="__codelineno-101-3" name="__codelineno-101-3"></a><span class="w">    </span><span class="c1">// ...</span>
<a href="#__codelineno-101-4" id="__codelineno-101-4" name="__codelineno-101-4"></a><span class="w">    </span><span class="p">[[</span><span class="n">fallthrough</span><span class="p">]];</span>
<a href="#__codelineno-101-5" id="__codelineno-101-5" name="__codelineno-101-5"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span>
<a href="#__codelineno-101-6" id="__codelineno-101-6" name="__codelineno-101-6"></a><span class="w">    </span><span class="c1">// ...</span>
<a href="#__codelineno-101-7" id="__codelineno-101-7" name="__codelineno-101-7"></a><span class="w">    </span><span class="k">break</span><span class="p">;</span>
<a href="#__codelineno-101-8" id="__codelineno-101-8" name="__codelineno-101-8"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span>
<a href="#__codelineno-101-9" id="__codelineno-101-9" name="__codelineno-101-9"></a><span class="w">    </span><span class="c1">// ...</span>
<a href="#__codelineno-101-10" id="__codelineno-101-10" name="__codelineno-101-10"></a><span class="w">    </span><span class="p">[[</span><span class="n">fallthrough</span><span class="p">]];</span>
<a href="#__codelineno-101-11" id="__codelineno-101-11" name="__codelineno-101-11"></a><span class="w">  </span><span class="k">default</span><span class="o">:</span>
<a href="#__codelineno-101-12" id="__codelineno-101-12" name="__codelineno-101-12"></a><span class="w">    </span><span class="c1">// ...</span>
<a href="#__codelineno-101-13" id="__codelineno-101-13" name="__codelineno-101-13"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li><code>[[nodiscard]]</code> 当一个函数或类具有此属性且其返回值被丢弃时，会发出警告。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-102-1" id="__codelineno-102-1" name="__codelineno-102-1"></a><span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">do_something</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-102-2" id="__codelineno-102-2" name="__codelineno-102-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">is_success</span><span class="p">;</span><span class="w"> </span><span class="c1">// true 表示成功，false 表示失败</span>
<a href="#__codelineno-102-3" id="__codelineno-102-3" name="__codelineno-102-3"></a><span class="p">}</span>
<a href="#__codelineno-102-4" id="__codelineno-102-4" name="__codelineno-102-4"></a>
<a href="#__codelineno-102-5" id="__codelineno-102-5" name="__codelineno-102-5"></a><span class="n">do_something</span><span class="p">();</span><span class="w"> </span><span class="c1">// 警告: 忽略了 'bool do_something()' 的返回值，</span>
<a href="#__codelineno-102-6" id="__codelineno-102-6" name="__codelineno-102-6"></a><span class="w">                </span><span class="c1">// 声明时带有 'nodiscard' 属性</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-103-1" id="__codelineno-103-1" name="__codelineno-103-1"></a><span class="c1">// 只有当 `error_info` 被按值返回时才发出警告。</span>
<a href="#__codelineno-103-2" id="__codelineno-103-2" name="__codelineno-103-2"></a><span class="k">struct</span><span class="w"> </span><span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span><span class="w"> </span><span class="n">error_info</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-103-3" id="__codelineno-103-3" name="__codelineno-103-3"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-103-4" id="__codelineno-103-4" name="__codelineno-103-4"></a><span class="p">};</span>
<a href="#__codelineno-103-5" id="__codelineno-103-5" name="__codelineno-103-5"></a>
<a href="#__codelineno-103-6" id="__codelineno-103-6" name="__codelineno-103-6"></a><span class="n">error_info</span><span class="w"> </span><span class="nf">do_something</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-103-7" id="__codelineno-103-7" name="__codelineno-103-7"></a><span class="w">  </span><span class="n">error_info</span><span class="w"> </span><span class="n">ei</span><span class="p">;</span>
<a href="#__codelineno-103-8" id="__codelineno-103-8" name="__codelineno-103-8"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-103-9" id="__codelineno-103-9" name="__codelineno-103-9"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ei</span><span class="p">;</span>
<a href="#__codelineno-103-10" id="__codelineno-103-10" name="__codelineno-103-10"></a><span class="p">}</span>
<a href="#__codelineno-103-11" id="__codelineno-103-11" name="__codelineno-103-11"></a>
<a href="#__codelineno-103-12" id="__codelineno-103-12" name="__codelineno-103-12"></a><span class="n">do_something</span><span class="p">();</span><span class="w"> </span><span class="c1">// 警告: 忽略了类型 'error_info' 的返回值，</span>
<a href="#__codelineno-103-13" id="__codelineno-103-13" name="__codelineno-103-13"></a><span class="w">                </span><span class="c1">// 声明时带有 'nodiscard' 属性</span>
</code></pre></div>
<ul>
<li><code>[[maybe_unused]]</code> 表示变量或参数可能未使用且这是有意的。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-104-1" id="__codelineno-104-1" name="__codelineno-104-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">my_callback</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="p">[[</span><span class="n">maybe_unused</span><span class="p">]]</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-104-2" id="__codelineno-104-2" name="__codelineno-104-2"></a><span class="w">  </span><span class="c1">// 不关心 `msg` 是否为错误消息，只记录它。</span>
<a href="#__codelineno-104-3" id="__codelineno-104-3" name="__codelineno-104-3"></a><span class="w">  </span><span class="n">log</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
<a href="#__codelineno-104-4" id="__codelineno-104-4" name="__codelineno-104-4"></a><span class="p">}</span>
</code></pre></div>
<h4 id="__has_include">__has_include<a class="headerlink" href="#__has_include" title="Permanent link">¶</a></h4>
<p><code>__has_include (operand)</code> 运算符可以在 <code>#if</code> 和 <code>#elif</code> 表达式中使用，以检查头文件或源文件（<code>operand</code>）是否可供包含。</p>
<p>一个使用案例是使用两种工作方式相同的库，如果系统上找不到首选的库，则使用备份/实验性库。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-105-1" id="__codelineno-105-1" name="__codelineno-105-1"></a><span class="cp">##ifdef __has_include</span>
<a href="#__codelineno-105-2" id="__codelineno-105-2" name="__codelineno-105-2"></a><span class="cp">##  if __has_include(&lt;optional&gt;)</span>
<a href="#__codelineno-105-3" id="__codelineno-105-3" name="__codelineno-105-3"></a><span class="cp">##    include &lt;optional&gt;</span>
<a href="#__codelineno-105-4" id="__codelineno-105-4" name="__codelineno-105-4"></a><span class="cp">##    define have_optional 1</span>
<a href="#__codelineno-105-5" id="__codelineno-105-5" name="__codelineno-105-5"></a><span class="cp">##  elif __has_include(&lt;experimental/optional&gt;)</span>
<a href="#__codelineno-105-6" id="__codelineno-105-6" name="__codelineno-105-6"></a><span class="cp">##    include &lt;experimental/optional&gt;</span>
<a href="#__codelineno-105-7" id="__codelineno-105-7" name="__codelineno-105-7"></a><span class="cp">##    define have_optional 1</span>
<a href="#__codelineno-105-8" id="__codelineno-105-8" name="__codelineno-105-8"></a><span class="cp">##    define experimental_optional</span>
<a href="#__codelineno-105-9" id="__codelineno-105-9" name="__codelineno-105-9"></a><span class="cp">##  else</span>
<a href="#__codelineno-105-10" id="__codelineno-105-10" name="__codelineno-105-10"></a><span class="cp">##    define have_optional 0</span>
<a href="#__codelineno-105-11" id="__codelineno-105-11" name="__codelineno-105-11"></a><span class="cp">##  endif</span>
<a href="#__codelineno-105-12" id="__codelineno-105-12" name="__codelineno-105-12"></a><span class="cp">##endif</span>
</code></pre></div>
<p>它还可用于在不同平台上以不同名称或位置存在的头文件而无需知道程序运行的平台，例如 OpenGL 头文件在 macOS 上位于 <code>OpenGL\</code> 目录，而在其他平台上位于 <code>GL\</code> 目录。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-106-1" id="__codelineno-106-1" name="__codelineno-106-1"></a><span class="cp">##ifdef __has_include</span>
<a href="#__codelineno-106-2" id="__codelineno-106-2" name="__codelineno-106-2"></a><span class="cp">##  if __has_include(&lt;OpenGL/gl.h&gt;)</span>
<a href="#__codelineno-106-3" id="__codelineno-106-3" name="__codelineno-106-3"></a><span class="cp">##    include &lt;OpenGL/gl.h&gt;</span>
<a href="#__codelineno-106-4" id="__codelineno-106-4" name="__codelineno-106-4"></a><span class="cp">##    include &lt;OpenGL/glu.h&gt;</span>
<a href="#__codelineno-106-5" id="__codelineno-106-5" name="__codelineno-106-5"></a><span class="cp">##  elif __has_include(&lt;GL/gl.h&gt;)</span>
<a href="#__codelineno-106-6" id="__codelineno-106-6" name="__codelineno-106-6"></a><span class="cp">##    include &lt;GL/gl.h&gt;</span>
<a href="#__codelineno-106-7" id="__codelineno-106-7" name="__codelineno-106-7"></a><span class="cp">##    include &lt;GL/glu.h&gt;</span>
<a href="#__codelineno-106-8" id="__codelineno-106-8" name="__codelineno-106-8"></a><span class="cp">##  else</span>
<a href="#__codelineno-106-9" id="__codelineno-106-9" name="__codelineno-106-9"></a><span class="cp">##    error No suitable OpenGL headers found.</span>
<a href="#__codelineno-106-10" id="__codelineno-106-10" name="__codelineno-106-10"></a><span class="cp">## endif</span>
<a href="#__codelineno-106-11" id="__codelineno-106-11" name="__codelineno-106-11"></a><span class="cp">##endif</span>
</code></pre></div>
<h4 id="class-template-argument-deduction">类模板参数推导（Class template argument deduction）<a class="headerlink" href="#class-template-argument-deduction" title="Permanent link">¶</a></h4>
<p><em>类模板参数推导</em>（CTAD）允许编译器从构造函数参数中推导模板参数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-107-1" id="__codelineno-107-1" name="__codelineno-107-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="w"> </span><span class="n">v</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 推导为 std::vector&lt;int&gt;</span>
<a href="#__codelineno-107-2" id="__codelineno-107-2" name="__codelineno-107-2"></a>
<a href="#__codelineno-107-3" id="__codelineno-107-3" name="__codelineno-107-3"></a><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="n">mtx</span><span class="p">;</span>
<a href="#__codelineno-107-4" id="__codelineno-107-4" name="__codelineno-107-4"></a><span class="k">auto</span><span class="w"> </span><span class="n">lck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="p">{</span><span class="w"> </span><span class="n">mtx</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 推导为 std::lock_guard&lt;std::mutex&gt;</span>
<a href="#__codelineno-107-5" id="__codelineno-107-5" name="__codelineno-107-5"></a>
<a href="#__codelineno-107-6" id="__codelineno-107-6" name="__codelineno-107-6"></a><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 推导为 std::pair&lt;double, double&gt;</span>
</code></pre></div>
<p>对于用户定义类型，如果适用，<em>推导指南</em>可以用来指导编译器如何推导模板参数：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-108-1" id="__codelineno-108-1" name="__codelineno-108-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-108-2" id="__codelineno-108-2" name="__codelineno-108-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">container</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-108-3" id="__codelineno-108-3" name="__codelineno-108-3"></a><span class="w">  </span><span class="n">container</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-108-4" id="__codelineno-108-4" name="__codelineno-108-4"></a>
<a href="#__codelineno-108-5" id="__codelineno-108-5" name="__codelineno-108-5"></a><span class="w">  </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Iter</span><span class="o">&gt;</span>
<a href="#__codelineno-108-6" id="__codelineno-108-6" name="__codelineno-108-6"></a><span class="w">  </span><span class="n">container</span><span class="p">(</span><span class="n">Iter</span><span class="w"> </span><span class="n">beg</span><span class="p">,</span><span class="w"> </span><span class="n">Iter</span><span class="w"> </span><span class="n">end</span><span class="p">);</span>
<a href="#__codelineno-108-7" id="__codelineno-108-7" name="__codelineno-108-7"></a><span class="p">};</span>
<a href="#__codelineno-108-8" id="__codelineno-108-8" name="__codelineno-108-8"></a>
<a href="#__codelineno-108-9" id="__codelineno-108-9" name="__codelineno-108-9"></a><span class="c1">// 推导指南</span>
<a href="#__codelineno-108-10" id="__codelineno-108-10" name="__codelineno-108-10"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Iter</span><span class="o">&gt;</span>
<a href="#__codelineno-108-11" id="__codelineno-108-11" name="__codelineno-108-11"></a><span class="n">container</span><span class="p">(</span><span class="n">Iter</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">Iter</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">container</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">std</span><span class="o">::</span><span class="n">iterator_traits</span><span class="o">&lt;</span><span class="n">Iter</span><span class="o">&gt;::</span><span class="n">value_type</span><span class="o">&gt;</span><span class="p">;</span>
<a href="#__codelineno-108-12" id="__codelineno-108-12" name="__codelineno-108-12"></a>
<a href="#__codelineno-108-13" id="__codelineno-108-13" name="__codelineno-108-13"></a><span class="n">container</span><span class="w"> </span><span class="n">a</span><span class="p">{</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确: 推导为 container&lt;int&gt;</span>
<a href="#__codelineno-108-14" id="__codelineno-108-14" name="__codelineno-108-14"></a>
<a href="#__codelineno-108-15" id="__codelineno-108-15" name="__codelineno-108-15"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-108-16" id="__codelineno-108-16" name="__codelineno-108-16"></a><span class="k">auto</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">container</span><span class="p">{</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">()</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确: 推导为 container&lt;double&gt;</span>
<a href="#__codelineno-108-17" id="__codelineno-108-17" name="__codelineno-108-17"></a>
<a href="#__codelineno-108-18" id="__codelineno-108-18" name="__codelineno-108-18"></a><span class="n">container</span><span class="w"> </span><span class="n">c</span><span class="p">{</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// 错误: std::iterator_traits&lt;int&gt;::value_type 不是一种类型</span>
</code></pre></div>
<h3 id="c17_2">C++17 库功能<a class="headerlink" href="#c17_2" title="Permanent link">¶</a></h3>
<h4 id="stdvariant">std::variant<a class="headerlink" href="#stdvariant" title="Permanent link">¶</a></h4>
<p>类模板 <code>std::variant</code> 表示一个类型安全的 <code>union</code>。<code>std::variant</code> 的实例在任何给定时间内保存其备选类型之一的值（也可能无值）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-109-1" id="__codelineno-109-1" name="__codelineno-109-1"></a><span class="n">std</span><span class="o">::</span><span class="n">variant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">{</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-109-2" id="__codelineno-109-2" name="__codelineno-109-2"></a><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 12</span>
<a href="#__codelineno-109-3" id="__codelineno-109-3" name="__codelineno-109-3"></a><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 12</span>
<a href="#__codelineno-109-4" id="__codelineno-109-4" name="__codelineno-109-4"></a><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">12.0</span><span class="p">;</span>
<a href="#__codelineno-109-5" id="__codelineno-109-5" name="__codelineno-109-5"></a><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 12.0</span>
<a href="#__codelineno-109-6" id="__codelineno-109-6" name="__codelineno-109-6"></a><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 12.0</span>
</code></pre></div>
<h4 id="stdoptional">std::optional<a class="headerlink" href="#stdoptional" title="Permanent link">¶</a></h4>
<p>类模板 <code>std::optional</code> 管理一个可选的包含值，即一个值可能存在也可能不存在。<code>optional</code> 的一个常见用例是可能失败的函数的返回值。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-110-1" id="__codelineno-110-1" name="__codelineno-110-1"></a><span class="n">std</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">create</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-110-2" id="__codelineno-110-2" name="__codelineno-110-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-110-3" id="__codelineno-110-3" name="__codelineno-110-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"Godzilla"</span><span class="p">;</span>
<a href="#__codelineno-110-4" id="__codelineno-110-4" name="__codelineno-110-4"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-110-5" id="__codelineno-110-5" name="__codelineno-110-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{};</span>
<a href="#__codelineno-110-6" id="__codelineno-110-6" name="__codelineno-110-6"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-110-7" id="__codelineno-110-7" name="__codelineno-110-7"></a><span class="p">}</span>
<a href="#__codelineno-110-8" id="__codelineno-110-8" name="__codelineno-110-8"></a>
<a href="#__codelineno-110-9" id="__codelineno-110-9" name="__codelineno-110-9"></a><span class="n">create</span><span class="p">(</span><span class="nb">false</span><span class="p">).</span><span class="n">value_or</span><span class="p">(</span><span class="s">"empty"</span><span class="p">);</span><span class="w"> </span><span class="c1">// == "empty"</span>
<a href="#__codelineno-110-10" id="__codelineno-110-10" name="__codelineno-110-10"></a><span class="n">create</span><span class="p">(</span><span class="nb">true</span><span class="p">).</span><span class="n">value</span><span class="p">();</span><span class="w"> </span><span class="c1">// == "Godzilla"</span>
<a href="#__codelineno-110-11" id="__codelineno-110-11" name="__codelineno-110-11"></a><span class="c1">// 返回 optional 的工厂函数可以用作 while 和 if 的条件</span>
<a href="#__codelineno-110-12" id="__codelineno-110-12" name="__codelineno-110-12"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create</span><span class="p">(</span><span class="nb">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-110-13" id="__codelineno-110-13" name="__codelineno-110-13"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-110-14" id="__codelineno-110-14" name="__codelineno-110-14"></a><span class="p">}</span>
</code></pre></div>
<h4 id="stdany">std::any<a class="headerlink" href="#stdany" title="Permanent link">¶</a></h4>
<p>一个类型安全的单值容器，可以容纳任何类型的值。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-111-1" id="__codelineno-111-1" name="__codelineno-111-1"></a><span class="n">std</span><span class="o">::</span><span class="n">any</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span><span class="mi">5</span><span class="p">};</span>
<a href="#__codelineno-111-2" id="__codelineno-111-2" name="__codelineno-111-2"></a><span class="n">x</span><span class="p">.</span><span class="n">has_value</span><span class="p">()</span><span class="w"> </span><span class="c1">// == true</span>
<a href="#__codelineno-111-3" id="__codelineno-111-3" name="__codelineno-111-3"></a><span class="n">std</span><span class="o">::</span><span class="n">any_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// == 5</span>
<a href="#__codelineno-111-4" id="__codelineno-111-4" name="__codelineno-111-4"></a><span class="n">std</span><span class="o">::</span><span class="n">any_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a href="#__codelineno-111-5" id="__codelineno-111-5" name="__codelineno-111-5"></a><span class="n">std</span><span class="o">::</span><span class="n">any_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// == 10</span>
</code></pre></div>
<h4 id="stdstring_view">std::string_view<a class="headerlink" href="#stdstring_view" title="Permanent link">¶</a></h4>
<p>一个非拥有的字符串引用。对于提供字符串之上的抽象（例如解析）很有用。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-112-1" id="__codelineno-112-1" name="__codelineno-112-1"></a><span class="c1">// 常规字符串。</span>
<a href="#__codelineno-112-2" id="__codelineno-112-2" name="__codelineno-112-2"></a><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">cppstr</span><span class="w"> </span><span class="p">{</span><span class="s">"foo"</span><span class="p">};</span>
<a href="#__codelineno-112-3" id="__codelineno-112-3" name="__codelineno-112-3"></a><span class="c1">// 宽字符串。</span>
<a href="#__codelineno-112-4" id="__codelineno-112-4" name="__codelineno-112-4"></a><span class="n">std</span><span class="o">::</span><span class="n">wstring_view</span><span class="w"> </span><span class="n">wcstr_v</span><span class="w"> </span><span class="p">{</span><span class="sa">L</span><span class="s">"baz"</span><span class="p">};</span>
<a href="#__codelineno-112-5" id="__codelineno-112-5" name="__codelineno-112-5"></a><span class="c1">// 字符数组。</span>
<a href="#__codelineno-112-6" id="__codelineno-112-6" name="__codelineno-112-6"></a><span class="kt">char</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="sc">'b'</span><span class="p">,</span><span class="w"> </span><span class="sc">'a'</span><span class="p">,</span><span class="w"> </span><span class="sc">'r'</span><span class="p">};</span>
<a href="#__codelineno-112-7" id="__codelineno-112-7" name="__codelineno-112-7"></a><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="nf">array_v</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">size</span><span class="p">(</span><span class="n">array</span><span class="p">));</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-113-1" id="__codelineno-113-1" name="__codelineno-113-1"></a><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="p">{</span><span class="s">"   trim me"</span><span class="p">};</span>
<a href="#__codelineno-113-2" id="__codelineno-113-2" name="__codelineno-113-2"></a><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">{</span><span class="n">str</span><span class="p">};</span>
<a href="#__codelineno-113-3" id="__codelineno-113-3" name="__codelineno-113-3"></a><span class="n">v</span><span class="p">.</span><span class="n">remove_prefix</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">find_first_not_of</span><span class="p">(</span><span class="s">" "</span><span class="p">),</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()));</span>
<a href="#__codelineno-113-4" id="__codelineno-113-4" name="__codelineno-113-4"></a><span class="n">str</span><span class="p">;</span><span class="w"> </span><span class="c1">//  == "   trim me"</span>
<a href="#__codelineno-113-5" id="__codelineno-113-5" name="__codelineno-113-5"></a><span class="n">v</span><span class="p">;</span><span class="w"> </span><span class="c1">// == "trim me"</span>
</code></pre></div>
<h4 id="stdinvoke">std::invoke<a class="headerlink" href="#stdinvoke" title="Permanent link">¶</a></h4>
<p>用参数调用一个 <code>Callable</code> 对象。<em>可调用</em>对象的例子有 <code>std::function</code> 或 lambdas；可以像常规函数一样调用的对象。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-114-1" id="__codelineno-114-1" name="__codelineno-114-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Callable</span><span class="o">&gt;</span>
<a href="#__codelineno-114-2" id="__codelineno-114-2" name="__codelineno-114-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">Proxy</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-114-3" id="__codelineno-114-3" name="__codelineno-114-3"></a><span class="w">  </span><span class="n">Callable</span><span class="w"> </span><span class="n">c_</span><span class="p">;</span>
<a href="#__codelineno-114-4" id="__codelineno-114-4" name="__codelineno-114-4"></a>
<a href="#__codelineno-114-5" id="__codelineno-114-5" name="__codelineno-114-5"></a><span class="k">public</span><span class="o">:</span>
<a href="#__codelineno-114-6" id="__codelineno-114-6" name="__codelineno-114-6"></a><span class="w">  </span><span class="n">Proxy</span><span class="p">(</span><span class="n">Callable</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">c_</span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-114-7" id="__codelineno-114-7" name="__codelineno-114-7"></a>
<a href="#__codelineno-114-8" id="__codelineno-114-8" name="__codelineno-114-8"></a><span class="w">  </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a href="#__codelineno-114-9" id="__codelineno-114-9" name="__codelineno-114-9"></a><span class="w">  </span><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="k">operator</span><span class="p">()(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-114-10" id="__codelineno-114-10" name="__codelineno-114-10"></a><span class="w">    </span><span class="c1">// ...</span>
<a href="#__codelineno-114-11" id="__codelineno-114-11" name="__codelineno-114-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">invoke</span><span class="p">(</span><span class="n">c_</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...);</span>
<a href="#__codelineno-114-12" id="__codelineno-114-12" name="__codelineno-114-12"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-114-13" id="__codelineno-114-13" name="__codelineno-114-13"></a><span class="p">};</span>
<a href="#__codelineno-114-14" id="__codelineno-114-14" name="__codelineno-114-14"></a>
<a href="#__codelineno-114-15" id="__codelineno-114-15" name="__codelineno-114-15"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-114-16" id="__codelineno-114-16" name="__codelineno-114-16"></a><span class="n">Proxy</span><span class="w"> </span><span class="n">p</span><span class="p">{</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-114-17" id="__codelineno-114-17" name="__codelineno-114-17"></a><span class="n">p</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 3</span>
</code></pre></div>
<h4 id="stdapply">std::apply<a class="headerlink" href="#stdapply" title="Permanent link">¶</a></h4>
<p>用一个参数元组调用一个 <code>Callable</code> 对象。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-115-1" id="__codelineno-115-1" name="__codelineno-115-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-115-2" id="__codelineno-115-2" name="__codelineno-115-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a href="#__codelineno-115-3" id="__codelineno-115-3" name="__codelineno-115-3"></a><span class="p">};</span>
<a href="#__codelineno-115-4" id="__codelineno-115-4" name="__codelineno-115-4"></a><span class="n">std</span><span class="o">::</span><span class="n">apply</span><span class="p">(</span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w"> </span><span class="c1">// == 3</span>
</code></pre></div>
<h4 id="stdfilesystem">std::filesystem<a class="headerlink" href="#stdfilesystem" title="Permanent link">¶</a></h4>
<p>新的 <code>std::filesystem</code> 库提供了操作文件、目录和文件系统中路径的标准方式。</p>
<p>在这里，如果有可用的空间，将一个大文件复制到临时路径：
<div class="highlight"><pre><span></span><code><a href="#__codelineno-116-1" id="__codelineno-116-1" name="__codelineno-116-1"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">bigFilePath</span><span class="w"> </span><span class="p">{</span><span class="s">"bigFileToCopy"</span><span class="p">};</span>
<a href="#__codelineno-116-2" id="__codelineno-116-2" name="__codelineno-116-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">exists</span><span class="p">(</span><span class="n">bigFilePath</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-116-3" id="__codelineno-116-3" name="__codelineno-116-3"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">bigFileSize</span><span class="w"> </span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">file_size</span><span class="p">(</span><span class="n">bigFilePath</span><span class="p">)};</span>
<a href="#__codelineno-116-4" id="__codelineno-116-4" name="__codelineno-116-4"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">path</span><span class="w"> </span><span class="n">tmpPath</span><span class="w"> </span><span class="p">{</span><span class="s">"/tmp"</span><span class="p">};</span>
<a href="#__codelineno-116-5" id="__codelineno-116-5" name="__codelineno-116-5"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">space</span><span class="p">(</span><span class="n">tmpPath</span><span class="p">).</span><span class="n">available</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">bigFileSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-116-6" id="__codelineno-116-6" name="__codelineno-116-6"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">tmpPath</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"example"</span><span class="p">));</span>
<a href="#__codelineno-116-7" id="__codelineno-116-7" name="__codelineno-116-7"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">copy_file</span><span class="p">(</span><span class="n">bigFilePath</span><span class="p">,</span><span class="w"> </span><span class="n">tmpPath</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"newFile"</span><span class="p">));</span>
<a href="#__codelineno-116-8" id="__codelineno-116-8" name="__codelineno-116-8"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-116-9" id="__codelineno-116-9" name="__codelineno-116-9"></a><span class="p">}</span>
</code></pre></div></p>
<h4 id="stdbyte">std::byte<a class="headerlink" href="#stdbyte" title="Permanent link">¶</a></h4>
<p>新的 <code>std::byte</code> 类型提供了表示数据为字节的标准方式。使用 <code>std::byte</code> 优于 <code>char</code> 或 <code>unsigned char</code> 的好处在于它不是字符类型，也不是算术类型；而且只有位运算符重载。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-117-1" id="__codelineno-117-1" name="__codelineno-117-1"></a><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<a href="#__codelineno-117-2" id="__codelineno-117-2" name="__codelineno-117-2"></a><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">{</span><span class="mh">0xFF</span><span class="p">};</span>
<a href="#__codelineno-117-3" id="__codelineno-117-3" name="__codelineno-117-3"></a><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_integer</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// 0xFF</span>
<a href="#__codelineno-117-4" id="__codelineno-117-4" name="__codelineno-117-4"></a><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a href="#__codelineno-117-5" id="__codelineno-117-5" name="__codelineno-117-5"></a><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_integer</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
</code></pre></div>
<p>注意，<code>std::byte</code> 只是一个枚举；并且由于<a href="#direct-list-initialization-of-enums">枚举的直接列表初始化</a>的支持，使得枚举的花括号初始化变得可能。</p>
<h4 id="splicing-for-maps-and-sets">映射和集合的拼接（Splicing for maps and sets）<a class="headerlink" href="#splicing-for-maps-and-sets" title="Permanent link">¶</a></h4>
<p>移动节点和合并容器而无需昂贵的复制、移动或堆分配/释放开销。</p>
<p>将元素从一个 map 移动到另一个 map：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-118-1" id="__codelineno-118-1" name="__codelineno-118-1"></a><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="p">{{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">"one"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">"two"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">"buckle my shoe"</span><span class="p">}};</span>
<a href="#__codelineno-118-2" id="__codelineno-118-2" name="__codelineno-118-2"></a><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dst</span><span class="w"> </span><span class="p">{{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">"three"</span><span class="p">}};</span>
<a href="#__codelineno-118-3" id="__codelineno-118-3" name="__codelineno-118-3"></a><span class="n">dst</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="n">extract</span><span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span><span class="w"> </span><span class="c1">// 将 { 1, "one" } 从 `src` 中廉价地移除并插入到 `dst` 中。</span>
<a href="#__codelineno-118-4" id="__codelineno-118-4" name="__codelineno-118-4"></a><span class="n">dst</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="n">extract</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span><span class="w"> </span><span class="c1">// 将 { 2, "two" } 从 `src` 中廉价地移除并插入到 `dst` 中。</span>
<a href="#__codelineno-118-5" id="__codelineno-118-5" name="__codelineno-118-5"></a><span class="c1">// dst == { { 1, "one" }, { 2, "two" }, { 3, "three" } };</span>
</code></pre></div>
<p>插入整个集合：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-119-1" id="__codelineno-119-1" name="__codelineno-119-1"></a><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
<a href="#__codelineno-119-2" id="__codelineno-119-2" name="__codelineno-119-2"></a><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dst</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
<a href="#__codelineno-119-3" id="__codelineno-119-3" name="__codelineno-119-3"></a><span class="n">dst</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">src</span><span class="p">);</span>
<a href="#__codelineno-119-4" id="__codelineno-119-4" name="__codelineno-119-4"></a><span class="c1">// src == { 5 }</span>
<a href="#__codelineno-119-5" id="__codelineno-119-5" name="__codelineno-119-5"></a><span class="c1">// dst == { 1, 2, 3, 4, 5 }</span>
</code></pre></div>
<p>插入超出容器生命周期的元素：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-120-1" id="__codelineno-120-1" name="__codelineno-120-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">elementFactory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-120-2" id="__codelineno-120-2" name="__codelineno-120-2"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="p">...</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<a href="#__codelineno-120-3" id="__codelineno-120-3" name="__codelineno-120-3"></a><span class="w">  </span><span class="n">s</span><span class="p">.</span><span class="n">emplace</span><span class="p">(...);</span>
<a href="#__codelineno-120-4" id="__codelineno-120-4" name="__codelineno-120-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">extract</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span>
<a href="#__codelineno-120-5" id="__codelineno-120-5" name="__codelineno-120-5"></a><span class="p">}</span>
<a href="#__codelineno-120-6" id="__codelineno-120-6" name="__codelineno-120-6"></a><span class="n">s2</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">elementFactory</span><span class="p">());</span>
</code></pre></div>
<p>更改 map 元素的键：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-121-1" id="__codelineno-121-1" name="__codelineno-121-1"></a><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="p">{{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">"one"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">"two"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">"three"</span><span class="p">}};</span>
<a href="#__codelineno-121-2" id="__codelineno-121-2" name="__codelineno-121-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">extract</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a href="#__codelineno-121-3" id="__codelineno-121-3" name="__codelineno-121-3"></a><span class="n">e</span><span class="p">.</span><span class="n">key</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<a href="#__codelineno-121-4" id="__codelineno-121-4" name="__codelineno-121-4"></a><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">e</span><span class="p">));</span>
<a href="#__codelineno-121-5" id="__codelineno-121-5" name="__codelineno-121-5"></a><span class="c1">// m == { { 1, "one" }, { 3, "three" }, { 4, "two" } }</span>
</code></pre></div>
<h4 id="parallel-algorithms">并行算法（Parallel algorithms）<a class="headerlink" href="#parallel-algorithms" title="Permanent link">¶</a></h4>
<p>许多 STL 算法，例如 <code>copy</code>、<code>find</code> 和 <code>sort</code> 方法，开始支持<em>并行执行策略</em>：<code>seq</code>、<code>par</code> 和 <code>par_unseq</code>，它们分别表示“顺序地”、“并行地”和“并行无序地”。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-122-1" id="__codelineno-122-1" name="__codelineno-122-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">longVector</span><span class="p">;</span>
<a href="#__codelineno-122-2" id="__codelineno-122-2" name="__codelineno-122-2"></a><span class="c1">// 使用并行执行策略查找元素</span>
<a href="#__codelineno-122-3" id="__codelineno-122-3" name="__codelineno-122-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">result1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">par</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">longVector</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">(</span><span class="n">longVector</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a href="#__codelineno-122-4" id="__codelineno-122-4" name="__codelineno-122-4"></a><span class="c1">// 使用顺序执行策略排序元素</span>
<a href="#__codelineno-122-5" id="__codelineno-122-5" name="__codelineno-122-5"></a><span class="k">auto</span><span class="w"> </span><span class="n">result2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">seq</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">longVector</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">(</span><span class="n">longVector</span><span class="p">));</span>
</code></pre></div>
<h4 id="stdsample">std::sample<a class="headerlink" href="#stdsample" title="Permanent link">¶</a></h4>
<p>在给定序列中采样 n 个元素（无替换），其中每个元素被选中的机会相等。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-123-1" id="__codelineno-123-1" name="__codelineno-123-1"></a><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">ALLOWED_CHARS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"</span><span class="p">;</span>
<a href="#__codelineno-123-2" id="__codelineno-123-2" name="__codelineno-123-2"></a><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">guid</span><span class="p">;</span>
<a href="#__codelineno-123-3" id="__codelineno-123-3" name="__codelineno-123-3"></a><span class="c1">// 从 ALLOWED_CHARS 中采样 5 个字符。</span>
<a href="#__codelineno-123-4" id="__codelineno-123-4" name="__codelineno-123-4"></a><span class="n">std</span><span class="o">::</span><span class="n">sample</span><span class="p">(</span><span class="n">ALLOWED_CHARS</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">ALLOWED_CHARS</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">guid</span><span class="p">),</span>
<a href="#__codelineno-123-5" id="__codelineno-123-5" name="__codelineno-123-5"></a><span class="w">  </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">mt19937</span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">random_device</span><span class="p">{}()</span><span class="w"> </span><span class="p">});</span>
<a href="#__codelineno-123-6" id="__codelineno-123-6" name="__codelineno-123-6"></a>
<a href="#__codelineno-123-7" id="__codelineno-123-7" name="__codelineno-123-7"></a><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">guid</span><span class="p">;</span><span class="w"> </span><span class="c1">// 例如 G1fW2</span>
</code></pre></div>
<h4 id="stdclamp">std::clamp<a class="headerlink" href="#stdclamp" title="Permanent link">¶</a></h4>
<p>将给定值限定在下界和上界之间。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-124-1" id="__codelineno-124-1" name="__codelineno-124-1"></a><span class="n">std</span><span class="o">::</span><span class="n">clamp</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 1</span>
<a href="#__codelineno-124-2" id="__codelineno-124-2" name="__codelineno-124-2"></a><span class="n">std</span><span class="o">::</span><span class="n">clamp</span><span class="p">(</span><span class="mi">-42</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// == -1</span>
<a href="#__codelineno-124-3" id="__codelineno-124-3" name="__codelineno-124-3"></a><span class="n">std</span><span class="o">::</span><span class="n">clamp</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 0</span>
<a href="#__codelineno-124-4" id="__codelineno-124-4" name="__codelineno-124-4"></a>
<a href="#__codelineno-124-5" id="__codelineno-124-5" name="__codelineno-124-5"></a><span class="c1">// `std::clamp` 还接受自定义比较器：</span>
<a href="#__codelineno-124-6" id="__codelineno-124-6" name="__codelineno-124-6"></a><span class="n">std</span><span class="o">::</span><span class="n">clamp</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;&gt;</span><span class="p">{});</span><span class="w"> </span><span class="c1">// == 0</span>
</code></pre></div>
<h4 id="stdreduce">std::reduce<a class="headerlink" href="#stdreduce" title="Permanent link">¶</a></h4>
<p>对给定范围内的元素进行折叠。概念上类似于 <code>std::accumulate</code>，但 <code>std::reduce</code> 将并行执行折叠。由于折叠是并行完成的，如果您指定一个二元操作，它需要是结合律和交换律。给定的二元操作还不应更改任何元素或使给定范围内的任何迭代器无效。</p>
<p>默认的二元操作是 <code>std::plus</code>，初始值为 0。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-125-1" id="__codelineno-125-1" name="__codelineno-125-1"></a><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-125-2" id="__codelineno-125-2" name="__codelineno-125-2"></a><span class="n">std</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">));</span><span class="w"> </span><span class="c1">// == 6</span>
<a href="#__codelineno-125-3" id="__codelineno-125-3" name="__codelineno-125-3"></a><span class="c1">// 使用自定义二元操作：</span>
<a href="#__codelineno-125-4" id="__codelineno-125-4" name="__codelineno-125-4"></a><span class="n">std</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">multiplies</span><span class="o">&lt;&gt;</span><span class="p">{});</span><span class="w"> </span><span class="c1">// == 6</span>
</code></pre></div>
<p>此外，您可以为 reducer 指定转换：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-126-1" id="__codelineno-126-1" name="__codelineno-126-1"></a><span class="n">std</span><span class="o">::</span><span class="n">transform_reduce</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;&gt;</span><span class="p">{},</span><span class="w"> </span><span class="n">times_ten</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 60</span>
<a href="#__codelineno-126-2" id="__codelineno-126-2" name="__codelineno-126-2"></a>
<a href="#__codelineno-126-3" id="__codelineno-126-3" name="__codelineno-126-3"></a><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-126-4" id="__codelineno-126-4" name="__codelineno-126-4"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">product_times_ten</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-126-5" id="__codelineno-126-5" name="__codelineno-126-5"></a>
<a href="#__codelineno-126-6" id="__codelineno-126-6" name="__codelineno-126-6"></a><span class="n">std</span><span class="o">::</span><span class="n">transform_reduce</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">b</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;&gt;</span><span class="p">{},</span><span class="w"> </span><span class="n">product_times_ten</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 140</span>
</code></pre></div>
<h4 id="prefix-sum-algorithms">前缀和算法（Prefix sum algorithms）<a class="headerlink" href="#prefix-sum-algorithms" title="Permanent link">¶</a></h4>
<p>支持前缀和（包括包含和排除扫描）及其转换。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-127-1" id="__codelineno-127-1" name="__codelineno-127-1"></a><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-127-2" id="__codelineno-127-2" name="__codelineno-127-2"></a>
<a href="#__codelineno-127-3" id="__codelineno-127-3" name="__codelineno-127-3"></a><span class="n">std</span><span class="o">::</span><span class="n">inclusive_scan</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>
<a href="#__codelineno-127-4" id="__codelineno-127-4" name="__codelineno-127-4"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ostream_iterator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="s">" "</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;&gt;</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 1 3 6</span>
<a href="#__codelineno-127-5" id="__codelineno-127-5" name="__codelineno-127-5"></a>
<a href="#__codelineno-127-6" id="__codelineno-127-6" name="__codelineno-127-6"></a><span class="n">std</span><span class="o">::</span><span class="n">exclusive_scan</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>
<a href="#__codelineno-127-7" id="__codelineno-127-7" name="__codelineno-127-7"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ostream_iterator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="s">" "</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;&gt;</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 0 1 3</span>
<a href="#__codelineno-127-8" id="__codelineno-127-8" name="__codelineno-127-8"></a>
<a href="#__codelineno-127-9" id="__codelineno-127-9" name="__codelineno-127-9"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">times_ten</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-127-10" id="__codelineno-127-10" name="__codelineno-127-10"></a>
<a href="#__codelineno-127-11" id="__codelineno-127-11" name="__codelineno-127-11"></a><span class="n">std</span><span class="o">::</span><span class="n">transform_inclusive_scan</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>
<a href="#__codelineno-127-12" id="__codelineno-127-12" name="__codelineno-127-12"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ostream_iterator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="s">" "</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;&gt;</span><span class="p">{},</span><span class="w"> </span><span class="n">times_ten</span><span class="p">);</span><span class="w"> </span><span class="c1">// 10 30 60</span>
<a href="#__codelineno-127-13" id="__codelineno-127-13" name="__codelineno-127-13"></a>
<a href="#__codelineno-127-14" id="__codelineno-127-14" name="__codelineno-127-14"></a><span class="n">std</span><span class="o">::</span><span class="n">transform_exclusive_scan</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>
<a href="#__codelineno-127-15" id="__codelineno-127-15" name="__codelineno-127-15"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ostream_iterator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="s">" "</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;&gt;</span><span class="p">{},</span><span class="w"> </span><span class="n">times_ten</span><span class="p">);</span><span class="w"> </span><span class="c1">// 0 10 30</span>
</code></pre></div>
<h4 id="gcd-and-lcm">最大公约数和最小公倍数（GCD and LCM）<a class="headerlink" href="#gcd-and-lcm" title="Permanent link">¶</a></h4>
<p>最大公约数（GCD）和最小公倍数（LCM）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-128-1" id="__codelineno-128-1" name="__codelineno-128-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<a href="#__codelineno-128-2" id="__codelineno-128-2" name="__codelineno-128-2"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<a href="#__codelineno-128-3" id="__codelineno-128-3" name="__codelineno-128-3"></a><span class="n">std</span><span class="o">::</span><span class="n">gcd</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 3</span>
<a href="#__codelineno-128-4" id="__codelineno-128-4" name="__codelineno-128-4"></a><span class="n">std</span><span class="o">::</span><span class="n">lcm</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 9</span>
</code></pre></div>
<h4 id="stdnot_fnstdnot_fn">std::not_fn（std::not_fn）<a class="headerlink" href="#stdnot_fnstdnot_fn" title="Permanent link">¶</a></h4>
<p>一个返回给定函数结果的取反值的实用函数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-129-1" id="__codelineno-129-1" name="__codelineno-129-1"></a><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ostream_iterator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ostream_it</span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="s">" "</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-129-2" id="__codelineno-129-2" name="__codelineno-129-2"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">is_even</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-129-3" id="__codelineno-129-3" name="__codelineno-129-3"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-129-4" id="__codelineno-129-4" name="__codelineno-129-4"></a>
<a href="#__codelineno-129-5" id="__codelineno-129-5" name="__codelineno-129-5"></a><span class="c1">// 打印所有的偶数。</span>
<a href="#__codelineno-129-6" id="__codelineno-129-6" name="__codelineno-129-6"></a><span class="n">std</span><span class="o">::</span><span class="n">copy_if</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">v</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">v</span><span class="p">),</span><span class="w"> </span><span class="n">ostream_it</span><span class="p">,</span><span class="w"> </span><span class="n">is_even</span><span class="p">);</span><span class="w"> </span><span class="c1">// 0 2 4</span>
<a href="#__codelineno-129-7" id="__codelineno-129-7" name="__codelineno-129-7"></a><span class="c1">// 打印所有的奇数（非偶数）。</span>
<a href="#__codelineno-129-8" id="__codelineno-129-8" name="__codelineno-129-8"></a><span class="n">std</span><span class="o">::</span><span class="n">copy_if</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cbegin</span><span class="p">(</span><span class="n">v</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cend</span><span class="p">(</span><span class="n">v</span><span class="p">),</span><span class="w"> </span><span class="n">ostream_it</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">not_fn</span><span class="p">(</span><span class="n">is_even</span><span class="p">));</span><span class="w"> </span><span class="c1">// 1 3</span>
</code></pre></div>
<h4 id="string-conversion-tofrom-numbers">字符串与数字的相互转换（String conversion to/from numbers）<a class="headerlink" href="#string-conversion-tofrom-numbers" title="Permanent link">¶</a></h4>
<p>将整数和浮点数转换为字符串，或反之亦然。转换是非抛出的，不会分配，并且比 C 标准库的等效函数更安全。</p>
<p>用户负责为 <code>std::to_chars</code> 分配足够的存储，否则函数会通过设置返回值中的错误码对象来失败。</p>
<p>这些函数允许您选择传递一个基数（默认为十进制）或浮点类型输入的格式说明符。</p>
<ul>
<li><code>std::to_chars</code> 返回一个（非 <code>const</code>）<code>char</code> 指针，该指针是函数写入给定缓冲区的字符串尾后一位置的指针，以及一个错误码对象。</li>
<li><code>std::from_chars</code> 返回一个 <code>const char</code> 指针，成功时等于传递给函数的末尾指针，以及一个错误码对象。</li>
</ul>
<p>这两个函数返回的错误码对象在成功时等于默认初始化的错误码对象。</p>
<p>将数字 <code>123</code> 转换为 <code>std::string</code>：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-130-1" id="__codelineno-130-1" name="__codelineno-130-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-130-2" id="__codelineno-130-2" name="__codelineno-130-2"></a>
<a href="#__codelineno-130-3" id="__codelineno-130-3" name="__codelineno-130-3"></a><span class="c1">// 可以使用任何容器，字符串，数组等。</span>
<a href="#__codelineno-130-4" id="__codelineno-130-4" name="__codelineno-130-4"></a><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
<a href="#__codelineno-130-5" id="__codelineno-130-5" name="__codelineno-130-5"></a><span class="n">str</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// 为每个数字的 `n` 保持足够的存储</span>
<a href="#__codelineno-130-6" id="__codelineno-130-6" name="__codelineno-130-6"></a>
<a href="#__codelineno-130-7" id="__codelineno-130-7" name="__codelineno-130-7"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">ec</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_chars</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">data</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
<a href="#__codelineno-130-8" id="__codelineno-130-8" name="__codelineno-130-8"></a>
<a href="#__codelineno-130-9" id="__codelineno-130-9" name="__codelineno-130-9"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ec</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">errc</span><span class="p">{})</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// 123</span>
<a href="#__codelineno-130-10" id="__codelineno-130-10" name="__codelineno-130-10"></a><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* 处理失败 */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>将值为 <code>"123"</code> 的 <code>std::string</code> 转换为整数：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-131-1" id="__codelineno-131-1" name="__codelineno-131-1"></a><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="p">{</span><span class="w"> </span><span class="s">"123"</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-131-2" id="__codelineno-131-2" name="__codelineno-131-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<a href="#__codelineno-131-3" id="__codelineno-131-3" name="__codelineno-131-3"></a>
<a href="#__codelineno-131-4" id="__codelineno-131-4" name="__codelineno-131-4"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">ec</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">from_chars</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">data</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
<a href="#__codelineno-131-5" id="__codelineno-131-5" name="__codelineno-131-5"></a>
<a href="#__codelineno-131-6" id="__codelineno-131-6" name="__codelineno-131-6"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ec</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">errc</span><span class="p">{})</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// 123</span>
<a href="#__codelineno-131-7" id="__codelineno-131-7" name="__codelineno-131-7"></a><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* 处理失败 */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h2 id="c20">C++20<a class="headerlink" href="#c20" title="Permanent link">¶</a></h2>
<h3 id="c20_1">C++20 语言特性<a class="headerlink" href="#c20_1" title="Permanent link">¶</a></h3>
<h4 id="coroutines">协程（Coroutines）<a class="headerlink" href="#coroutines" title="Permanent link">¶</a></h4>
<p><em>协程</em>是可以暂停和恢复其执行的特殊函数。要定义一个协程，函数体中必须包含 <code>co_return</code>、<code>co_await</code> 或 <code>co_yield</code> 关键字。C++20 的协程是无栈的；除非编译器优化掉，否则它们的状态会被分配在堆上。</p>
<p>协程的一个例子是<em>生成器</em>函数，它在每次调用时生成一个值：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-132-1" id="__codelineno-132-1" name="__codelineno-132-1"></a><span class="n">generator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">range</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-132-2" id="__codelineno-132-2" name="__codelineno-132-2"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-132-3" id="__codelineno-132-3" name="__codelineno-132-3"></a><span class="w">    </span><span class="k">co_yield</span><span class="w"> </span><span class="n">start</span><span class="p">;</span>
<a href="#__codelineno-132-4" id="__codelineno-132-4" name="__codelineno-132-4"></a><span class="w">    </span><span class="n">start</span><span class="o">++</span><span class="p">;</span>
<a href="#__codelineno-132-5" id="__codelineno-132-5" name="__codelineno-132-5"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-132-6" id="__codelineno-132-6" name="__codelineno-132-6"></a>
<a href="#__codelineno-132-7" id="__codelineno-132-7" name="__codelineno-132-7"></a><span class="w">  </span><span class="c1">// 此函数末尾的隐式 co_return:</span>
<a href="#__codelineno-132-8" id="__codelineno-132-8" name="__codelineno-132-8"></a><span class="w">  </span><span class="c1">// co_return;</span>
<a href="#__codelineno-132-9" id="__codelineno-132-9" name="__codelineno-132-9"></a><span class="p">}</span>
<a href="#__codelineno-132-10" id="__codelineno-132-10" name="__codelineno-132-10"></a>
<a href="#__codelineno-132-11" id="__codelineno-132-11" name="__codelineno-132-11"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-132-12" id="__codelineno-132-12" name="__codelineno-132-12"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a href="#__codelineno-132-13" id="__codelineno-132-13" name="__codelineno-132-13"></a><span class="p">}</span>
</code></pre></div>
<p>上面的 <code>range</code> 生成器函数从 <code>start</code> 开始生成值，直到 <code>end</code>（不包括 <code>end</code>），每次迭代步骤都会生成当前存储在 <code>start</code> 中的值。生成器在每次调用 <code>range</code> 时（在这种情况下，每次迭代是在 for 循环中）维护其状态。<code>co_yield</code> 接收给定的表达式，生成（即返回）其值，并在该点挂起协程。恢复后，执行将在 <code>co_yield</code> 之后继续。</p>
<p>协程的另一个例子是<em>任务</em>，它是一种在任务被等待时执行的异步计算：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-133-1" id="__codelineno-133-1" name="__codelineno-133-1"></a><span class="n">task</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">echo</span><span class="p">(</span><span class="n">socket</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-133-2" id="__codelineno-133-2" name="__codelineno-133-2"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(;;)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-133-3" id="__codelineno-133-3" name="__codelineno-133-3"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">co_await</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">async_read</span><span class="p">();</span>
<a href="#__codelineno-133-4" id="__codelineno-133-4" name="__codelineno-133-4"></a><span class="w">    </span><span class="k">co_await</span><span class="w"> </span><span class="n">async_write</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
<a href="#__codelineno-133-5" id="__codelineno-133-5" name="__codelineno-133-5"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-133-6" id="__codelineno-133-6" name="__codelineno-133-6"></a>
<a href="#__codelineno-133-7" id="__codelineno-133-7" name="__codelineno-133-7"></a><span class="w">  </span><span class="c1">// 此函数末尾的隐式 co_return:</span>
<a href="#__codelineno-133-8" id="__codelineno-133-8" name="__codelineno-133-8"></a><span class="w">  </span><span class="c1">// co_return;</span>
<a href="#__codelineno-133-9" id="__codelineno-133-9" name="__codelineno-133-9"></a><span class="p">}</span>
</code></pre></div>
<p>在这个例子中，引入了 <code>co_await</code> 关键字。该关键字接收一个表达式，并在等待的对象（在此例中是读或写操作）尚未准备好时挂起执行，否则继续执行。（请注意，在底层，<code>co_yield</code> 使用 <code>co_await</code>。）</p>
<p>使用任务来惰性计算一个值：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-134-1" id="__codelineno-134-1" name="__codelineno-134-1"></a><span class="n">task</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">calculate_meaning_of_life</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-134-2" id="__codelineno-134-2" name="__codelineno-134-2"></a><span class="w">  </span><span class="k">co_return</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<a href="#__codelineno-134-3" id="__codelineno-134-3" name="__codelineno-134-3"></a><span class="p">}</span>
<a href="#__codelineno-134-4" id="__codelineno-134-4" name="__codelineno-134-4"></a>
<a href="#__codelineno-134-5" id="__codelineno-134-5" name="__codelineno-134-5"></a><span class="k">auto</span><span class="w"> </span><span class="n">meaning_of_life</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_meaning_of_life</span><span class="p">();</span>
<a href="#__codelineno-134-6" id="__codelineno-134-6" name="__codelineno-134-6"></a><span class="c1">// ...</span>
<a href="#__codelineno-134-7" id="__codelineno-134-7" name="__codelineno-134-7"></a><span class="k">co_await</span><span class="w"> </span><span class="n">meaning_of_life</span><span class="p">;</span><span class="w"> </span><span class="c1">// == 42</span>
</code></pre></div>
<p><strong>注意</strong>：虽然这些例子演示了如何在基础级别上使用协程，但在代码编译时会有更多的事情发生。这些例子并不意味着完全覆盖 C++20 的协程。由于 <code>generator</code> 和 <code>task</code> 类尚未由标准库提供，我使用了 <code>cppcoro</code> 库来编译这些例子。</p>
<h4 id="concepts">概念（Concepts）<a class="headerlink" href="#concepts" title="Permanent link">¶</a></h4>
<p><em>概念</em>是命名的编译时谓词，用于约束类型。它们采用以下形式：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-135-1" id="__codelineno-135-1" name="__codelineno-135-1"></a>template &lt; template-parameter-list &gt;
<a href="#__codelineno-135-2" id="__codelineno-135-2" name="__codelineno-135-2"></a>concept concept-name = constraint-expression;
</code></pre></div>
<p>其中 <code>constraint-expression</code> 计算为 <code>constexpr</code> 布尔值。<em>约束</em>应该建模语义要求，例如一个类型是否为数值或可哈希。如果给定类型不满足其绑定的概念（即 <code>constraint-expression</code> 返回 <code>false</code>），则会产生编译器错误。因为约束在编译时进行评估，所以它们可以提供更有意义的错误消息和运行时安全性。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-136-1" id="__codelineno-136-1" name="__codelineno-136-1"></a><span class="c1">// `T` 不受任何约束的限制。</span>
<a href="#__codelineno-136-2" id="__codelineno-136-2" name="__codelineno-136-2"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-136-3" id="__codelineno-136-3" name="__codelineno-136-3"></a><span class="k">concept</span><span class="w"> </span><span class="nc">always_satisfied</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a href="#__codelineno-136-4" id="__codelineno-136-4" name="__codelineno-136-4"></a><span class="c1">// 将 `T` 限制为整型。</span>
<a href="#__codelineno-136-5" id="__codelineno-136-5" name="__codelineno-136-5"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-136-6" id="__codelineno-136-6" name="__codelineno-136-6"></a><span class="k">concept</span><span class="w"> </span><span class="nc">integral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_integral_v</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
<a href="#__codelineno-136-7" id="__codelineno-136-7" name="__codelineno-136-7"></a><span class="c1">// 将 `T` 限制为既满足 `integral` 约束又是有符号的类型。</span>
<a href="#__codelineno-136-8" id="__codelineno-136-8" name="__codelineno-136-8"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-136-9" id="__codelineno-136-9" name="__codelineno-136-9"></a><span class="k">concept</span><span class="w"> </span><span class="nc">signed_integral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">integral</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_signed_v</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
<a href="#__codelineno-136-10" id="__codelineno-136-10" name="__codelineno-136-10"></a><span class="c1">// 将 `T` 限制为既满足 `integral` 约束又不满足 `signed_integral` 约束的类型。</span>
<a href="#__codelineno-136-11" id="__codelineno-136-11" name="__codelineno-136-11"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-136-12" id="__codelineno-136-12" name="__codelineno-136-12"></a><span class="k">concept</span><span class="w"> </span><span class="nc">unsigned_integral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">integral</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">signed_integral</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div>
<p>有多种语法形式用于实施概念：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-137-1" id="__codelineno-137-1" name="__codelineno-137-1"></a><span class="c1">// 函数参数的形式：</span>
<a href="#__codelineno-137-2" id="__codelineno-137-2" name="__codelineno-137-2"></a><span class="c1">// `T` 是一个受约束的类型模板参数。</span>
<a href="#__codelineno-137-3" id="__codelineno-137-3" name="__codelineno-137-3"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">my_concept</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<a href="#__codelineno-137-4" id="__codelineno-137-4" name="__codelineno-137-4"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">v</span><span class="p">);</span>
<a href="#__codelineno-137-5" id="__codelineno-137-5" name="__codelineno-137-5"></a>
<a href="#__codelineno-137-6" id="__codelineno-137-6" name="__codelineno-137-6"></a><span class="c1">// `T` 是一个受约束的类型模板参数。</span>
<a href="#__codelineno-137-7" id="__codelineno-137-7" name="__codelineno-137-7"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-137-8" id="__codelineno-137-8" name="__codelineno-137-8"></a><span class="w">  </span><span class="k">requires</span><span class="w"> </span><span class="n">my_concept</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
<a href="#__codelineno-137-9" id="__codelineno-137-9" name="__codelineno-137-9"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">v</span><span class="p">);</span>
<a href="#__codelineno-137-10" id="__codelineno-137-10" name="__codelineno-137-10"></a>
<a href="#__codelineno-137-11" id="__codelineno-137-11" name="__codelineno-137-11"></a><span class="c1">// `T` 是一个受约束的类型模板参数。</span>
<a href="#__codelineno-137-12" id="__codelineno-137-12" name="__codelineno-137-12"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-137-13" id="__codelineno-137-13" name="__codelineno-137-13"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="n">my_concept</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
<a href="#__codelineno-137-14" id="__codelineno-137-14" name="__codelineno-137-14"></a>
<a href="#__codelineno-137-15" id="__codelineno-137-15" name="__codelineno-137-15"></a><span class="c1">// `v` 是一个受约束的推导参数。</span>
<a href="#__codelineno-137-16" id="__codelineno-137-16" name="__codelineno-137-16"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">my_concept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">v</span><span class="p">);</span>
<a href="#__codelineno-137-17" id="__codelineno-137-17" name="__codelineno-137-17"></a>
<a href="#__codelineno-137-18" id="__codelineno-137-18" name="__codelineno-137-18"></a><span class="c1">// `v` 是一个受约束的非类型模板参数。</span>
<a href="#__codelineno-137-19" id="__codelineno-137-19" name="__codelineno-137-19"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">my_concept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">v</span><span class="o">&gt;</span>
<a href="#__codelineno-137-20" id="__codelineno-137-20" name="__codelineno-137-20"></a><span class="kt">void</span><span class="w"> </span><span class="n">g</span><span class="p">();</span>
<a href="#__codelineno-137-21" id="__codelineno-137-21" name="__codelineno-137-21"></a>
<a href="#__codelineno-137-22" id="__codelineno-137-22" name="__codelineno-137-22"></a><span class="c1">// 自动推导变量的形式：</span>
<a href="#__codelineno-137-23" id="__codelineno-137-23" name="__codelineno-137-23"></a><span class="c1">// `foo` 是一个受约束的自动推导值。</span>
<a href="#__codelineno-137-24" id="__codelineno-137-24" name="__codelineno-137-24"></a><span class="n">my_concept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<a href="#__codelineno-137-25" id="__codelineno-137-25" name="__codelineno-137-25"></a>
<a href="#__codelineno-137-26" id="__codelineno-137-26" name="__codelineno-137-26"></a><span class="c1">// Lambda 的形式：</span>
<a href="#__codelineno-137-27" id="__codelineno-137-27" name="__codelineno-137-27"></a><span class="c1">// `T` 是一个受约束的类型模板参数。</span>
<a href="#__codelineno-137-28" id="__codelineno-137-28" name="__codelineno-137-28"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="o">&lt;</span><span class="n">my_concept</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-137-29" id="__codelineno-137-29" name="__codelineno-137-29"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-137-30" id="__codelineno-137-30" name="__codelineno-137-30"></a><span class="p">};</span>
<a href="#__codelineno-137-31" id="__codelineno-137-31" name="__codelineno-137-31"></a><span class="c1">// `T` 是一个受约束的类型模板参数。</span>
<a href="#__codelineno-137-32" id="__codelineno-137-32" name="__codelineno-137-32"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="n">my_concept</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-137-33" id="__codelineno-137-33" name="__codelineno-137-33"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-137-34" id="__codelineno-137-34" name="__codelineno-137-34"></a><span class="p">};</span>
<a href="#__codelineno-137-35" id="__codelineno-137-35" name="__codelineno-137-35"></a><span class="c1">// `T` 是一个受约束的类型模板参数。</span>
<a href="#__codelineno-137-36" id="__codelineno-137-36" name="__codelineno-137-36"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="n">my_concept</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-137-37" id="__codelineno-137-37" name="__codelineno-137-37"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-137-38" id="__codelineno-137-38" name="__codelineno-137-38"></a><span class="p">};</span>
<a href="#__codelineno-137-39" id="__codelineno-137-39" name="__codelineno-137-39"></a><span class="c1">// `v` 是一个受约束的推导参数。</span>
<a href="#__codelineno-137-40" id="__codelineno-137-40" name="__codelineno-137-40"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">my_concept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-137-41" id="__codelineno-137-41" name="__codelineno-137-41"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-137-42" id="__codelineno-137-42" name="__codelineno-137-42"></a><span class="p">};</span>
<a href="#__codelineno-137-43" id="__codelineno-137-43" name="__codelineno-137-43"></a><span class="c1">// `v` 是一个受约束的非类型模板参数。</span>
<a href="#__codelineno-137-44" id="__codelineno-137-44" name="__codelineno-137-44"></a><span class="k">auto</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="o">&lt;</span><span class="n">my_concept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">v</span><span class="o">&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-137-45" id="__codelineno-137-45" name="__codelineno-137-45"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-137-46" id="__codelineno-137-46" name="__codelineno-137-46"></a><span class="p">};</span>
</code></pre></div>
<p><code>requires</code> 关键字用于开始 <code>requires</code> 子句或 <code>requires</code> 表达式：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-138-1" id="__codelineno-138-1" name="__codelineno-138-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-138-2" id="__codelineno-138-2" name="__codelineno-138-2"></a><span class="w">  </span><span class="k">requires</span><span class="w"> </span><span class="n">my_concept</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="c1">// `requires` 子句。</span>
<a href="#__codelineno-138-3" id="__codelineno-138-3" name="__codelineno-138-3"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="p">);</span>
<a href="#__codelineno-138-4" id="__codelineno-138-4" name="__codelineno-138-4"></a>
<a href="#__codelineno-138-5" id="__codelineno-138-5" name="__codelineno-138-5"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-138-6" id="__codelineno-138-6" name="__codelineno-138-6"></a><span class="k">concept</span><span class="w"> </span><span class="nc">callable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">f</span><span class="p">();</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// `requires` 表达式。</span>
<a href="#__codelineno-138-7" id="__codelineno-138-7" name="__codelineno-138-7"></a>
<a href="#__codelineno-138-8" id="__codelineno-138-8" name="__codelineno-138-8"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-138-9" id="__codelineno-138-9" name="__codelineno-138-9"></a><span class="w">  </span><span class="k">requires</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// `requires` 子句和表达式在同一行。</span>
<a href="#__codelineno-138-10" id="__codelineno-138-10" name="__codelineno-138-10"></a><span class="n">T</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-138-11" id="__codelineno-138-11" name="__codelineno-138-11"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a href="#__codelineno-138-12" id="__codelineno-138-12" name="__codelineno-138-12"></a><span class="p">}</span>
</code></pre></div>
<p>请注意，<code>requires</code> 表达式中的参数列表是可选的。<code>requires</code> 表达式中的每个要求都是以下之一：</p>
<ul>
<li><strong>简单要求</strong>：断言给定的表达式是有效的。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-139-1" id="__codelineno-139-1" name="__codelineno-139-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-139-2" id="__codelineno-139-2" name="__codelineno-139-2"></a><span class="k">concept</span><span class="w"> </span><span class="nc">callable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">f</span><span class="p">();</span><span class="w"> </span><span class="p">};</span>
</code></pre></div>
<ul>
<li><strong>类型要求</strong>：由 <code>typename</code> 关键字后跟一个类型名称表示，断言给定的类型名称是有效的。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-140-1" id="__codelineno-140-1" name="__codelineno-140-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">foo</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-140-2" id="__codelineno-140-2" name="__codelineno-140-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
<a href="#__codelineno-140-3" id="__codelineno-140-3" name="__codelineno-140-3"></a><span class="p">};</span>
<a href="#__codelineno-140-4" id="__codelineno-140-4" name="__codelineno-140-4"></a>
<a href="#__codelineno-140-5" id="__codelineno-140-5" name="__codelineno-140-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">bar</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-140-6" id="__codelineno-140-6" name="__codelineno-140-6"></a><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">;</span>
<a href="#__codelineno-140-7" id="__codelineno-140-7" name="__codelineno-140-7"></a><span class="w">  </span><span class="n">value</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<a href="#__codelineno-140-8" id="__codelineno-140-8" name="__codelineno-140-8"></a><span class="p">};</span>
<a href="#__codelineno-140-9" id="__codelineno-140-9" name="__codelineno-140-9"></a>
<a href="#__codelineno-140-10" id="__codelineno-140-10" name="__codelineno-140-10"></a><span class="k">struct</span><span class="w"> </span><span class="nc">baz</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-140-11" id="__codelineno-140-11" name="__codelineno-140-11"></a><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">;</span>
<a href="#__codelineno-140-12" id="__codelineno-140-12" name="__codelineno-140-12"></a><span class="w">  </span><span class="n">value</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<a href="#__codelineno-140-13" id="__codelineno-140-13" name="__codelineno-140-13"></a><span class="p">};</span>
<a href="#__codelineno-140-14" id="__codelineno-140-14" name="__codelineno-140-14"></a>
<a href="#__codelineno-140-15" id="__codelineno-140-15" name="__codelineno-140-15"></a><span class="c1">// 使用 SFINAE，在 `T` 是 `baz` 时启用。</span>
<a href="#__codelineno-140-16" id="__codelineno-140-16" name="__codelineno-140-16"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">enable_if_t</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">is_same_v</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">baz</span><span class="o">&gt;&gt;&gt;</span>
<a href="#__codelineno-140-17" id="__codelineno-140-17" name="__codelineno-140-17"></a><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{};</span>
<a href="#__codelineno-140-18" id="__codelineno-140-18" name="__codelineno-140-18"></a>
<a href="#__codelineno-140-19" id="__codelineno-140-19" name="__codelineno-140-19"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-140-20" id="__codelineno-140-20" name="__codelineno-140-20"></a><span class="k">using</span><span class="w"> </span><span class="n">Ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="p">;</span>
<a href="#__codelineno-140-21" id="__codelineno-140-21" name="__codelineno-140-21"></a>
<a href="#__codelineno-140-22" id="__codelineno-140-22" name="__codelineno-140-22"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-140-23" id="__codelineno-140-23" name="__codelineno-140-23"></a><span class="k">concept</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-140-24" id="__codelineno-140-24" name="__codelineno-140-24"></a><span class="w">                     </span><span class="c1">// 对类型 `T` 的要求：</span>
<a href="#__codelineno-140-25" id="__codelineno-140-25" name="__codelineno-140-25"></a><span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">::</span><span class="n">value</span><span class="p">;</span><span class="w"> </span><span class="c1">// A) 有一个名为 `value` 的内部成员</span>
<a href="#__codelineno-140-26" id="__codelineno-140-26" name="__codelineno-140-26"></a><span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">S</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w">     </span><span class="c1">// B) 必须有一个有效的 `S` 类模板特化</span>
<a href="#__codelineno-140-27" id="__codelineno-140-27" name="__codelineno-140-27"></a><span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">Ref</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w">   </span><span class="c1">// C) 必须是一个有效的别名模板替换</span>
<a href="#__codelineno-140-28" id="__codelineno-140-28" name="__codelineno-140-28"></a><span class="p">};</span>
<a href="#__codelineno-140-29" id="__codelineno-140-29" name="__codelineno-140-29"></a>
<a href="#__codelineno-140-30" id="__codelineno-140-30" name="__codelineno-140-30"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">C</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<a href="#__codelineno-140-31" id="__codelineno-140-31" name="__codelineno-140-31"></a><span class="kt">void</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">a</span><span class="p">);</span>
<a href="#__codelineno-140-32" id="__codelineno-140-32" name="__codelineno-140-32"></a>
<a href="#__codelineno-140-33" id="__codelineno-140-33" name="__codelineno-140-33"></a><span class="n">g</span><span class="p">(</span><span class="n">foo</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 错误：不满足要求 A。</span>
<a href="#__codelineno-140-34" id="__codelineno-140-34" name="__codelineno-140-34"></a><span class="n">g</span><span class="p">(</span><span class="n">bar</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 错误：不满足要求 B。</span>
<a href="#__codelineno-140-35" id="__codelineno-140-35" name="__codelineno-140-35"></a><span class="n">g</span><span class="p">(</span><span class="n">baz</span><span class="p">{});</span><span class="w"> </span><span class="c1">// 通过。</span>
</code></pre></div>
<ul>
<li><strong>复合要求</strong>：大括号中的表达式后面跟随一个返回类型或类型约束。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-141-1" id="__codelineno-141-1" name="__codelineno-141-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-141-2" id="__codelineno-141-2" name="__codelineno-141-2"></a><span class="k">concept</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">requires</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-141-3" id="__codelineno-141-3" name="__codelineno-141-3"></a><span class="w">  </span><span class="p">{</span><span class="o">*</span><span class="n">x</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">convertible_to</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">::</span><span class="n">inner</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 表达式 `*x` 的类型可转换为 `T::inner`</span>
<a href="#__codelineno-141-4" id="__codelineno-141-4" name="__codelineno-141-4"></a><span class="w">  </span><span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 表达式 `x + 1` 满足 `std::same_as&lt;decltype((x + 1))&gt;`</span>
<a href="#__codelineno-141-5" id="__codelineno-141-5" name="__codelineno-141-5"></a><span class="w">  </span><span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">convertible_to</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 表达式 `x * 1` 的类型可转换为 `T`</span>
<a href="#__codelineno-141-6" id="__codelineno-141-6" name="__codelineno-141-6"></a><span class="p">};</span>
</code></pre></div>
<ul>
<li><strong>嵌套要求</strong>：由 <code>requires</code> 关键字表示，指定附加约束（例如对局部参数的约束）。</li>
</ul>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-142-1" id="__codelineno-142-1" name="__codelineno-142-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-142-2" id="__codelineno-142-2" name="__codelineno-142-2"></a><span class="k">concept</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">requires</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-142-3" id="__codelineno-142-3" name="__codelineno-142-3"></a><span class="w">  </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="k">sizeof</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="kt">size_t</span><span class="o">&gt;</span><span class="p">;</span>
<a href="#__codelineno-142-4" id="__codelineno-142-4" name="__codelineno-142-4"></a><span class="p">};</span>
</code></pre></div>
<p>另见：<a href="#concepts-library">概念库</a>。</p>
<h4 id="designated-initializers">指定初始化器（Designated initializers）<a class="headerlink" href="#designated-initializers" title="Permanent link">¶</a></h4>
<p>C风格的指定初始化器语法。任何未在指定初始化器列表中显式列出的成员字段都会被默认初始化。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-143-1" id="__codelineno-143-1" name="__codelineno-143-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-143-2" id="__codelineno-143-2" name="__codelineno-143-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a href="#__codelineno-143-3" id="__codelineno-143-3" name="__codelineno-143-3"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a href="#__codelineno-143-4" id="__codelineno-143-4" name="__codelineno-143-4"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<a href="#__codelineno-143-5" id="__codelineno-143-5" name="__codelineno-143-5"></a><span class="p">};</span>
<a href="#__codelineno-143-6" id="__codelineno-143-6" name="__codelineno-143-6"></a>
<a href="#__codelineno-143-7" id="__codelineno-143-7" name="__codelineno-143-7"></a><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span><span class="w"> </span><span class="c1">// a.x == 1, a.y == 0, a.z == 2</span>
</code></pre></div>
<h4 id="lambda-template-syntax-for-lambdas">模板语法用于 Lambda 表达式（Template syntax for lambdas）<a class="headerlink" href="#lambda-template-syntax-for-lambdas" title="Permanent link">¶</a></h4>
<p>在 Lambda 表达式中使用熟悉的模板语法。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-144-1" id="__codelineno-144-1" name="__codelineno-144-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-144-2" id="__codelineno-144-2" name="__codelineno-144-2"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-144-3" id="__codelineno-144-3" name="__codelineno-144-3"></a><span class="p">};</span>
</code></pre></div>
<h4 id="for-range-based-for-loop-with-initializer">带初始化器的基于范围的 for 循环（Range-based for loop with initializer）<a class="headerlink" href="#for-range-based-for-loop-with-initializer" title="Permanent link">¶</a></h4>
<p>此特性简化了常见的代码模式，帮助保持作用域紧凑，并提供了优雅的解决方案来解决常见的生命周期问题。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-145-1" id="__codelineno-145-1" name="__codelineno-145-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">};</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-145-2" id="__codelineno-145-2" name="__codelineno-145-2"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>
<a href="#__codelineno-145-3" id="__codelineno-145-3" name="__codelineno-145-3"></a><span class="p">}</span>
<a href="#__codelineno-145-4" id="__codelineno-145-4" name="__codelineno-145-4"></a><span class="c1">// 打印 "123"</span>
</code></pre></div>
<h4 id="likely-and-unlikely-attributes">[[likely]] and [[unlikely]] attributes<a class="headerlink" href="#likely-and-unlikely-attributes" title="Permanent link">¶</a></h4>
<p>向优化器提供提示，表明标记的语句具有较高的执行概率。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-146-1" id="__codelineno-146-1" name="__codelineno-146-1"></a><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-146-2" id="__codelineno-146-2" name="__codelineno-146-2"></a><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span>
<a href="#__codelineno-146-3" id="__codelineno-146-3" name="__codelineno-146-3"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-146-4" id="__codelineno-146-4" name="__codelineno-146-4"></a><span class="w">  </span><span class="k">break</span><span class="p">;</span>
<a href="#__codelineno-146-5" id="__codelineno-146-5" name="__codelineno-146-5"></a>
<a href="#__codelineno-146-6" id="__codelineno-146-6" name="__codelineno-146-6"></a><span class="p">[[</span><span class="n">likely</span><span class="p">]]</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="c1">// n == 2 被认为比其他任何值更可能</span>
<a href="#__codelineno-146-7" id="__codelineno-146-7" name="__codelineno-146-7"></a><span class="w">  </span><span class="c1">// ...            // 被执行</span>
<a href="#__codelineno-146-8" id="__codelineno-146-8" name="__codelineno-146-8"></a><span class="w">  </span><span class="k">break</span><span class="p">;</span>
<a href="#__codelineno-146-9" id="__codelineno-146-9" name="__codelineno-146-9"></a><span class="p">}</span>
</code></pre></div>
<p>如果一个 likely/unlikely 属性出现在 if 语句的右括号之后，它表示该分支很可能/不太可能执行其子语句（主体）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-147-1" id="__codelineno-147-1" name="__codelineno-147-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_random_number_between_x_and_y</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<a href="#__codelineno-147-2" id="__codelineno-147-2" name="__codelineno-147-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">[[</span><span class="n">likely</span><span class="p">]]</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-147-3" id="__codelineno-147-3" name="__codelineno-147-3"></a><span class="w">  </span><span class="c1">// if 语句的主体</span>
<a href="#__codelineno-147-4" id="__codelineno-147-4" name="__codelineno-147-4"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-147-5" id="__codelineno-147-5" name="__codelineno-147-5"></a><span class="p">}</span>
</code></pre></div>
<p>它也可以应用于迭代语句的子语句（主体）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-148-1" id="__codelineno-148-1" name="__codelineno-148-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">unlikely_truthy_condition</span><span class="p">)</span><span class="w"> </span><span class="p">[[</span><span class="n">unlikely</span><span class="p">]]</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-148-2" id="__codelineno-148-2" name="__codelineno-148-2"></a><span class="w">  </span><span class="c1">// while 语句的主体</span>
<a href="#__codelineno-148-3" id="__codelineno-148-3" name="__codelineno-148-3"></a><span class="w">  </span><span class="c1">// ...</span>
<a href="#__codelineno-148-4" id="__codelineno-148-4" name="__codelineno-148-4"></a><span class="p">}</span>
</code></pre></div>
<h4 id="thisdeprecate-implicit-capture-of-this">弃用隐式捕获 this（Deprecate implicit capture of this）<a class="headerlink" href="#thisdeprecate-implicit-capture-of-this" title="Permanent link">¶</a></h4>
<p>隐式捕获 <code>this</code> 使用 <code>[=]</code> 现在被弃用；建议使用 <code>[=, this]</code> 或 <code>[=, *this]</code> 显式捕获。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-149-1" id="__codelineno-149-1" name="__codelineno-149-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">int_value</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-149-2" id="__codelineno-149-2" name="__codelineno-149-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-149-3" id="__codelineno-149-3" name="__codelineno-149-3"></a><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">getter_fn</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-149-4" id="__codelineno-149-4" name="__codelineno-149-4"></a><span class="w">    </span><span class="c1">// 不好：</span>
<a href="#__codelineno-149-5" id="__codelineno-149-5" name="__codelineno-149-5"></a><span class="w">    </span><span class="c1">// return [=]() { return n; };</span>
<a href="#__codelineno-149-6" id="__codelineno-149-6" name="__codelineno-149-6"></a>
<a href="#__codelineno-149-7" id="__codelineno-149-7" name="__codelineno-149-7"></a><span class="w">    </span><span class="c1">// 好：</span>
<a href="#__codelineno-149-8" id="__codelineno-149-8" name="__codelineno-149-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">]()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-149-9" id="__codelineno-149-9" name="__codelineno-149-9"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-149-10" id="__codelineno-149-10" name="__codelineno-149-10"></a><span class="p">};</span>
</code></pre></div>
<h4 id="class-types-in-non-type-template-parameters">非类型模板参数中的类类型（Class types in non-type template parameters）<a class="headerlink" href="#class-types-in-non-type-template-parameters" title="Permanent link">¶</a></h4>
<p>现在可以在非类型模板参数中使用类。作为模板参数传递的对象具有 <code>const T</code> 类型，其中 <code>T</code> 是对象的类型，并且具有静态存储持续时间。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-150-1" id="__codelineno-150-1" name="__codelineno-150-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">foo</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-150-2" id="__codelineno-150-2" name="__codelineno-150-2"></a><span class="w">  </span><span class="n">foo</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<a href="#__codelineno-150-3" id="__codelineno-150-3" name="__codelineno-150-3"></a><span class="w">  </span><span class="k">constexpr</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-150-4" id="__codelineno-150-4" name="__codelineno-150-4"></a><span class="p">};</span>
<a href="#__codelineno-150-5" id="__codelineno-150-5" name="__codelineno-150-5"></a>
<a href="#__codelineno-150-6" id="__codelineno-150-6" name="__codelineno-150-6"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">foo</span><span class="w"> </span><span class="n">f</span><span class="o">&gt;</span>
<a href="#__codelineno-150-7" id="__codelineno-150-7" name="__codelineno-150-7"></a><span class="k">auto</span><span class="w"> </span><span class="n">get_foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-150-8" id="__codelineno-150-8" name="__codelineno-150-8"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
<a href="#__codelineno-150-9" id="__codelineno-150-9" name="__codelineno-150-9"></a><span class="p">}</span>
<a href="#__codelineno-150-10" id="__codelineno-150-10" name="__codelineno-150-10"></a>
<a href="#__codelineno-150-11" id="__codelineno-150-11" name="__codelineno-150-11"></a><span class="n">get_foo</span><span class="p">();</span><span class="w"> </span><span class="c1">// 使用隐式构造函数</span>
<a href="#__codelineno-150-12" id="__codelineno-150-12" name="__codelineno-150-12"></a><span class="n">get_foo</span><span class="o">&lt;</span><span class="n">foo</span><span class="p">{</span><span class="mi">123</span><span class="p">}</span><span class="o">&gt;</span><span class="p">();</span>
</code></pre></div>
<h4 id="constexpr-constexpr-virtual-functions">constexpr 虚函数（constexpr virtual functions）<a class="headerlink" href="#constexpr-constexpr-virtual-functions" title="Permanent link">¶</a></h4>
<p>虚函数现在可以是 <code>constexpr</code> 并在编译时进行评估。<code>constexpr</code> 虚函数可以覆盖非 <code>constexpr</code> 虚函数，反之亦然。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-151-1" id="__codelineno-151-1" name="__codelineno-151-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">X1</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-151-2" id="__codelineno-151-2" name="__codelineno-151-2"></a><span class="w">  </span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a href="#__codelineno-151-3" id="__codelineno-151-3" name="__codelineno-151-3"></a><span class="p">};</span>
<a href="#__codelineno-151-4" id="__codelineno-151-4" name="__codelineno-151-4"></a>
<a href="#__codelineno-151-5" id="__codelineno-151-5" name="__codelineno-151-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">X2</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">X1</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-151-6" id="__codelineno-151-6" name="__codelineno-151-6"></a><span class="w">  </span><span class="k">constexpr</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-151-7" id="__codelineno-151-7" name="__codelineno-151-7"></a><span class="p">};</span>
<a href="#__codelineno-151-8" id="__codelineno-151-8" name="__codelineno-151-8"></a>
<a href="#__codelineno-151-9" id="__codelineno-151-9" name="__codelineno-151-9"></a><span class="k">struct</span><span class="w"> </span><span class="nc">X3</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">X2</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-151-10" id="__codelineno-151-10" name="__codelineno-151-10"></a><span class="w">  </span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-151-11" id="__codelineno-151-11" name="__codelineno-151-11"></a><span class="p">};</span>
<a href="#__codelineno-151-12" id="__codelineno-151-12" name="__codelineno-151-12"></a>
<a href="#__codelineno-151-13" id="__codelineno-151-13" name="__codelineno-151-13"></a><span class="k">struct</span><span class="w"> </span><span class="nc">X4</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">X3</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-151-14" id="__codelineno-151-14" name="__codelineno-151-14"></a><span class="w">  </span><span class="k">constexpr</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-151-15" id="__codelineno-151-15" name="__codelineno-151-15"></a><span class="p">};</span>
<a href="#__codelineno-151-16" id="__codelineno-151-16" name="__codelineno-151-16"></a>
<a href="#__codelineno-151-17" id="__codelineno-151-17" name="__codelineno-151-17"></a><span class="k">constexpr</span><span class="w"> </span><span class="n">X4</span><span class="w"> </span><span class="n">x4</span><span class="p">;</span>
<a href="#__codelineno-151-18" id="__codelineno-151-18" name="__codelineno-151-18"></a><span class="n">x4</span><span class="p">.</span><span class="n">f</span><span class="p">();</span><span class="w"> </span><span class="c1">// == 4</span>
</code></pre></div>
<h4 id="explicitbool">explicit(bool)<a class="headerlink" href="#explicitbool" title="Permanent link">¶</a></h4>
<p>在编译时有条件地选择是否将构造函数设为显式。<code>explicit(true)</code> 与指定 <code>explicit</code> 相同。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-152-1" id="__codelineno-152-1" name="__codelineno-152-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">foo</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-152-2" id="__codelineno-152-2" name="__codelineno-152-2"></a><span class="w">  </span><span class="c1">// 指定非整数类型（字符串、浮点数等）需要显式构造。</span>
<a href="#__codelineno-152-3" id="__codelineno-152-3" name="__codelineno-152-3"></a><span class="w">  </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a href="#__codelineno-152-4" id="__codelineno-152-4" name="__codelineno-152-4"></a><span class="w">  </span><span class="k">explicit</span><span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">is_integral_v</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a href="#__codelineno-152-5" id="__codelineno-152-5" name="__codelineno-152-5"></a><span class="p">};</span>
<a href="#__codelineno-152-6" id="__codelineno-152-6" name="__codelineno-152-6"></a>
<a href="#__codelineno-152-7" id="__codelineno-152-7" name="__codelineno-152-7"></a><span class="n">foo</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span><span class="w"> </span><span class="c1">// 正确</span>
<a href="#__codelineno-152-8" id="__codelineno-152-8" name="__codelineno-152-8"></a><span class="n">foo</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"123"</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误：显式构造函数不是候选（explicit 说明符的值为 true）</span>
<a href="#__codelineno-152-9" id="__codelineno-152-9" name="__codelineno-152-9"></a><span class="n">foo</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">{</span><span class="s">"123"</span><span class="p">};</span><span class="w"> </span><span class="c1">// 正确</span>
</code></pre></div>
<h4 id="immediate-functions">立即函数（Immediate functions）<a class="headerlink" href="#immediate-functions" title="Permanent link">¶</a></h4>
<p>类似于 <code>constexpr</code> 函数，但具有 <code>consteval</code> 说明符的函数必须产生常量。这些被称为<em>立即函数</em>。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-153-1" id="__codelineno-153-1" name="__codelineno-153-1"></a><span class="k">consteval</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">sqr</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-153-2" id="__codelineno-153-2" name="__codelineno-153-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<a href="#__codelineno-153-3" id="__codelineno-153-3" name="__codelineno-153-3"></a><span class="p">}</span>
<a href="#__codelineno-153-4" id="__codelineno-153-4" name="__codelineno-153-4"></a>
<a href="#__codelineno-153-5" id="__codelineno-153-5" name="__codelineno-153-5"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqr</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"> </span><span class="c1">// 正确</span>
<a href="#__codelineno-153-6" id="__codelineno-153-6" name="__codelineno-153-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<a href="#__codelineno-153-7" id="__codelineno-153-7" name="__codelineno-153-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqr</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="c1">// 错误：'x' 的值在常量表达式中不可用</span>
<a href="#__codelineno-153-8" id="__codelineno-153-8" name="__codelineno-153-8"></a><span class="w">                 </span><span class="c1">// 如果 `sqr` 是 `constexpr` 函数则正确</span>
</code></pre></div>
<h4 id="using-enum">using enum<a class="headerlink" href="#using-enum" title="Permanent link">¶</a></h4>
<p>将枚举的成员引入作用域以提高可读性。之前：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-154-1" id="__codelineno-154-1" name="__codelineno-154-1"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">rgba_color_channel</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-154-2" id="__codelineno-154-2" name="__codelineno-154-2"></a>
<a href="#__codelineno-154-3" id="__codelineno-154-3" name="__codelineno-154-3"></a><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="n">rgba_color_channel</span><span class="w"> </span><span class="n">channel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-154-4" id="__codelineno-154-4" name="__codelineno-154-4"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-154-5" id="__codelineno-154-5" name="__codelineno-154-5"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">rgba_color_channel</span><span class="o">::</span><span class="no">red</span><span class="p">:</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="s">"red"</span><span class="p">;</span>
<a href="#__codelineno-154-6" id="__codelineno-154-6" name="__codelineno-154-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">rgba_color_channel</span><span class="o">::</span><span class="no">green</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">"green"</span><span class="p">;</span>
<a href="#__codelineno-154-7" id="__codelineno-154-7" name="__codelineno-154-7"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">rgba_color_channel</span><span class="o">::</span><span class="no">blue</span><span class="p">:</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">"blue"</span><span class="p">;</span>
<a href="#__codelineno-154-8" id="__codelineno-154-8" name="__codelineno-154-8"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">rgba_color_channel</span><span class="o">::</span><span class="no">alpha</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">"alpha"</span><span class="p">;</span>
<a href="#__codelineno-154-9" id="__codelineno-154-9" name="__codelineno-154-9"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-154-10" id="__codelineno-154-10" name="__codelineno-154-10"></a><span class="p">}</span>
</code></pre></div>
<p>之后：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-155-1" id="__codelineno-155-1" name="__codelineno-155-1"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">rgba_color_channel</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-155-2" id="__codelineno-155-2" name="__codelineno-155-2"></a>
<a href="#__codelineno-155-3" id="__codelineno-155-3" name="__codelineno-155-3"></a><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="n">rgba_color_channel</span><span class="w"> </span><span class="n">my_channel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-155-4" id="__codelineno-155-4" name="__codelineno-155-4"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">my_channel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-155-5" id="__codelineno-155-5" name="__codelineno-155-5"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="nc">rgba_color_channel</span><span class="p">;</span>
<a href="#__codelineno-155-6" id="__codelineno-155-6" name="__codelineno-155-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">red</span><span class="p">:</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="s">"red"</span><span class="p">;</span>
<a href="#__codelineno-155-7" id="__codelineno-155-7" name="__codelineno-155-7"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">green</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">"green"</span><span class="p">;</span>
<a href="#__codelineno-155-8" id="__codelineno-155-8" name="__codelineno-155-8"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">blue</span><span class="p">:</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">"blue"</span><span class="p">;</span>
<a href="#__codelineno-155-9" id="__codelineno-155-9" name="__codelineno-155-9"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">alpha</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">"alpha"</span><span class="p">;</span>
<a href="#__codelineno-155-10" id="__codelineno-155-10" name="__codelineno-155-10"></a><span class="w">  </span><span class="p">}</span>
<a href="#__codelineno-155-11" id="__codelineno-155-11" name="__codelineno-155-11"></a><span class="p">}</span>
</code></pre></div>
<h4 id="lambda-lambda-capture-of-parameter-pack">Lambda 捕获参数包（Lambda capture of parameter pack）<a class="headerlink" href="#lambda-lambda-capture-of-parameter-pack" title="Permanent link">¶</a></h4>
<p>按值捕获参数包：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-156-1" id="__codelineno-156-1" name="__codelineno-156-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a href="#__codelineno-156-2" id="__codelineno-156-2" name="__codelineno-156-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a href="#__codelineno-156-3" id="__codelineno-156-3" name="__codelineno-156-3"></a><span class="w">    </span><span class="c1">// 按值：</span>
<a href="#__codelineno-156-4" id="__codelineno-156-4" name="__codelineno-156-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[...</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)]</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-156-5" id="__codelineno-156-5" name="__codelineno-156-5"></a><span class="w">        </span><span class="c1">// ...</span>
<a href="#__codelineno-156-6" id="__codelineno-156-6" name="__codelineno-156-6"></a><span class="w">    </span><span class="p">};</span>
<a href="#__codelineno-156-7" id="__codelineno-156-7" name="__codelineno-156-7"></a><span class="p">}</span>
</code></pre></div>
<p>按引用捕获参数包：</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-157-1" id="__codelineno-157-1" name="__codelineno-157-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a href="#__codelineno-157-2" id="__codelineno-157-2" name="__codelineno-157-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a href="#__codelineno-157-3" id="__codelineno-157-3" name="__codelineno-157-3"></a><span class="w">    </span><span class="c1">// 按引用：</span>
<a href="#__codelineno-157-4" id="__codelineno-157-4" name="__codelineno-157-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="p">...</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)]</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-157-5" id="__codelineno-157-5" name="__codelineno-157-5"></a><span class="w">        </span><span class="c1">// ...</span>
<a href="#__codelineno-157-6" id="__codelineno-157-6" name="__codelineno-157-6"></a><span class="w">    </span><span class="p">};</span>
<a href="#__codelineno-157-7" id="__codelineno-157-7" name="__codelineno-157-7"></a><span class="p">}</span>
</code></pre></div>
<h4 id="char8_t">char8_t<a class="headerlink" href="#char8_t" title="Permanent link">¶</a></h4>
<p>提供了一个用于表示 UTF-8 字符串的标准类型。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-158-1" id="__codelineno-158-1" name="__codelineno-158-1"></a><span class="kt">char8_t</span><span class="w"> </span><span class="n">utf8_str</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sa">u8</span><span class="s">"</span><span class="se">\u0123</span><span class="s">"</span><span class="p">;</span>
</code></pre></div>
<h4 id="constinit">constinit<a class="headerlink" href="#constinit" title="Permanent link">¶</a></h4>
<p><code>constinit</code> 说明符要求变量必须在编译时初始化。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-159-1" id="__codelineno-159-1" name="__codelineno-159-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">g</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">"动态初始化"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-159-2" id="__codelineno-159-2" name="__codelineno-159-2"></a><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">"常量初始化器"</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">g</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<a href="#__codelineno-159-3" id="__codelineno-159-3" name="__codelineno-159-3"></a>
<a href="#__codelineno-159-4" id="__codelineno-159-4" name="__codelineno-159-4"></a><span class="k">constinit</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// 正确</span>
<a href="#__codelineno-159-5" id="__codelineno-159-5" name="__codelineno-159-5"></a><span class="k">constinit</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// 错误：`g` 不是 constexpr，所以 `d` 不能在编译时进行评估。</span>
</code></pre></div>
<h3 id="c20_2">C++20 库特性<a class="headerlink" href="#c20_2" title="Permanent link">¶</a></h3>
<h4 id="concepts-library">Concepts library<a class="headerlink" href="#concepts-library" title="Permanent link">¶</a></h4>
<p>标准库也提供了一些 concepts 用于构建更复杂的 concepts。一些包括：</p>
<p><strong>核心语言概念</strong>：</p>
<ul>
<li><code>same_as</code>：指定两个类型是相同的。</li>
<li><code>derived_from</code>：指定一个类型派生自另一个类型。</li>
<li><code>convertible_to</code>：指定一个类型可以隐式转换为另一个类型。</li>
<li><code>common_with</code>：指定两个类型共享一个公共类型。</li>
<li><code>integral</code>：指定一个类型是整数类型。</li>
<li><code>default_constructible</code>：指定一个类型的对象可以进行默认构造。</li>
</ul>
<p><strong>比较概念</strong>：</p>
<ul>
<li><code>boolean</code>：指定一个类型可以用于布尔上下文。</li>
<li><code>equality_comparable</code>：指定 <code>operator==</code> 是一个等价关系。</li>
</ul>
<p><strong>对象概念</strong>：</p>
<ul>
<li><code>movable</code>：指定一个类型的对象可以被移动和交换。</li>
<li><code>copyable</code>：指定一个类型的对象可以被复制、移动和交换。</li>
<li><code>semiregular</code>：指定一个类型的对象可以被复制、移动、交换，并进行默认构造。</li>
<li><code>regular</code>：指定一个类型是 <em>regular</em>，即它既是 <code>semiregular</code> 也是 <code>equality_comparable</code>。</li>
</ul>
<p><strong>可调用概念</strong>：</p>
<ul>
<li><code>invocable</code>：指定一个可调用类型可以用一组给定的参数类型进行调用。</li>
<li><code>predicate</code>：指定一个可调用类型是一个布尔谓词。</li>
</ul>
<p>另见：<a href="#concepts">概念</a>。</p>
<h4 id="synchronized-buffered-outputstream">同步缓冲输出流（Synchronized buffered outputstream）<a class="headerlink" href="#synchronized-buffered-outputstream" title="Permanent link">¶</a></h4>
<p>为包装的输出流缓冲输出操作，确保同步（即输出不会交错）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-160-1" id="__codelineno-160-1" name="__codelineno-160-1"></a><span class="n">std</span><span class="o">::</span><span class="n">osyncstream</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">}</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"The value of x is:"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre></div>
<h4 id="stdspan">std::span<a class="headerlink" href="#stdspan" title="Permanent link">¶</a></h4>
<p><code>span</code> 是一个视图（即非拥有的）容器，提供对一组连续元素的边界检查访问。由于视图不拥有其元素，因此构造和复制开销较小——简化地说，视图持有对其数据的引用。与其维护指针/迭代器和长度字段相比，<code>span</code> 将这两者包装在一个对象中。</p>
<p><code>span</code> 可以是动态大小或固定大小（称为其 <em>extent</em>）。固定大小的 <code>span</code> 受益于边界检查。</p>
<p><code>span</code> 不传播 <code>const</code>，因此要构造只读 <code>span</code>，请使用 <code>std::span&lt;const T&gt;</code>。</p>
<p>示例：使用动态大小的 <code>span</code> 打印来自各种容器的整数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-161-1" id="__codelineno-161-1" name="__codelineno-161-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-161-2" id="__codelineno-161-2" name="__codelineno-161-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-161-3" id="__codelineno-161-3" name="__codelineno-161-3"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a href="#__codelineno-161-4" id="__codelineno-161-4" name="__codelineno-161-4"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-161-5" id="__codelineno-161-5" name="__codelineno-161-5"></a><span class="p">}</span>
<a href="#__codelineno-161-6" id="__codelineno-161-6" name="__codelineno-161-6"></a>
<a href="#__codelineno-161-7" id="__codelineno-161-7" name="__codelineno-161-7"></a><span class="n">print_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">});</span>
<a href="#__codelineno-161-8" id="__codelineno-161-8" name="__codelineno-161-8"></a><span class="n">print_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">});</span>
<a href="#__codelineno-161-9" id="__codelineno-161-9" name="__codelineno-161-9"></a>
<a href="#__codelineno-161-10" id="__codelineno-161-10" name="__codelineno-161-10"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-161-11" id="__codelineno-161-11" name="__codelineno-161-11"></a><span class="n">print_ints</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<a href="#__codelineno-161-12" id="__codelineno-161-12" name="__codelineno-161-12"></a><span class="c1">// 等等</span>
</code></pre></div>
<p>示例：对于与 <code>span</code> 的 extent 不匹配的容器，静态大小的 <code>span</code> 将无法编译。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-162-1" id="__codelineno-162-1" name="__codelineno-162-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_three_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-162-2" id="__codelineno-162-2" name="__codelineno-162-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-162-3" id="__codelineno-162-3" name="__codelineno-162-3"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a href="#__codelineno-162-4" id="__codelineno-162-4" name="__codelineno-162-4"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-162-5" id="__codelineno-162-5" name="__codelineno-162-5"></a><span class="p">}</span>
<a href="#__codelineno-162-6" id="__codelineno-162-6" name="__codelineno-162-6"></a>
<a href="#__codelineno-162-7" id="__codelineno-162-7" name="__codelineno-162-7"></a><span class="n">print_three_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// 错误</span>
<a href="#__codelineno-162-8" id="__codelineno-162-8" name="__codelineno-162-8"></a><span class="n">print_three_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// 错误</span>
<a href="#__codelineno-162-9" id="__codelineno-162-9" name="__codelineno-162-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-162-10" id="__codelineno-162-10" name="__codelineno-162-10"></a><span class="n">print_three_ints</span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="w"> </span><span class="c1">// 错误</span>
<a href="#__codelineno-162-11" id="__codelineno-162-11" name="__codelineno-162-11"></a>
<a href="#__codelineno-162-12" id="__codelineno-162-12" name="__codelineno-162-12"></a><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-162-13" id="__codelineno-162-13" name="__codelineno-162-13"></a><span class="n">print_three_ints</span><span class="p">(</span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// 正确</span>
<a href="#__codelineno-162-14" id="__codelineno-162-14" name="__codelineno-162-14"></a>
<a href="#__codelineno-162-15" id="__codelineno-162-15" name="__codelineno-162-15"></a><span class="c1">// 如果需要，可以手动构造 span：</span>
<a href="#__codelineno-162-16" id="__codelineno-162-16" name="__codelineno-162-16"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="w"> </span><span class="n">c</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-162-17" id="__codelineno-162-17" name="__codelineno-162-17"></a><span class="n">print_three_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// 正确：设置指针和长度字段。</span>
<a href="#__codelineno-162-18" id="__codelineno-162-18" name="__codelineno-162-18"></a><span class="n">print_three_ints</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">cend</span><span class="p">()</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// 正确：使用迭代器对。</span>
</code></pre></div>
<h4 id="bit-operations">位操作（Bit operations）<a class="headerlink" href="#bit-operations" title="Permanent link">¶</a></h4>
<p>C++20 提供了一个新的 <code>&lt;bit&gt;</code> 头文件，提供了一些位操作，包括 popcount。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-163-1" id="__codelineno-163-1" name="__codelineno-163-1"></a><span class="n">std</span><span class="o">::</span><span class="n">popcount</span><span class="p">(</span><span class="mi">0u</span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
<a href="#__codelineno-163-2" id="__codelineno-163-2" name="__codelineno-163-2"></a><span class="n">std</span><span class="o">::</span><span class="n">popcount</span><span class="p">(</span><span class="mi">1u</span><span class="p">);</span><span class="w"> </span><span class="c1">// 1</span>
<a href="#__codelineno-163-3" id="__codelineno-163-3" name="__codelineno-163-3"></a><span class="n">std</span><span class="o">::</span><span class="n">popcount</span><span class="p">(</span><span class="mb">0b1111'0000u</span><span class="p">);</span><span class="w"> </span><span class="c1">// 4</span>
</code></pre></div>
<h4 id="math-constants">数学常数（Math constants）<a class="headerlink" href="#math-constants" title="Permanent link">¶</a></h4>
<p>包括 PI、欧拉数等在内的数学常数在 <code>&lt;numbers&gt;</code> 头文件中定义。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-164-1" id="__codelineno-164-1" name="__codelineno-164-1"></a><span class="n">std</span><span class="o">::</span><span class="n">numbers</span><span class="o">::</span><span class="n">pi</span><span class="p">;</span><span class="w"> </span><span class="c1">// 3.14159...</span>
<a href="#__codelineno-164-2" id="__codelineno-164-2" name="__codelineno-164-2"></a><span class="n">std</span><span class="o">::</span><span class="n">numbers</span><span class="o">::</span><span class="n">e</span><span class="p">;</span><span class="w"> </span><span class="c1">// 2.71828...</span>
</code></pre></div>
<h4 id="stdis_constant_evaluated">std::is_constant_evaluated<a class="headerlink" href="#stdis_constant_evaluated" title="Permanent link">¶</a></h4>
<p>在编译时上下文中调用时为真值的谓词函数。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-165-1" id="__codelineno-165-1" name="__codelineno-165-1"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_compile_time</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-165-2" id="__codelineno-165-2" name="__codelineno-165-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_constant_evaluated</span><span class="p">();</span>
<a href="#__codelineno-165-3" id="__codelineno-165-3" name="__codelineno-165-3"></a><span class="p">}</span>
<a href="#__codelineno-165-4" id="__codelineno-165-4" name="__codelineno-165-4"></a>
<a href="#__codelineno-165-5" id="__codelineno-165-5" name="__codelineno-165-5"></a><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_compile_time</span><span class="p">();</span><span class="w"> </span><span class="c1">// true</span>
<a href="#__codelineno-165-6" id="__codelineno-165-6" name="__codelineno-165-6"></a><span class="kt">bool</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_compile_time</span><span class="p">();</span><span class="w"> </span><span class="c1">// false</span>
</code></pre></div>
<h4 id="stdmake_shared-stdmake_shared-supports-arrays">std::make_shared 支持数组（std::make_shared supports arrays）<a class="headerlink" href="#stdmake_shared-stdmake_shared-supports-arrays" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-166-1" id="__codelineno-166-1" name="__codelineno-166-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// 指向 `int[5]` 的指针</span>
<a href="#__codelineno-166-2" id="__codelineno-166-2" name="__codelineno-166-2"></a><span class="c1">// 或</span>
<a href="#__codelineno-166-3" id="__codelineno-166-3" name="__codelineno-166-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// 指向 `int[5]` 的指针</span>
</code></pre></div>
<h4 id="starts_with-ends_with-starts_with-and-ends_with-on-strings">starts_with 和 ends_with 用于字符串（starts_with and ends_with on strings）<a class="headerlink" href="#starts_with-ends_with-starts_with-and-ends_with-on-strings" title="Permanent link">¶</a></h4>
<p>字符串（和字符串视图）现在具有 <code>starts_with</code> 和 <code>ends_with</code> 成员函数，用于检查字符串是否以给定字符串开始或结束。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-167-1" id="__codelineno-167-1" name="__codelineno-167-1"></a><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"foobar"</span><span class="p">;</span>
<a href="#__codelineno-167-2" id="__codelineno-167-2" name="__codelineno-167-2"></a><span class="n">str</span><span class="p">.</span><span class="n">starts_with</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
<a href="#__codelineno-167-3" id="__codelineno-167-3" name="__codelineno-167-3"></a><span class="n">str</span><span class="p">.</span><span class="n">ends_with</span><span class="p">(</span><span class="s">"baz"</span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
</code></pre></div>
<h4 id="check-if-associative-container-has-element">检查关联容器是否包含元素（Check if associative container has element）<a class="headerlink" href="#check-if-associative-container-has-element" title="Permanent link">¶</a></h4>
<p>关联容器，如集合和映射，具有 <code>contains</code> 成员函数，可用于替代“查找并检查迭代器结束”习惯用法。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-168-1" id="__codelineno-168-1" name="__codelineno-168-1"></a><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="p">{{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="sc">'a'</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="sc">'b'</span><span class="p">}};</span>
<a href="#__codelineno-168-2" id="__codelineno-168-2" name="__codelineno-168-2"></a><span class="n">map</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
<a href="#__codelineno-168-3" id="__codelineno-168-3" name="__codelineno-168-3"></a><span class="n">map</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span><span class="w"> </span><span class="c1">// false</span>
<a href="#__codelineno-168-4" id="__codelineno-168-4" name="__codelineno-168-4"></a>
<a href="#__codelineno-168-5" id="__codelineno-168-5" name="__codelineno-168-5"></a><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">};</span>
<a href="#__codelineno-168-6" id="__codelineno-168-6" name="__codelineno-168-6"></a><span class="n">set</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
</code></pre></div>
<h4 id="stdbit_cast">std::bit_cast<a class="headerlink" href="#stdbit_cast" title="Permanent link">¶</a></h4>
<p>一种更安全的将对象从一种类型重新解释为另一种类型的方法。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-169-1" id="__codelineno-169-1" name="__codelineno-169-1"></a><span class="kt">float</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123.0</span><span class="p">;</span>
<a href="#__codelineno-169-2" id="__codelineno-169-2" name="__codelineno-169-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">bit_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</code></pre></div>
<h4 id="stdmidpoint">std::midpoint<a class="headerlink" href="#stdmidpoint" title="Permanent link">¶</a></h4>
<p>安全地计算两个整数的中点（无溢出）。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-170-1" id="__codelineno-170-1" name="__codelineno-170-1"></a><span class="n">std</span><span class="o">::</span><span class="n">midpoint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// == 2</span>
</code></pre></div>
<h4 id="stdto_array">std::to_array<a class="headerlink" href="#stdto_array" title="Permanent link">¶</a></h4>
<p>将给定的数组/“似数组”对象转换为 <code>std::array</code>。</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-171-1" id="__codelineno-171-1" name="__codelineno-171-1"></a><span class="n">std</span><span class="o">::</span><span class="n">to_array</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span><span class="w"> </span><span class="c1">// 返回 `std::array&lt;char, 4&gt;`</span>
<a href="#__codelineno-171-2" id="__codelineno-171-2" name="__codelineno-171-2"></a><span class="n">std</span><span class="o">::</span><span class="n">to_array</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">});</span><span class="w"> </span><span class="c1">// 返回 `std::array&lt;int, 3&gt;`</span>
<a href="#__codelineno-171-3" id="__codelineno-171-3" name="__codelineno-171-3"></a>
<a href="#__codelineno-171-4" id="__codelineno-171-4" name="__codelineno-171-4"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">};</span>
<a href="#__codelineno-171-5" id="__codelineno-171-5" name="__codelineno-171-5"></a><span class="n">std</span><span class="o">::</span><span class="n">to_array</span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="w"> </span><span class="c1">// 返回 `std::array&lt;int, 3&gt;`</span>
</code></pre></div>
<h2 id="_1">致谢<a class="headerlink" href="#_1" title="Permanent link">¶</a></h2>
<ul>
<li><a href="http://en.cppreference.com/w/cpp">cppreference</a> - 特别有用，用于查找新库特性的示例和文档。</li>
<li><a href="http://thbecker.net/articles/rvalue_references/section_01.html">C++ Rvalue References Explained</a> - 一个很好的介绍，用于理解右值引用、完美转发和移动语义。</li>
<li><a href="http://clang.llvm.org/cxx_status.html">clang</a> 和 <a href="https://gcc.gnu.org/projects/cxx-status.html">gcc</a> 的标准支持页面。这里还包含了我用来查找特性描述、修复内容和示例的语言/库提案。</li>
<li><a href="https://godbolt.org/">Compiler explorer</a></li>
<li><a href="https://www.amazon.com/Effective-Modern-Specific-Ways-Improve/dp/1491903996">Scott Meyers' Effective Modern C++</a> - 强烈推荐的书籍！</li>
<li><a href="https://www.youtube.com/channel/UCxHAlbZQNFU2LgEtiqd2Maw">Jason Turner's C++ Weekly</a> - 很好的 C++ 相关视频集合。</li>
<li><a href="http://stackoverflow.com/questions/7027523/what-can-i-do-with-a-moved-from-object">What can I do with a moved-from object?</a></li>
<li><a href="http://stackoverflow.com/questions/24109737/what-are-some-uses-of-decltypeauto">What are some uses of decltype(auto)?</a></li>
<li>还有许多我忘记的 SO 帖子...</li>
</ul>
<h2 id="_2">作者<a class="headerlink" href="#_2" title="Permanent link">¶</a></h2>
<p>Anthony Calandra</p>
<h2 id="_3">内容贡献者<a class="headerlink" href="#_3" title="Permanent link">¶</a></h2>
<p>参见：<a href="https://github.com/AnthonyCalandra/modern-cpp-features/graphs/contributors">https://github.com/AnthonyCalandra/modern-cpp-features/graphs/contributors</a></p>
<h2 id="_4">许可证<a class="headerlink" href="#_4" title="Permanent link">¶</a></h2>
<p>MIT</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.tooltips", "content.tabs.link", "content.code.copy", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.78eede0e.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.zerolacqua.top/npm/mathjax/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/d3@7/dist/d3.min.js"></script>
      
        <script src="https://unpkg.com/markmap-lib@0.15.3/dist/browser/index.js"></script>
      
        <script src="https://unpkg.com/markmap-view@0.15.3/dist/browser/index.js"></script>
      
    
  </body>
</html>